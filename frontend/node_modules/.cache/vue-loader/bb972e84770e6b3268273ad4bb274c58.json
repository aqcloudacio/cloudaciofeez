{"remainingRequest":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\components\\RiskProfileTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\components\\RiskProfileTable.vue","mtime":1603692513085},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBhcGlTZXJ2aWNlIH0gZnJvbSAiQC9jb21tb24vYXBpLnNlcnZpY2UuanMiOw0KaW1wb3J0IEFBTmFtZUNvbmZpZyBmcm9tICJAL2NvbXBvbmVudHMvQUFOYW1lQ29uZmlnLnZ1ZSI7DQppbXBvcnQgRGVsZXRlT2JqIGZyb20gIkAvY29tcG9uZW50cy9EZWxldGVPYmoudnVlIjsNCmltcG9ydCBBZGRSUEdyb3VwIGZyb20gIkAvY29tcG9uZW50cy9BZGRSUEdyb3VwLnZ1ZSI7DQppbXBvcnQgV2l0aG91dFdhdGNoZXJzIGZyb20gIkAvY29tcG9uZW50cy9taXhpbnMvV2l0aG91dFdhdGNoZXJzLmpzIjsNCg0KaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gInZ1ZXgiOw0KaW1wb3J0IHsNCiAgVVNFUl9VUERBVEUNCn0gZnJvbSAiQC9zdG9yZS9hY3Rpb25zLnR5cGUiOw0KaW1wb3J0IHsNCiAgU0VUX0FDVElWRV9VU0VSX1BST1ANCn0gZnJvbSAiQC9zdG9yZS9tdXRhdGlvbnMudHlwZSI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIlJpc2tQcm9maWxlVGFibGUiLA0KICBtaXhpbnM6IFtXaXRob3V0V2F0Y2hlcnNdLA0KICBwcm9wczogew0KICAgIHJpc2tQcm9maWxlR3JvdXBzOiB7DQogICAgICB0eXBlOiBBcnJheSwNCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwNCiAgICB9LA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBhY3RpdmVTd2l0Y2g6IGZhbHNlLA0KICAgICAgbmV3R3JvdXBOYW1lOiAiIiwNCiAgICAgIGVkaXRHcm91cE5hbWU6IGZhbHNlLA0KICAgICAgcmlza1Byb2ZpbGVzOiBbXSwNCiAgICAgIFJQQUFOYW1lczogW10sDQogICAgICBlcnJvcjogbnVsbCwNCiAgICAgIHNob3duUlA6IG51bGwsDQogICAgICBjaGFuZ2VMaXN0OiBbXSwNCiAgICAgIG5ld1JQOiB7DQogICAgICAgIG5hbWU6IiIsDQogICAgICAgIG9yZGVyOm51bGwsDQogICAgICAgIGFsbG9jYXRpb25zOnt9LA0KICAgICAgfSwNCiAgICB9Ow0KICB9LA0KICBjb21wb25lbnRzOiB7DQogICAgQUFOYW1lQ29uZmlnLA0KICAgIERlbGV0ZU9iaiwNCiAgICBBZGRSUEdyb3VwLA0KDQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwR2V0dGVycyhbImFjdGl2ZVVzZXIiXSksDQogICAgbG9ja01lc3NhZ2UoKSB7DQogICAgICBsZXQgbXNnID0gJyc7DQogICAgICBpZiAoIXRoaXMuaXNOb3RBRlNMTGltaXRlZCkgew0KICAgICAgICBtc2cgKz0gJ1lvdSBjYW5ub3QgZWRpdCBBRlNMIFJpc2sgUHJvZmlsZXMnDQogICAgICB9DQogICAgICBlbHNlIGlmICghdGhpcy5pc1ByYWN0aWNlQWRtaW4pIHsNCiAgICAgICAgbXNnICs9ICdZb3UgYXJlIG5vdCBhbiBhZG1pbiBvZiB0aGlzIFByYWN0aWNlJw0KICAgICAgfQ0KICAgICAgcmV0dXJuIG1zZw0KICAgIH0sDQogICAgY2FuRWRpdCgpIHsNCiAgICAgIGlmICh0aGlzLmlzUHJhY3RpY2VBZG1pbiAmJiB0aGlzLmlzTm90QUZTTExpbWl0ZWQgJiYgdGhpcy5pc05vdERlZmF1bHRUZW1wbGF0ZSApIHsNCiAgICAgICAgcmV0dXJuIHRydWUNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgfQ0KICAgIH0sDQogICAgaXNQcmFjdGljZUFkbWluKCkgew0KICAgICAgaWYgKHRoaXMucmlza1Byb2ZpbGVHcm91cHMgJiYgdGhpcy5zaG93blJQICYmIHRoaXMuc2hvd25SUE9iamVjdC5pZCkgew0KICAgICAgICBpZiAodGhpcy5zaG93blJQT2JqZWN0LmFjdGl2ZV9wcmFjdGljZXMubGVuZ3RoID4gMCkgew0KICAgICAgICAgIHJldHVybiB0aGlzLnNob3duUlBPYmplY3QuYWN0aXZlX3ByYWN0aWNlcy5zb21lKGl0ZW0gPT4gdGhpcy5hY3RpdmVVc2VyLmFkbWluX3ByYWN0aWNlcy5pbmNsdWRlcyhpdGVtKSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgcmV0dXJuIHRydWUNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuIHRydWUNCiAgICAgIH0NCiAgICB9LA0KICAgIGlzTm90RGVmYXVsdFRlbXBsYXRlKCkgew0KICAgICAgaWYgKHRoaXMucmlza1Byb2ZpbGVHcm91cHMgJiYgdGhpcy5zaG93blJQKSB7DQogICAgICAgIGlmICh0aGlzLnNob3duUlBPYmplY3QudGVtcGxhdGUgJiYgdGhpcy5zaG93blJQT2JqZWN0LmRlZmF1bHQpIHsNCiAgICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICByZXR1cm4gdHJ1ZQ0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gdHJ1ZQ0KICAgICAgfQ0KICAgIH0sDQogICAgaXNOb3RBRlNMTGltaXRlZCgpIHsNCiAgICAgIGlmICh0aGlzLnJpc2tQcm9maWxlR3JvdXBzICYmIHRoaXMuc2hvd25SUCkgew0KICAgICAgICBpZiAodGhpcy5fLmlzRW1wdHkodGhpcy5zaG93blJQT2JqZWN0LmFmc2xzKSkgew0KICAgICAgICAgIHJldHVybiB0cnVlDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiB0cnVlDQogICAgICB9DQogICAgfSwNCiAgICBzaG93blJQT2JqZWN0KCkgew0KICAgICAgaWYgKHRoaXMucmlza1Byb2ZpbGVHcm91cHMgJiYgdGhpcy5zaG93blJQKSB7DQogICAgICAgICAgY29uc3QgaSA9IHRoaXMucmlza1Byb2ZpbGVHcm91cHMuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5pZCA9PSB0aGlzLnNob3duUlApOw0KICAgICAgICAgIGlmIChpICE9IC0xKSB7DQogICAgICAgICAgICAvL1RoZSBpZCBpcyBhZGRlZCB0byB0aGUgYXJyYXkgYmVmb3JlIHRoZSBncm91cCBkYXRhIGNvbWVzIGJhY2sgZnJvbQ0KICAgICAgICAgICAgLy8gUHJvZmlsZSB2aWV3LCBzbyB0aGlzIGF2b2lkcyBlcnJvcnMgd2hpbGUgaXQgY29tZXMgaW4uDQogICAgICAgICAgICByZXR1cm4gdGhpcy5yaXNrUHJvZmlsZUdyb3Vwc1tpXTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcmV0dXJuIHt9DQogICAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuIHt9DQogICAgICB9DQogICAgfSwNCiAgICBuYW1lU2V0OiBmdW5jdGlvbiAoKXsNCiAgICAgIGxldCBBQU5hbWVMaXN0ID0gW107DQogICAgICBsZXQgY2hlY2tMaXN0ID0gW10NCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5SUEFBTmFtZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgbGV0IGZvdW5kID0gZmFsc2U7DQogICAgICAgIGxldCBhYU5hbWUgPSB0aGlzLlJQQUFOYW1lc1tpXTsNCiAgICAgICAgICBpZiAoY2hlY2tMaXN0LmluY2x1ZGVzKGFhTmFtZS5jdXN0b21fbmFtZSkpIHsNCiAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsNCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKCFmb3VuZCkgew0KICAgICAgICAgICAgbGV0IG5ld0FBID0ge307DQogICAgICAgICAgICBuZXdBQVthYU5hbWUuaWRdID0gYWFOYW1lLmN1c3RvbV9uYW1lOw0KICAgICAgICAgICAgQUFOYW1lTGlzdC5wdXNoKG5ld0FBKTsNCiAgICAgICAgICAgIGZvdW5kID0gZmFsc2U7DQogICAgICAgICAgICBjaGVja0xpc3QucHVzaChhYU5hbWUuY3VzdG9tX25hbWUpOw0KICAgICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHJldHVybiAoQUFOYW1lTGlzdCkNCiAgICB9LA0KICAgIHNlbGVjdGVkSXNBY3RpdmUoKSB7DQogICAgICBpZiAodGhpcy5zaG93blJQKSB7DQogICAgICAgIGlmICh0aGlzLnNob3duUlAgPT09IHRoaXMuYWN0aXZlVXNlci5hY3RpdmVfcnApIHsNCiAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgfQ0KICAgIH0sDQogIH0sDQogIHdhdGNoOiB7DQogICAgc2hvd25SUDogZnVuY3Rpb24gKCkgew0KICAgICAgdGhpcy5zZXRBY3RpdmVTd2l0Y2goKQ0KICAgICAgdGhpcy5nZXRSUEFBTmFtZURhdGEoKTsNCiAgICAgIHRoaXMuZ2V0Umlza1Byb2ZpbGVzKCk7DQogICAgICB0aGlzLmNoYW5nZUxpc3QgPSBbXTsNCiAgICB9LA0KICAgIGFjdGl2ZVN3aXRjaDogZnVuY3Rpb24gKCkgew0KICAgICAgdGhpcy5zZXRBY3RpdmVSUCgpDQogICAgfSwNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHNldEFjdGl2ZVN3aXRjaCgpIHsNCiAgICAgIHRoaXMuJHdpdGhvdXRXYXRjaGVycygoKSA9PiB7DQogICAgICAgIGlmICh0aGlzLnNlbGVjdGVkSXNBY3RpdmUpIHsNCiAgICAgICAgICB0aGlzLmFjdGl2ZVN3aXRjaCA9IHRydWU7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy5hY3RpdmVTd2l0Y2ggPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGdldEFjcm9ueW0obikgew0KICAgICAgLy8gcmV0dXJucyB0aGUgZmlyc3QgbGV0dGVycyBvZiBlYWNoIHdvcmQgaW4gbmFtZSBhcyBhbiBhYmJyZXZpYXRpb24NCiAgICAgIGlmIChuKSB7DQogICAgICAgIGxldCBtYXRjaGVzID0gbi5tYXRjaCgvXGIoXHcpL2cpOw0KICAgICAgICBsZXQgYWNyb255bSA9IG1hdGNoZXMuam9pbignJyk7DQogICAgICAgIHJldHVybiBhY3JvbnltDQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gbg0KICAgICAgfQ0KICAgIH0sDQogICAgY2hlY2tIaW50KHByb2ZpbGUpIHsNCiAgICAgIGlmICghdGhpcy5jaGVja0NvbXBsZXRlKHByb2ZpbGUpKSB7DQogICAgICAgIHJldHVybiAiQWxsb2NhdGlvbnMgZG8gbm90IGVxdWFsIDEwMCUiDQogICAgICB9DQogICAgfSwNCiAgICBjaGVja0NvbG9yKHByb2ZpbGUpew0KICAgICAgaWYgKCF0aGlzLmNoZWNrQ29tcGxldGUocHJvZmlsZSkpIHsNCiAgICAgICAgLy8gcmV0dXJuICJyZWQgbGlnaHRlbi00Ig0KICAgICAgICByZXR1cm4gKHsNCiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZmZlYmVlJywNCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICB9LA0KICAgIGNoZWNrQ29tcGxldGUocHJvZmlsZSkgew0KICAgICAgaWYgKHByb2ZpbGUuYWxsb2NhdGlvbnMpIHsNCiAgICAgICAgbGV0IHZhbHVlID0gcHJvZmlsZS5hbGxvY2F0aW9ucy5yZWR1Y2UoIGZ1bmN0aW9uIChhLGIpIHsNCiAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChhKSArIHBhcnNlRmxvYXQoYi5wZXJjZW50YWdlKTsNCiAgICAgICAgfSwgMCk7DQogICAgICAgIGlmICh2YWx1ZS50b0ZpeGVkKDQpID09PSAnMS4wMDAwJykgew0KICAgICAgICAgIHJldHVybiB0cnVlDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgfQ0KICAgIH0sDQogICAgdXBkYXRlR3JvdXBOYW1lKCl7DQogICAgICB0aGlzLmVkaXRHcm91cE5hbWUgPSAhdGhpcy5lZGl0R3JvdXBOYW1lOw0KICAgICAgaWYgKHRoaXMubmV3R3JvdXBOYW1lICE9ICcnKSB7DQogICAgICAgIGxldCBlbmRwb2ludCA9IGAvYXBpL3Jpc2twcm9maWxlZ3JvdXBzLyR7dGhpcy5zaG93blJQT2JqZWN0LmlkfS9gOw0KICAgICAgICBhcGlTZXJ2aWNlKGVuZHBvaW50LCAiUEFUQ0giLCB7DQogICAgICAgICAgbmFtZTogdGhpcy5uZXdHcm91cE5hbWUsDQogICAgICAgIH0pLnRoZW4oZGF0YSA9PiB7DQogICAgICAgICAgdGhpcy4kZW1pdCgndXBkYXRlLXJwZ3JvdXAnLCBkYXRhKTsNCiAgICAgICAgICB0aGlzLm5ld0dyb3VwTmFtZSA9ICIiOw0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgZGVsZXRlUlAoZGF0YSkgew0KICAgICAgLy8gUmVtb3ZlcyBpdGVtIGZyb20gdGhlIHJpc2twcm9maWxlcyBsaXN0DQogICAgICBjb25zdCByZW1vdmVJdGVtID0gdGhpcy5yaXNrUHJvZmlsZXMuZmluZEluZGV4KGkgPT4gaS5pZCA9PT0gZGF0YS5pZCk7DQogICAgICBpZiAocmVtb3ZlSXRlbSkgew0KICAgICAgICB0aGlzLiRkZWxldGUodGhpcy5yaXNrUHJvZmlsZXMsIHJlbW92ZUl0ZW0pOw0KICAgICAgfQ0KICAgICAgLy8gUmVtb3ZlcyBpdGVtIGZyb20gdGhlIGNoYW5nZWQgbGlzdCAoaWYgaXQncyBpbiBpdCkNCiAgICAgIGNvbnN0IHJlbW92ZUZyb21DaGFuZ2VkID0gdGhpcy5jaGFuZ2VMaXN0LmZpbmRJbmRleChpID0+IGkuaWQgPT09IGRhdGEuaWQpOw0KICAgICAgaWYgKHJlbW92ZUZyb21DaGFuZ2VkID49IDApIHsNCiAgICAgICAgdGhpcy4kZGVsZXRlKHRoaXMuY2hhbmdlTGlzdCwgcmVtb3ZlRnJvbUNoYW5nZWQpOw0KICAgICAgfQ0KICAgIH0sDQogICAgZGVsZXRlUlBHcm91cChkYXRhKSB7DQogICAgICB0aGlzLiRlbWl0KCdkZWxldGUtcnBncm91cCcsIGRhdGEpOw0KICAgICAgdGhpcy5yaXNrUHJvZmlsZXMgPSBbXTsNCiAgICB9LA0KICAgIHNldEFjdGl2ZVJQKCkgew0KICAgICAgbGV0IHNldEFjdGl2ZSA9IG51bGw7DQogICAgICBpZiAodGhpcy5hY3RpdmVTd2l0Y2gpIHsNCiAgICAgICAgc2V0QWN0aXZlID0gdGhpcy5zaG93blJQOw0KICAgICAgfQ0KICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KFNFVF9BQ1RJVkVfVVNFUl9QUk9QLCB7DQogICAgICAgICdwcm9wJzogJ2FjdGl2ZV9ycCcsDQogICAgICAgICd2YWx1ZSc6IHNldEFjdGl2ZQ0KICAgICAgfSkNCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKFVTRVJfVVBEQVRFKTsNCiAgICB9LA0KICAgIGFkZFJQR3JvdXAoZGF0YSl7DQogICAgICB0aGlzLiRlbWl0KCdhZGQtcnBncm91cCcpDQogICAgICB0aGlzLnNob3duUlAgPSBkYXRhLmlkOw0KICAgIH0sDQogICAgYWRkVG9DaGFuZ2VkKHByb2ZpbGUpIHsNCiAgICAgIGlmICghKHRoaXMuY2hhbmdlTGlzdC5pbmNsdWRlcyhwcm9maWxlKSkpIHsNCiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0LnB1c2gocHJvZmlsZSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBjb25zdCBpID0gdGhpcy5jaGFuZ2VMaXN0LmZpbmRJbmRleChpdGVtID0+IGl0ZW0uaWQgPT09IHByb2ZpbGUuaWQpOw0KICAgICAgICB0aGlzLmNoYW5nZUxpc3Quc3BsaWNlKGksIDEpOw0KICAgICAgICB0aGlzLmNoYW5nZUxpc3QucHVzaChwcm9maWxlKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIHNldEFBUGVyY2VudGFnZShldmVudCwgQUFOYW1lLCByaXNrUHJvZmlsZSkgew0KICAgICAgLy8gR2V0cyB0aGUga2V5IG9mIHRoZSBhYW5hbWUgaXRlbSAodGhlIGtleSBpcyB0aGUgaWQpDQogICAgICBjb25zdCBhYUlEID0gT2JqZWN0LmtleXMoQUFOYW1lKVswXTsNCiAgICAgIGxldCBmb3VuZCA9IGZhbHNlOw0KICAgICAgLy8gSXRlcmF0ZXMgdGhlIHJpc2sgcHJvZmlsZSBhbGxvY2F0aW9ucyBhbmQgYXR0ZW1wdHMgdG8gZmluZCBhbmQgaXRlbQ0KICAgICAgLy8gd2l0aCBhIG1hdGNoaW5nIG5hbWVfaWQNCiAgICAgIGZvciAobGV0IGFsbG9jYXRpb24gb2Ygcmlza1Byb2ZpbGUuYWxsb2NhdGlvbnMpew0KICAgICAgICBmb3VuZCA9IGZhbHNlOw0KICAgICAgICAgIC8vIElmIGl0IGlzIGZvdW5kLCBhc3NpZ24sIGJyZWFrIHRoZSBsb29wIGFuZCBjaGFuZ2UgZm91bmQgdmFyDQogICAgICAgICAgaWYgKGFsbG9jYXRpb24ubmFtZS5pZC50b1N0cmluZygpID09PSBhYUlEKSB7DQogICAgICAgICAgICBhbGxvY2F0aW9uLnBlcmNlbnRhZ2UgPSAoZXZlbnQvMTAwKS50b0ZpeGVkKDQpOw0KICAgICAgICAgICAgZm91bmQgPSB0cnVlOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgLy8gSWYgbm90IGZvdW5kLCBjcmVhdGUgYSBuZXcgYWxsb2NhdGlvbiBvYmplY3QgYW5kIGFkZCB0byB0aGUgUlAuDQogICAgICBpZiAoIWZvdW5kKSB7DQogICAgICAgIGxldCBuZXdBbGxvY2F0aW9uID0ge30NCiAgICAgICAgbmV3QWxsb2NhdGlvbi5uYW1lID0ge30NCiAgICAgICAgbmV3QWxsb2NhdGlvbi5uYW1lLmlkID0gYWFJRDsNCiAgICAgICAgbmV3QWxsb2NhdGlvbi5wZXJjZW50YWdlID0gKGV2ZW50LzEwMCkudG9GaXhlZCg0KTsNCiAgICAgICAgbmV3QWxsb2NhdGlvbi5yaXNrcHJvZmlsZSA9IHJpc2tQcm9maWxlLmlkOw0KICAgICAgICBuZXdBbGxvY2F0aW9uLmlkID0gbnVsbDsNCiAgICAgICAgcmlza1Byb2ZpbGUuYWxsb2NhdGlvbnMucHVzaChuZXdBbGxvY2F0aW9uKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGdldEFBUGVyY2VudGFnZShBQU5hbWUsIHJpc2tQcm9maWxlKSB7DQogICAgICBsZXQgdG90YWwgPSAwDQogICAgICBmb3IgKGxldCBpPTA7IGkgPCByaXNrUHJvZmlsZS5hbGxvY2F0aW9ucy5sZW5ndGg7IGkrKykgew0KICAgICAgICAvLyBUZXN0IGlmIHRoZSBjdXN0b21fbmFtZSBmb3IgdGhlIHJpc2sgcHJvZmlsZSBtYXRjaGVzIHRoZSBjb2x1bW0gaGVhZGVyDQogICAgICAgIGlmIChyaXNrUHJvZmlsZS5hbGxvY2F0aW9uc1tpXS5uYW1lLmN1c3RvbV9uYW1lID09PSBPYmplY3QudmFsdWVzKEFBTmFtZSlbMF0pIHsNCiAgICAgICAgICBsZXQgcGVyY2VudGFnZSA9IE51bWJlcihyaXNrUHJvZmlsZS5hbGxvY2F0aW9uc1tpXS5wZXJjZW50YWdlKQ0KICAgICAgICAgIGlmIChwZXJjZW50YWdlID4gMCkgew0KICAgICAgICAgICAgLy8gQWRkIHBlcmNlbnRhZ2VzIHRvZ2V0aGVyIGZvciBtZXJnZWQgUlAgQUEgbmFtZXMNCiAgICAgICAgICAgIHRvdGFsICs9IHBlcmNlbnRhZ2U7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgICByZXR1cm4gKHRvdGFsKjEwMCkudG9GaXhlZCgyKQ0KICAgIH0sDQogICAgZ2V0Umlza1Byb2ZpbGVzKCkgew0KICAgICAgaWYgKHRoaXMuc2hvd25SUCkgew0KICAgICAgICBsZXQgZW5kcG9pbnQgPSBgL2FwaS9yaXNrcHJvZmlsZWdyb3Vwcy8ke3RoaXMuc2hvd25SUH0vcmlza3Byb2ZpbGVzL2A7DQogICAgICAgIGFwaVNlcnZpY2UoZW5kcG9pbnQpLnRoZW4oZGF0YSA9PiB7DQogICAgICAgICAgdGhpcy5yaXNrUHJvZmlsZXMgPSBkYXRhLnJlc3VsdHM7DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sDQogICAgZ2V0UlBBQU5hbWVEYXRhKCkgew0KICAgICAgaWYgKHRoaXMuc2hvd25SUCkgew0KICAgICAgICBsZXQgZW5kcG9pbnQgPSBgL2FwaS9yaXNrcHJvZmlsZWdyb3Vwcy8ke3RoaXMuc2hvd25SUH0vcmlza3Byb2ZpbGVuYW1lcy9gOw0KICAgICAgICBhcGlTZXJ2aWNlKGVuZHBvaW50KS50aGVuKGRhdGEgPT4gew0KICAgICAgICAgIHRoaXMuUlBBQU5hbWVzID0gZGF0YS5yZXN1bHRzOw0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGFkZFJQKCkgew0KICAgICAgLy8gdmFsaWRhdGVzIHRoZSBsYXN0IHJvdyAodGhlIGFkZCByb3cpDQogICAgICBpZiAodGhpcy4kcmVmcy5hZGRGb3JtLnZhbGlkYXRlKCkpew0KICAgICAgICBsZXQgZW5kcG9pbnQgPSBgL2FwaS9yaXNrcHJvZmlsZWdyb3Vwcy8ke3RoaXMuc2hvd25SUH0vcmlza3Byb2ZpbGVzL2A7DQogICAgICAgIGFwaVNlcnZpY2UoZW5kcG9pbnQsICJQT1NUIiwgew0KICAgICAgICAgIG5hbWU6IHRoaXMubmV3UlAubmFtZSwNCiAgICAgICAgICBncm91cDogdGhpcy5zaG93blJQLA0KICAgICAgICAgIG9yZGVyOiB0aGlzLm5ld1JQLm9yZGVyLA0KICAgICAgICB9KS50aGVuKGRhdGEgPT4gew0KICAgICAgICAgIHRoaXMuYWRkQUEoZGF0YS5pZCk7DQogICAgICAgIH0pOw0KDQogICAgICB9DQogICAgfSwNCiAgICBhZGRBQShpZCkgew0KICAgICAgaWYgKHRoaXMuXy5pc0VtcHR5KHRoaXMubmV3UlAuYWxsb2NhdGlvbnMpKSB7DQogICAgICAgIHRoaXMuZ2V0Umlza1Byb2ZpbGVzKCk7DQogICAgICAgIHRoaXMubmV3UlAubmFtZT0iIjsNCiAgICAgICAgdGhpcy5uZXdSUC5vcmRlcj1udWxsOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5uZXdSUC5hbGxvY2F0aW9ucykpIHsNCiAgICAgICAgICBsZXQgZW5kcG9pbnQgPSBgL2FwaS9yaXNrcHJvZmlsZWdyb3Vwcy8ke3RoaXMuc2hvd25SUH0vcmlza3Byb2ZpbGVzLyR7aWR9L2FhL2A7DQogICAgICAgICAgYXBpU2VydmljZShlbmRwb2ludCwgIlBPU1QiLCB7DQogICAgICAgICAgICBuYW1lX2lkOiBrZXksDQogICAgICAgICAgICBwZXJjZW50YWdlOiB2YWx1ZS8xMDAsDQogICAgICAgICAgICByaXNrcHJvZmlsZTogaWQNCiAgICAgICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAgICAgICAgIHRoaXMuZ2V0Umlza1Byb2ZpbGVzKCk7DQogICAgICAgICAgICB0aGlzLm5ld1JQLm5hbWU9IiI7DQogICAgICAgICAgICB0aGlzLm5ld1JQLm9yZGVyPW51bGw7DQogICAgICAgICAgICB0aGlzLm5ld1JQLmFsbG9jYXRpb25zID0ge307DQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIG9uU3VibWl0KCkgew0KICAgICAgLy8gSWYgdGhlcmUgaXMgYSBuZXcgaXRlbSBpbiB0aGUgYWRkIHJvdywgYWRkIGl0IHRvby4NCiAgICAgIGlmICghdGhpcy5fLmlzRW1wdHkodGhpcy5uZXdSUC5uYW1lKSkgew0KICAgICAgICB0aGlzLmFkZFJQKCk7DQogICAgICB9DQogICAgICBpZiAodGhpcy4kcmVmcy5tYWluRm9ybS52YWxpZGF0ZSgpKXsNCiAgICAgICAgaWYgKHRoaXMuY2hhbmdlTGlzdCkgew0KICAgICAgICAgIGZvciAobGV0IGk9MDsgaSA8IHRoaXMuY2hhbmdlTGlzdC5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgbGV0IGVuZHBvaW50ID0gYC9hcGkvcmlza3Byb2ZpbGVncm91cHMvJHt0aGlzLnNob3duUlB9L3Jpc2twcm9maWxlcy8ke3RoaXMuY2hhbmdlTGlzdFtpXS5pZH0vYDsNCiAgICAgICAgICAgIGFwaVNlcnZpY2UoZW5kcG9pbnQsICJQQVRDSCIsIHsNCiAgICAgICAgICAgICAgbmFtZTogdGhpcy5jaGFuZ2VMaXN0W2ldLm5hbWUsDQogICAgICAgICAgICAgIGdyb3VwOiB0aGlzLmNoYW5nZUxpc3RbaV0uZ3JvdXAsDQogICAgICAgICAgICAgIG9yZGVyOiB0aGlzLmNoYW5nZUxpc3RbaV0ub3JkZXIsDQogICAgICAgICAgICB9KS50aGVuKGRhdGEgPT4gew0KICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUFBKGRhdGEuaWQsIHRoaXMuY2hhbmdlTGlzdFtpXSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9Ow0KICAgICAgICB9Ow0KICAgICAgfQ0KICAgIH0sDQogICAgdXBkYXRlQUEocHJvZmlsZUlELCBwcm9maWxlKSB7DQogICAgICBmb3IgKGxldCBpPTA7IGkgPCBwcm9maWxlLmFsbG9jYXRpb25zLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGxldCBlbmRwb2ludCA9ICcnOw0KICAgICAgICBsZXQgbWV0aG9kID0gJyc7DQogICAgICAgIGlmIChwcm9maWxlLmFsbG9jYXRpb25zW2ldLmlkID09PSBudWxsKSB7DQogICAgICAgICAgZW5kcG9pbnQgPSBgL2FwaS9yaXNrcHJvZmlsZWdyb3Vwcy8ke3RoaXMuc2hvd25SUH0vcmlza3Byb2ZpbGVzLyR7cHJvZmlsZUlEfS9hYS9gOw0KICAgICAgICAgIG1ldGhvZCA9ICJQT1NUIg0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGVuZHBvaW50ID0gYC9hcGkvcmlza3Byb2ZpbGVncm91cHMvJHt0aGlzLnNob3duUlB9L3Jpc2twcm9maWxlcy8ke3Byb2ZpbGVJRH0vYWEvJHtwcm9maWxlLmFsbG9jYXRpb25zW2ldLmlkfS9gOw0KICAgICAgICAgIG1ldGhvZCA9ICJQQVRDSCINCiAgICAgICAgfTsNCiAgICAgICAgYXBpU2VydmljZShlbmRwb2ludCwgbWV0aG9kLCB7DQogICAgICAgICAgaWQ6IHByb2ZpbGUuYWxsb2NhdGlvbnNbaV0uaWQsDQogICAgICAgICAgbmFtZV9pZDogcHJvZmlsZS5hbGxvY2F0aW9uc1tpXS5uYW1lLmlkLA0KICAgICAgICAgIHBlcmNlbnRhZ2U6IHByb2ZpbGUuYWxsb2NhdGlvbnNbaV0ucGVyY2VudGFnZSwNCiAgICAgICAgICByaXNrcHJvZmlsZTogcHJvZmlsZUlEDQogICAgICAgIH0pLnRoZW4oKCkgPT4gew0KICAgICAgICAgIHRoaXMuZ2V0Umlza1Byb2ZpbGVzKCk7DQogICAgICAgICAgdGhpcy5jaGFuZ2VMaXN0PVtdOw0KICAgICAgICB9KTsNCiAgICAgIH07DQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMuc2hvd25SUCA9IHRoaXMuYWN0aXZlVXNlci5hY3RpdmVfcnA7DQogICAgdGhpcy5nZXRSUEFBTmFtZURhdGEoKTsNCiAgICB0aGlzLmdldFJpc2tQcm9maWxlcygpOw0KICB9DQp9Ow0K"},{"version":3,"sources":["RiskProfileTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgNA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RiskProfileTable.vue","sourceRoot":"src/components","sourcesContent":["<template lang=\"html\">\r\n  <v-container>\r\n      <v-row align=\"center\">\r\n        <v-col\r\n        :cols=\"6\">\r\n          <v-select\r\n            v-if=\"!editGroupName\"\r\n            :items=\"riskProfileGroups\"\r\n            item-text=\"name\"\r\n            item-value=\"id\"\r\n            v-model=\"shownRP\"\r\n            label=\"Risk Profile Group Name\"\r\n            placeholder=\"Select a Risk Profile Group\"\r\n            outlined dense hide-details=\"auto\">\r\n            <template v-slot:append-outer v-if=\"canEdit && !_.isEmpty(shownRPObject)\">\r\n              <v-icon\r\n                v-if=\"!editGroupName\"\r\n                color=\"green\" icon\r\n                @click=\"editGroupName = !editGroupName\">mdi-pencil-circle</v-icon>\r\n            </template>\r\n            <template v-slot:append-outer v-else-if=\"!_.isEmpty(shownRPObject)\">\r\n              <v-tooltip bottom>\r\n                 <template v-slot:activator=\"{ on }\">\r\n                    <v-icon\r\n                      v-on='on'\r\n                      color=\"teal\" icon\r\n                      >mdi-lock</v-icon>\r\n                </template>\r\n                <span>{{lockMessage}}</span>\r\n              </v-tooltip>\r\n            </template>\r\n          </v-select>\r\n          <v-text-field\r\n            v-else\r\n            label=\"Risk Profile Group Name\"\r\n            :value=\"shownRPObject.name\"\r\n            @change=\"newGroupName = $event\"\r\n            dense outlined\r\n            hide-details=\"auto\">\r\n            <template v-slot:append-outer v-if=\"canEdit\">\r\n              <v-icon\r\n                v-if=\"editGroupName\"\r\n                color=\"green\" icon\r\n                @click=\"updateGroupName()\">mdi-check-circle</v-icon>\r\n            </template>\r\n          </v-text-field>\r\n        </v-col>\r\n        <v-col\r\n          :cols=\"4\">\r\n          <v-switch\r\n            v-if=\"!_.isEmpty(shownRPObject)\"\r\n            v-model=\"activeSwitch\"\r\n            label=\"Active Risk Profile Group\"\r\n            />\r\n        </v-col>\r\n        <v-col\r\n          :cols=\"1\">\r\n          <AddRPGroup\r\n            :userID=\"activeUser.id\"\r\n            @add-rpgroup=\"addRPGroup($event)\"/>\r\n        </v-col>\r\n        <v-col\r\n        :cols=\"1\">\r\n          <DeleteObj\r\n            v-if=\"canEdit && !_.isEmpty(shownRPObject)\"\r\n            :objectType=\"'riskprofilegroup'\"\r\n            :objectToDelete=\"shownRPObject\"\r\n            @delete-object=\"deleteRPGroup($event)\"\r\n          />\r\n        </v-col>\r\n      </v-row>\r\n      <v-divider class=\"mt-1 mb-4\" v-if=\"!_.isEmpty(shownRPObject)\"/>\r\n      <v-row dense v-if=\"!_.isEmpty(shownRPObject)\">\r\n        <v-col\r\n          :cols=\"2\">\r\n\r\n        </v-col>\r\n        <v-col\r\n          v-for=\"AAName in nameSet\"\r\n          :key=\"Object.keys(AAName)[0]\"\r\n          >\r\n          <v-tooltip top>\r\n             <template v-slot:activator=\"{ on }\">\r\n              <v-card\r\n              outlined\r\n                class=\"header-card\"\r\n                dense\r\n                v-on=\"on\">\r\n                <v-card-subtitle class=\"text-center\">\r\n                  {{ getAcronym(Object.values(AAName)[0]) }}\r\n                </v-card-subtitle>\r\n              </v-card>\r\n            </template>\r\n            <span>{{ Object.values(AAName)[0] }}</span>\r\n          </v-tooltip>\r\n        </v-col>\r\n        <v-col\r\n          :cols=\"1\"\r\n          align-self=\"center\">\r\n          <AANameConfig\r\n            v-if=\"canEdit\"\r\n            :RPAANames=\"RPAANames\"/>\r\n        </v-col>\r\n      </v-row>\r\n      <v-form\r\n        @submit.prevent=\"onSubmit\"\r\n        ref=\"mainForm\">\r\n        <v-row\r\n          v-for=\"profile in riskProfiles\"\r\n          :key=\"profile.id\"\r\n          dense\r\n          :style='checkColor(profile)'\r\n          >\r\n          <v-col\r\n            :cols=\"2\">\r\n            <v-text-field\r\n              @change=\"addToChanged(profile)\"\r\n              v-model=\"profile.name\"\r\n              dense outlined\r\n              :rules=\"[v => !!(v) || 'Must enter a name']\"\r\n              validate-on-blur\r\n              hide-details=\"auto\"\r\n              :read-only=\"!canEdit\">\r\n              <template\r\n                v-if=\"checkHint(profile)\"\r\n                v-slot:append>\r\n                <v-tooltip\r\n                  bottom\r\n                >\r\n                  <template v-slot:activator=\"{ on }\">\r\n                    <v-icon v-on=\"on\" color=\"red\">\r\n                      mdi-alert-rhombus-outline\r\n                    </v-icon>\r\n                  </template>\r\n                  {{ checkHint(profile)}}\r\n                </v-tooltip>\r\n              </template>\r\n            </v-text-field>\r\n          </v-col>\r\n          <v-col\r\n            v-for=\"AAName in nameSet\"\r\n            :key=\"Object.keys(AAName)[0]\">\r\n              <v-text-field\r\n                :disabled=\"!canEdit\"\r\n                @change=\"addToChanged(profile)\"\r\n                :value = \"getAAPercentage(AAName,profile)\"\r\n                @blur = \"setAAPercentage($event.target.value, AAName, profile)\"\r\n                class=\"allocationNumber\"\r\n                type=\"number\"\r\n                outlined dense hide-details/>\r\n          </v-col>\r\n          <v-col\r\n            :cols=\"1\"\r\n            ><v-btn icon>\r\n            <DeleteObj\r\n              v-if=\"canEdit\"\r\n              :objectType=\"'riskprofile'\"\r\n              :objectToDelete=\"profile\"\r\n              :shownRP=\"shownRP\"\r\n              @delete-object=\"deleteRP\"\r\n              v-on=\"$listeners\"\r\n            /> </v-btn>\r\n          </v-col>\r\n        </v-row>\r\n      </v-form>\r\n      <v-form\r\n        @submit.prevent=\"onSubmit\"\r\n        ref=\"addForm\">\r\n        <v-row v-if=\"canEdit && !_.isEmpty(shownRPObject)\"\r\n          dense>\r\n          <v-col\r\n            :cols=\"2\">\r\n              <v-text-field\r\n                v-model=\"newRP.name\"\r\n                outlined dense\r\n                :rules=\"[v => !!(v) || 'Must enter a name']\"\r\n                validate-on-blur\r\n                hide-details=\"auto\"/>\r\n          </v-col>\r\n          <v-col\r\n            v-for=\"AAName in nameSet\"\r\n            :key=\"Object.keys(AAName)[0]\">\r\n              <v-text-field\r\n                type=\"number\"\r\n                v-model=\"newRP.allocations[Object.keys(AAName)[0]]\"\r\n                outlined dense hide-details/>\r\n          </v-col>\r\n          <v-col\r\n            :cols=\"1\">\r\n            <v-btn type=\"button\" color=\"teal\" dark dense\r\n              @click=\"addRP\" icon>\r\n              <v-icon>\r\n                mdi-plus\r\n              </v-icon>\r\n            </v-btn>\r\n          </v-col>\r\n        </v-row>\r\n      </v-form>\r\n      <v-divider class=\"mt-4\" v-if=\"!_.isEmpty(shownRPObject)\" />\r\n      <v-row v-if=\"riskProfiles.length && canEdit\">\r\n        <v-col class=\"text-right\">\r\n          <v-btn @click=\"onSubmit\" color=\"primary\" dark dense text>Update All</v-btn>\r\n        </v-col>\r\n      </v-row>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { apiService } from \"@/common/api.service.js\";\r\nimport AANameConfig from \"@/components/AANameConfig.vue\";\r\nimport DeleteObj from \"@/components/DeleteObj.vue\";\r\nimport AddRPGroup from \"@/components/AddRPGroup.vue\";\r\nimport WithoutWatchers from \"@/components/mixins/WithoutWatchers.js\";\r\n\r\nimport { mapGetters } from \"vuex\";\r\nimport {\r\n  USER_UPDATE\r\n} from \"@/store/actions.type\";\r\nimport {\r\n  SET_ACTIVE_USER_PROP\r\n} from \"@/store/mutations.type\";\r\n\r\nexport default {\r\n  name: \"RiskProfileTable\",\r\n  mixins: [WithoutWatchers],\r\n  props: {\r\n    riskProfileGroups: {\r\n      type: Array,\r\n      required: false,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      activeSwitch: false,\r\n      newGroupName: \"\",\r\n      editGroupName: false,\r\n      riskProfiles: [],\r\n      RPAANames: [],\r\n      error: null,\r\n      shownRP: null,\r\n      changeList: [],\r\n      newRP: {\r\n        name:\"\",\r\n        order:null,\r\n        allocations:{},\r\n      },\r\n    };\r\n  },\r\n  components: {\r\n    AANameConfig,\r\n    DeleteObj,\r\n    AddRPGroup,\r\n\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"activeUser\"]),\r\n    lockMessage() {\r\n      let msg = '';\r\n      if (!this.isNotAFSLLimited) {\r\n        msg += 'You cannot edit AFSL Risk Profiles'\r\n      }\r\n      else if (!this.isPracticeAdmin) {\r\n        msg += 'You are not an admin of this Practice'\r\n      }\r\n      return msg\r\n    },\r\n    canEdit() {\r\n      if (this.isPracticeAdmin && this.isNotAFSLLimited && this.isNotDefaultTemplate ) {\r\n        return true\r\n      } else {\r\n        return false\r\n      }\r\n    },\r\n    isPracticeAdmin() {\r\n      if (this.riskProfileGroups && this.shownRP && this.shownRPObject.id) {\r\n        if (this.shownRPObject.active_practices.length > 0) {\r\n          return this.shownRPObject.active_practices.some(item => this.activeUser.admin_practices.includes(item));\r\n        } else {\r\n          return true\r\n        }\r\n      } else {\r\n        return true\r\n      }\r\n    },\r\n    isNotDefaultTemplate() {\r\n      if (this.riskProfileGroups && this.shownRP) {\r\n        if (this.shownRPObject.template && this.shownRPObject.default) {\r\n          return false\r\n        } else {\r\n          return true\r\n        }\r\n      } else {\r\n        return true\r\n      }\r\n    },\r\n    isNotAFSLLimited() {\r\n      if (this.riskProfileGroups && this.shownRP) {\r\n        if (this._.isEmpty(this.shownRPObject.afsls)) {\r\n          return true\r\n        } else {\r\n          return false\r\n        }\r\n      } else {\r\n        return true\r\n      }\r\n    },\r\n    shownRPObject() {\r\n      if (this.riskProfileGroups && this.shownRP) {\r\n          const i = this.riskProfileGroups.findIndex(item => item.id == this.shownRP);\r\n          if (i != -1) {\r\n            //The id is added to the array before the group data comes back from\r\n            // Profile view, so this avoids errors while it comes in.\r\n            return this.riskProfileGroups[i];\r\n          } else {\r\n            return {}\r\n          }\r\n      } else {\r\n        return {}\r\n      }\r\n    },\r\n    nameSet: function (){\r\n      let AANameList = [];\r\n      let checkList = []\r\n      for (let i = 0; i < this.RPAANames.length; i++) {\r\n        let found = false;\r\n        let aaName = this.RPAANames[i];\r\n          if (checkList.includes(aaName.custom_name)) {\r\n            found = true;\r\n          }\r\n          if (!found) {\r\n            let newAA = {};\r\n            newAA[aaName.id] = aaName.custom_name;\r\n            AANameList.push(newAA);\r\n            found = false;\r\n            checkList.push(aaName.custom_name);\r\n          }\r\n      }\r\n      return (AANameList)\r\n    },\r\n    selectedIsActive() {\r\n      if (this.shownRP) {\r\n        if (this.shownRP === this.activeUser.active_rp) {\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      } else {\r\n        return false\r\n      }\r\n    },\r\n  },\r\n  watch: {\r\n    shownRP: function () {\r\n      this.setActiveSwitch()\r\n      this.getRPAANameData();\r\n      this.getRiskProfiles();\r\n      this.changeList = [];\r\n    },\r\n    activeSwitch: function () {\r\n      this.setActiveRP()\r\n    },\r\n  },\r\n  methods: {\r\n    setActiveSwitch() {\r\n      this.$withoutWatchers(() => {\r\n        if (this.selectedIsActive) {\r\n          this.activeSwitch = true;\r\n        } else {\r\n          this.activeSwitch = false;\r\n        }\r\n      })\r\n    },\r\n    getAcronym(n) {\r\n      // returns the first letters of each word in name as an abbreviation\r\n      if (n) {\r\n        let matches = n.match(/\\b(\\w)/g);\r\n        let acronym = matches.join('');\r\n        return acronym\r\n      } else {\r\n        return n\r\n      }\r\n    },\r\n    checkHint(profile) {\r\n      if (!this.checkComplete(profile)) {\r\n        return \"Allocations do not equal 100%\"\r\n      }\r\n    },\r\n    checkColor(profile){\r\n      if (!this.checkComplete(profile)) {\r\n        // return \"red lighten-4\"\r\n        return ({\r\n          backgroundColor: '#ffebee',\r\n        })\r\n      }\r\n    },\r\n    checkComplete(profile) {\r\n      if (profile.allocations) {\r\n        let value = profile.allocations.reduce( function (a,b) {\r\n          return parseFloat(a) + parseFloat(b.percentage);\r\n        }, 0);\r\n        if (value.toFixed(4) === '1.0000') {\r\n          return true\r\n        } else {\r\n          return false\r\n        }\r\n      } else {\r\n        return false\r\n      }\r\n    },\r\n    updateGroupName(){\r\n      this.editGroupName = !this.editGroupName;\r\n      if (this.newGroupName != '') {\r\n        let endpoint = `/api/riskprofilegroups/${this.shownRPObject.id}/`;\r\n        apiService(endpoint, \"PATCH\", {\r\n          name: this.newGroupName,\r\n        }).then(data => {\r\n          this.$emit('update-rpgroup', data);\r\n          this.newGroupName = \"\";\r\n        })\r\n      }\r\n    },\r\n    deleteRP(data) {\r\n      // Removes item from the riskprofiles list\r\n      const removeItem = this.riskProfiles.findIndex(i => i.id === data.id);\r\n      if (removeItem) {\r\n        this.$delete(this.riskProfiles, removeItem);\r\n      }\r\n      // Removes item from the changed list (if it's in it)\r\n      const removeFromChanged = this.changeList.findIndex(i => i.id === data.id);\r\n      if (removeFromChanged >= 0) {\r\n        this.$delete(this.changeList, removeFromChanged);\r\n      }\r\n    },\r\n    deleteRPGroup(data) {\r\n      this.$emit('delete-rpgroup', data);\r\n      this.riskProfiles = [];\r\n    },\r\n    setActiveRP() {\r\n      let setActive = null;\r\n      if (this.activeSwitch) {\r\n        setActive = this.shownRP;\r\n      }\r\n      this.$store.commit(SET_ACTIVE_USER_PROP, {\r\n        'prop': 'active_rp',\r\n        'value': setActive\r\n      })\r\n      this.$store.dispatch(USER_UPDATE);\r\n    },\r\n    addRPGroup(data){\r\n      this.$emit('add-rpgroup')\r\n      this.shownRP = data.id;\r\n    },\r\n    addToChanged(profile) {\r\n      if (!(this.changeList.includes(profile))) {\r\n        this.changeList.push(profile);\r\n      } else {\r\n        const i = this.changeList.findIndex(item => item.id === profile.id);\r\n        this.changeList.splice(i, 1);\r\n        this.changeList.push(profile);\r\n      }\r\n    },\r\n    setAAPercentage(event, AAName, riskProfile) {\r\n      // Gets the key of the aaname item (the key is the id)\r\n      const aaID = Object.keys(AAName)[0];\r\n      let found = false;\r\n      // Iterates the risk profile allocations and attempts to find and item\r\n      // with a matching name_id\r\n      for (let allocation of riskProfile.allocations){\r\n        found = false;\r\n          // If it is found, assign, break the loop and change found var\r\n          if (allocation.name.id.toString() === aaID) {\r\n            allocation.percentage = (event/100).toFixed(4);\r\n            found = true;\r\n            break;\r\n          }\r\n      }\r\n      // If not found, create a new allocation object and add to the RP.\r\n      if (!found) {\r\n        let newAllocation = {}\r\n        newAllocation.name = {}\r\n        newAllocation.name.id = aaID;\r\n        newAllocation.percentage = (event/100).toFixed(4);\r\n        newAllocation.riskprofile = riskProfile.id;\r\n        newAllocation.id = null;\r\n        riskProfile.allocations.push(newAllocation);\r\n      }\r\n    },\r\n    getAAPercentage(AAName, riskProfile) {\r\n      let total = 0\r\n      for (let i=0; i < riskProfile.allocations.length; i++) {\r\n        // Test if the custom_name for the risk profile matches the columm header\r\n        if (riskProfile.allocations[i].name.custom_name === Object.values(AAName)[0]) {\r\n          let percentage = Number(riskProfile.allocations[i].percentage)\r\n          if (percentage > 0) {\r\n            // Add percentages together for merged RP AA names\r\n            total += percentage;\r\n          }\r\n        }\r\n      }\r\n      return (total*100).toFixed(2)\r\n    },\r\n    getRiskProfiles() {\r\n      if (this.shownRP) {\r\n        let endpoint = `/api/riskprofilegroups/${this.shownRP}/riskprofiles/`;\r\n        apiService(endpoint).then(data => {\r\n          this.riskProfiles = data.results;\r\n        });\r\n      }\r\n    },\r\n    getRPAANameData() {\r\n      if (this.shownRP) {\r\n        let endpoint = `/api/riskprofilegroups/${this.shownRP}/riskprofilenames/`;\r\n        apiService(endpoint).then(data => {\r\n          this.RPAANames = data.results;\r\n        });\r\n      }\r\n    },\r\n    addRP() {\r\n      // validates the last row (the add row)\r\n      if (this.$refs.addForm.validate()){\r\n        let endpoint = `/api/riskprofilegroups/${this.shownRP}/riskprofiles/`;\r\n        apiService(endpoint, \"POST\", {\r\n          name: this.newRP.name,\r\n          group: this.shownRP,\r\n          order: this.newRP.order,\r\n        }).then(data => {\r\n          this.addAA(data.id);\r\n        });\r\n\r\n      }\r\n    },\r\n    addAA(id) {\r\n      if (this._.isEmpty(this.newRP.allocations)) {\r\n        this.getRiskProfiles();\r\n        this.newRP.name=\"\";\r\n        this.newRP.order=null;\r\n      } else {\r\n        for (const [key, value] of Object.entries(this.newRP.allocations)) {\r\n          let endpoint = `/api/riskprofilegroups/${this.shownRP}/riskprofiles/${id}/aa/`;\r\n          apiService(endpoint, \"POST\", {\r\n            name_id: key,\r\n            percentage: value/100,\r\n            riskprofile: id\r\n          }).then(() => {\r\n            this.getRiskProfiles();\r\n            this.newRP.name=\"\";\r\n            this.newRP.order=null;\r\n            this.newRP.allocations = {};\r\n          });\r\n        }\r\n      }\r\n    },\r\n    onSubmit() {\r\n      // If there is a new item in the add row, add it too.\r\n      if (!this._.isEmpty(this.newRP.name)) {\r\n        this.addRP();\r\n      }\r\n      if (this.$refs.mainForm.validate()){\r\n        if (this.changeList) {\r\n          for (let i=0; i < this.changeList.length; i++) {\r\n            let endpoint = `/api/riskprofilegroups/${this.shownRP}/riskprofiles/${this.changeList[i].id}/`;\r\n            apiService(endpoint, \"PATCH\", {\r\n              name: this.changeList[i].name,\r\n              group: this.changeList[i].group,\r\n              order: this.changeList[i].order,\r\n            }).then(data => {\r\n              this.updateAA(data.id, this.changeList[i]);\r\n            });\r\n          };\r\n        };\r\n      }\r\n    },\r\n    updateAA(profileID, profile) {\r\n      for (let i=0; i < profile.allocations.length; i++) {\r\n        let endpoint = '';\r\n        let method = '';\r\n        if (profile.allocations[i].id === null) {\r\n          endpoint = `/api/riskprofilegroups/${this.shownRP}/riskprofiles/${profileID}/aa/`;\r\n          method = \"POST\"\r\n        } else {\r\n          endpoint = `/api/riskprofilegroups/${this.shownRP}/riskprofiles/${profileID}/aa/${profile.allocations[i].id}/`;\r\n          method = \"PATCH\"\r\n        };\r\n        apiService(endpoint, method, {\r\n          id: profile.allocations[i].id,\r\n          name_id: profile.allocations[i].name.id,\r\n          percentage: profile.allocations[i].percentage,\r\n          riskprofile: profileID\r\n        }).then(() => {\r\n          this.getRiskProfiles();\r\n          this.changeList=[];\r\n        });\r\n      };\r\n    }\r\n  },\r\n  mounted() {\r\n    this.shownRP = this.activeUser.active_rp;\r\n    this.getRPAANameData();\r\n    this.getRiskProfiles();\r\n  }\r\n};\r\n</script>\r\n<style media=\"screen\" >\r\n.header-card {\r\n  border: 1px solid  !important\r\n}\r\n.allocationNumber input[type='number'] {\r\n  -moz-appearance:textfield;\r\n}\r\n.allocationNumber input::-webkit-outer-spin-button,\r\n.allocationNumber input::-webkit-inner-spin-button {\r\n  -webkit-appearance: none;\r\n}\r\n.allocationNumber input {\r\n  font-size: .8em;\r\n}\r\n</style>\r\n"]}]}