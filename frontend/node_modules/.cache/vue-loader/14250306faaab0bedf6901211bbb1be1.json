{"remainingRequest":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\components\\PortfolioTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\components\\PortfolioTable.vue","mtime":1590641770976},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBhcGlTZXJ2aWNlIH0gZnJvbSAiQC9jb21tb24vYXBpLnNlcnZpY2UuanMiOw0KaW1wb3J0IEFkZFBvcnRmb2xpb05hbWUgZnJvbSAiQC9jb21wb25lbnRzL0FkZFBvcnRmb2xpb05hbWUudnVlIjsNCmltcG9ydCBEZWxldGVPYmogZnJvbSAiQC9jb21wb25lbnRzL0RlbGV0ZU9iai52dWUiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJQb3J0Zm9saW9UYWJsZSIsDQogIHByb3BzOiB7DQogICAgcG9ydGZvbGlvOiB7DQogICAgICB0eXBlOiBPYmplY3QsDQogICAgICByZXF1aXJlZDogZmFsc2UsDQogICAgfSwNCiAgICB1c2VyOiB7DQogICAgICB0eXBlOiBPYmplY3QsDQogICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICB9DQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHNlbGVjdGVkUG9ydGZvbGlvOiB7fSwNCiAgICAgIGludmVzdG1lbnRzOiBbXSwNCiAgICAgIGFjdGl2ZTogZmFsc2UsDQogICAgICBlcnJvcjogbnVsbCwNCiAgICAgIHBvcnRmb2xpb3M6IFtdLA0KICAgICAgY2hhbmdlTGlzdDogW10sDQogICAgICBpbnZlc3RtZW50TGlzdDogW10sDQogICAgICBuZXdJbnZlc3RtZW50OiB7fSwNCiAgICAgIGVkaXRQb3J0Zm9saW9OYW1lOiBmYWxzZSwNCiAgICAgIG5ld1BvcnRmb2xpb05hbWU6ICcnLA0KICAgIH07DQogIH0sDQogIGNvbXBvbmVudHM6IHsNCiAgICBEZWxldGVPYmosDQogICAgQWRkUG9ydGZvbGlvTmFtZSwNCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICBwb3J0Zm9saW86IGZ1bmN0aW9uICgpIHsNCiAgICAgIHRoaXMuZ2V0SW52ZXN0bWVudExpc3QoKTsNCiAgICAgIHRoaXMuZ2V0SW52ZXN0bWVudHMoKTsNCiAgICB9LA0KICAgIHNlbGVjdGVkUG9ydGZvbGlvOiBmdW5jdGlvbiAoKSB7DQogICAgICB0aGlzLmdldEludmVzdG1lbnRMaXN0KCk7DQogICAgICB0aGlzLmdldEludmVzdG1lbnRzKCk7DQogICAgfSwNCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBwb3J0Zm9saW9JRDogZnVuY3Rpb24oKSB7DQogICAgICBpZiAodGhpcy5zZWxlY3RlZFBvcnRmb2xpbyAhPSBudWxsKSB7DQogICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkUG9ydGZvbGlvLmlkOw0KICAgICAgfSBlbHNlIGlmICh0aGlzLnBvcnRmb2xpbyl7DQogICAgICAgIHJldHVybiB0aGlzLnBvcnRmb2xpby5pZDsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiBudWxsDQogICAgICB9DQogICAgfSwNCiAgICBjYW5FZGl0KCkgew0KICAgICAgaWYgKHRoaXMuaXNQcmFjdGljZUFkbWluICYmIHRoaXMuaXNOb3RQdWJsaWMgKSB7DQogICAgICAgIHJldHVybiB0cnVlDQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgIH0NCiAgICB9LA0KICAgIGlzUHJhY3RpY2VBZG1pbigpIHsNCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkUG9ydGZvbGlvLmlkKSB7DQogICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUG9ydGZvbGlvLnByYWN0aWNlcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWRQb3J0Zm9saW8ucHJhY3RpY2VzLnNvbWUoaXRlbSA9PiB0aGlzLnVzZXIuYWRtaW5fcHJhY3RpY2VzLmluY2x1ZGVzKGl0ZW0pKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICByZXR1cm4gdHJ1ZQ0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gdHJ1ZQ0KICAgICAgfQ0KICAgIH0sDQogICAgaXNOb3RQdWJsaWMoKSB7DQogICAgICBpZiAodGhpcy5zZWxlY3RlZFBvcnRmb2xpby5pZCkgew0KICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFBvcnRmb2xpby5hbGxvd2VkX3VzZXJzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgfQ0KICAgIH0sDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBjaGVja0hpbnQoKSB7DQogICAgICBpZiAoIXRoaXMuY2hlY2tDb21wbGV0ZSgpKSB7DQogICAgICAgIHJldHVybiAiQWxsb2NhdGlvbnMgZG8gbm90IGVxdWFsIDEwMCUiDQogICAgICB9DQogICAgfSwNCiAgICBjaGVja0NvbG9yKCl7DQogICAgICBpZiAoIXRoaXMuY2hlY2tDb21wbGV0ZSgpKSB7DQogICAgICAgIHJldHVybiAicmVkIGxpZ2h0ZW4tNCINCiAgICAgIH0NCiAgICB9LA0KICAgIGNoZWNrQ29tcGxldGUoKSB7DQogICAgICBsZXQgdmFsdWUgPSB0aGlzLmludmVzdG1lbnRzLnJlZHVjZSggZnVuY3Rpb24gKGEsYikgew0KICAgICAgICByZXR1cm4gYSArIE51bWJlcihiLnBlcmNlbnRhZ2UpOw0KICAgICAgfSwgMCk7DQogICAgICBpZiAodmFsdWUgPT0gMSkgew0KICAgICAgICByZXR1cm4gdHJ1ZQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICB9DQogICAgfSwNCiAgICB1cGRhdGVQb3J0Zm9saW9OYW1lKCkgew0KICAgICAgdGhpcy5lZGl0UG9ydGZvbGlvTmFtZSA9ICF0aGlzLmVkaXRQb3J0Zm9saW9OYW1lOw0KICAgICAgaWYgKHRoaXMubmV3UG9ydGZvbGlvTmFtZSAhPSAnJykgew0KICAgICAgICBsZXQgZW5kcG9pbnQgPSBgL2FwaS9wb3J0Zm9saW90ZW1wbGF0ZXMvJHt0aGlzLnNlbGVjdGVkUG9ydGZvbGlvLmlkfS9gOw0KICAgICAgICBhcGlTZXJ2aWNlKGVuZHBvaW50LCAiUEFUQ0giLCB7DQogICAgICAgICAgbmFtZTogdGhpcy5uZXdQb3J0Zm9saW9OYW1lLA0KICAgICAgICB9KS50aGVuKGRhdGEgPT4gew0KICAgICAgICAgIHRoaXMuc2VsZWN0ZWRQb3J0Zm9saW8gPSBkYXRhOw0KICAgICAgICAgIHRoaXMubmV3UG9ydGZvbGlvTmFtZSA9ICIiOw0KICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLnBvcnRmb2xpb3MuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5pZCA9PT0gZGF0YS5pZCk7DQogICAgICAgICAgdGhpcy5wb3J0Zm9saW9zLnNwbGljZShpLDAsZGF0YSk7DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sDQogICAgYWRkUG9ydGZvbGlvKGRhdGEpew0KICAgICAgdGhpcy5zZWxlY3RlZFBvcnRmb2xpbyA9IGRhdGE7DQogICAgICB0aGlzLmdldFBvcnRmb2xpb3MoKTsNCiAgICB9LA0KICAgIGRlbGV0ZVBvcnRmb2xpbyhkYXRhKSB7DQogICAgICBjb25zdCBpID0gdGhpcy5wb3J0Zm9saW9zLmZpbmRJbmRleChpdGVtID0+IGl0ZW0uaWQgPT09IGRhdGEuaWQpOw0KICAgICAgdGhpcy4kZGVsZXRlKHRoaXMucG9ydGZvbGlvcyxpKQ0KICAgICAgdGhpcy5pbnZlc3RtZW50cyA9IFtdOw0KICAgIH0sDQogICAgc2V0UGVyY2VudGFnZShldmVudCwgaW52ZXN0bWVudCkgew0KICAgICAgaWYgKGludmVzdG1lbnQuaWQpIHsNCiAgICAgICAgLy9mb3IgZXhpc3RpbmcgaW52ZXN0bWVudHMNCiAgICAgICAgY29uc3QgaSA9IHRoaXMuaW52ZXN0bWVudHMuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5pZCA9PT0gaW52ZXN0bWVudC5pZCk7DQogICAgICAgIHRoaXMuaW52ZXN0bWVudHNbaV0ucGVyY2VudGFnZSA9IGV2ZW50LzEwMDsNCiAgICAgIH0gZWxzZSBpZiAoaW52ZXN0bWVudC5wZXJjZW50YWdlKSB7DQogICAgICAgIC8vZm9yIG5ldyBpbnZlc3RtZW50cyB0aGF0IGhhdmUgYSBwZXJjZW50YWdlIHByb3BlcnR5DQogICAgICAgIHRoaXMubmV3SW52ZXN0bWVudC5wZXJjZW50YWdlID0gZXZlbnQvMTAwDQogICAgICB9IGVsc2Ugew0KICAgICAgICAvL2ZvciBuZXcgaW52ZXN0bWVudHMNCiAgICAgICAgdGhpcy4kc2V0KHRoaXMubmV3SW52ZXN0bWVudCwgJ3BlcmNlbnRhZ2UnLCBldmVudC8xMDApDQogICAgICB9DQogICAgfSwNCiAgICBnZXRQZXJjZW50YWdlKGludmVzdG1lbnQpIHsNCiAgICAgIGlmIChpbnZlc3RtZW50LnBlcmNlbnRhZ2UpIHsNCiAgICAgICAgcmV0dXJuIChpbnZlc3RtZW50LnBlcmNlbnRhZ2UqMTAwKS50b0ZpeGVkKDIpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuIG51bGwNCiAgICAgIH0NCiAgICB9LA0KICAgIGdldEludmVzdG1lbnRMaXN0KCkgew0KICAgICAgbGV0IGVuZHBvaW50ID0gYC9hcGkvaW52ZXN0bWVudG5hbWUvYDsNCiAgICAgIGFwaVNlcnZpY2UoZW5kcG9pbnQsICJHRVQiKS50aGVuKGRhdGEgPT4gew0KICAgICAgICB0aGlzLmludmVzdG1lbnRMaXN0ID0gZGF0YS5yZXN1bHRzOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBhZGRUb0NoYW5nZWQoaW52ZXN0bWVudCkgew0KICAgICAgaWYgKCEodGhpcy5jaGFuZ2VMaXN0LmluY2x1ZGVzKGludmVzdG1lbnQpKSkgew0KICAgICAgICB0aGlzLmNoYW5nZUxpc3QucHVzaChpbnZlc3RtZW50KTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGNvbnN0IGkgPSB0aGlzLmNoYW5nZUxpc3QuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5pZCA9PT0gaW52ZXN0bWVudC5pZCk7DQogICAgICAgIHRoaXMuY2hhbmdlTGlzdC5zcGxpY2UoaSwgMSk7DQogICAgICAgIHRoaXMuY2hhbmdlTGlzdC5wdXNoKGludmVzdG1lbnQpOw0KICAgICAgfQ0KICAgIH0sDQogICAgZ2V0UG9ydGZvbGlvcygpIHsNCiAgICAgIGxldCBlbmRwb2ludCA9IGAvYXBpL3BvcnRmb2xpb3RlbXBsYXRlcy9gOw0KICAgICAgYXBpU2VydmljZShlbmRwb2ludCkudGhlbihkYXRhID0+IHsNCiAgICAgICAgdGhpcy5wb3J0Zm9saW9zID0gZGF0YS5yZXN1bHRzOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBnZXRJbnZlc3RtZW50cygpIHsNCiAgICAgIGlmICh0aGlzLnBvcnRmb2xpb0lEICE9IG51bGwpIHsNCiAgICAgICAgbGV0IGVuZHBvaW50ID0gYC9hcGkvcG9ydGZvbGlvdGVtcGxhdGVzLyR7dGhpcy5wb3J0Zm9saW9JRH0vaW52ZXN0bWVudHMvYDsNCiAgICAgICAgYXBpU2VydmljZShlbmRwb2ludCkudGhlbihkYXRhID0+IHsNCiAgICAgICAgICB0aGlzLmludmVzdG1lbnRzID0gZGF0YS5yZXN1bHRzOw0KICAgICAgICB9KTsNCiAgICAgIH07DQogICAgfSwNCiAgICBhZGRJbnZlc3RtZW50KCkgew0KICAgICAgaWYgKHRoaXMubmV3SW52ZXN0bWVudC5pbnZlc3RtZW50X25hbWUpIHsNCiAgICAgICAgbGV0IGVuZHBvaW50ID0gYC9hcGkvcG9ydGZvbGlvdGVtcGxhdGVzLyR7dGhpcy5wb3J0Zm9saW9JRH0vaW52ZXN0bWVudHMvYDsNCiAgICAgICAgYXBpU2VydmljZShlbmRwb2ludCwgIlBPU1QiLCB7DQogICAgICAgICAgaW52ZXN0bWVudF9uYW1lX2lkOiB0aGlzLm5ld0ludmVzdG1lbnQuaW52ZXN0bWVudF9uYW1lLA0KICAgICAgICAgIHBvcnRmb2xpbzogdGhpcy5wb3J0Zm9saW9JRCwNCiAgICAgICAgICBwZXJjZW50YWdlOiB0aGlzLm5ld0ludmVzdG1lbnQucGVyY2VudGFnZSwNCiAgICAgICAgfSkudGhlbihkYXRhID0+IHsNCiAgICAgICAgICB0aGlzLmludmVzdG1lbnRzLnB1c2goZGF0YSk7DQogICAgICAgICAgdGhpcy5uZXdJbnZlc3RtZW50LmludmVzdG1lbnRfbmFtZSA9IG51bGw7DQogICAgICAgICAgdGhpcy5uZXdJbnZlc3RtZW50LnBlcmNlbnRhZ2UgPSBudWxsOw0KICAgICAgICAgIH0pOw0KICAgICAgICBpZiAodGhpcy5lcnJvcikgew0KICAgICAgICAgIHRoaXMuZXJyb3IgPSBudWxsOw0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmVycm9yID0gIllvdSBtdXN0IGVudGVyIGEgbmFtZSBhbmQgYW1vdW50IGZvciB0aGUgbmV3IGludmVzdG1lbnQiOw0KICAgICAgfQ0KICAgIH0sDQogICAgb25TdWJtaXQoKSB7DQogICAgICBpZiAodGhpcy5jaGFuZ2VMaXN0KSB7DQogICAgICAgIGZvciAobGV0IGk9MDsgaSA8IHRoaXMuY2hhbmdlTGlzdC5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIGxldCBlbmRwb2ludCA9IGAvYXBpL3BvcnRmb2xpb3RlbXBsYXRlcy8ke3RoaXMucG9ydGZvbGlvSUR9L2ludmVzdG1lbnRzLyR7dGhpcy5jaGFuZ2VMaXN0W2ldLmlkfS9gOw0KICAgICAgICAgIGFwaVNlcnZpY2UoZW5kcG9pbnQsICJQQVRDSCIsIHsNCiAgICAgICAgICAgIGludmVzdG1lbnRfbmFtZV9pZDogdGhpcy5jaGFuZ2VMaXN0W2ldLmludmVzdG1lbnRfbmFtZS5pZCwNCiAgICAgICAgICAgIHBvcnRmb2xpbzogdGhpcy5wb3J0Zm9saW9JRCwNCiAgICAgICAgICAgIHBlcmNlbnRhZ2U6IHRoaXMuY2hhbmdlTGlzdFtpXS5wZXJjZW50YWdlLA0KICAgICAgICAgIH0pLnRoZW4oZGF0YSA9PiB7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgfTsNCiAgICAgIH07DQogICAgfSwNCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLmdldFBvcnRmb2xpb3MoKTsNCiAgICB0aGlzLmdldEludmVzdG1lbnRMaXN0KCk7DQogICAgdGhpcy5nZXRJbnZlc3RtZW50cygpOw0KICB9DQp9Ow0K"},{"version":3,"sources":["PortfolioTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyJA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PortfolioTable.vue","sourceRoot":"src/components","sourcesContent":["<template lang=\"html\">\r\n  <v-container>\r\n    <v-form  @submit.prevent=\"onSubmit\">\r\n      <v-row>\r\n        <v-col\r\n        :cols=\"6\">\r\n          <v-select\r\n            v-if=\"!editPortfolioName\"\r\n            :items=\"portfolios\"\r\n            item-text=\"name\"\r\n            return-object\r\n            v-model=\"selectedPortfolio\"\r\n            outlined dense hide-details>\r\n          </v-select>\r\n          <v-text-field\r\n            v-else\r\n            :value=\"selectedPortfolio.name\"\r\n            @change=\"newPortfolioName = $event\"\r\n            dense outlined\r\n            hide-details />\r\n        </v-col>\r\n        <v-col\r\n        :cols=\"1\" >\r\n          <template v-if=\"selectedPortfolio.id && canEdit\">\r\n            <v-btn\r\n              v-if=\"!editPortfolioName\"\r\n              color=\"green\" icon\r\n              @click=\"editPortfolioName = !editPortfolioName\">\r\n              <v-icon large>mdi-pencil-circle</v-icon>\r\n            </v-btn>\r\n            <v-btn\r\n              v-else\r\n              color=\"green\" icon\r\n              @click=\"updatePortfolioName()\">\r\n              <v-icon large>mdi-check-circle</v-icon>\r\n            </v-btn>\r\n          </template>\r\n        </v-col>\r\n        <v-col\r\n        :cols=\"2\">\r\n          <AddPortfolioName\r\n            :userID=\"user.id\"\r\n            @add-portfolio=\"addPortfolio\"/>\r\n        </v-col>\r\n        <v-col :cols=\"2\">\r\n        <DeleteObj\r\n          v-if=\"canEdit\"\r\n          :objectType=\"'model portfolio'\"\r\n          :objectToDelete=\"selectedPortfolio\"\r\n          @delete-object=\"deletePortfolio($event)\"\r\n        />\r\n      </v-col>\r\n      </v-row>\r\n      <v-row dense>\r\n        <v-col\r\n        :cols=\"8\">\r\n          <v-card>\r\n            <v-card-text>\r\n              Description\r\n            </v-card-text>\r\n          </v-card>\r\n        </v-col>\r\n        <v-col\r\n          :cols=\"3\">\r\n          <v-card\r\n          :color=\"checkColor()\"\r\n          :hint=\"checkHint()\"\r\n          persistent-hint>\r\n            <v-card-text>\r\n              Percentage\r\n            </v-card-text>\r\n          </v-card>\r\n        </v-col>\r\n        <v-col\r\n          :cols=\"1\">\r\n        </v-col>\r\n      </v-row>\r\n      <v-row\r\n        v-for=\"investment in investments\"\r\n        :key=\"investment.id\"\r\n        dense>\r\n        <v-col\r\n          :cols=\"8\">\r\n            <v-autocomplete\r\n              v-model=\"investment.investment_name\"\r\n              :items=\"investmentList\"\r\n              item-text=\"name\"\r\n              item-value=\"id\"\r\n              @change=\"addToChanged(investment)\"\r\n              outlined dense hide-details/>\r\n        </v-col>\r\n        <v-col\r\n          :cols=\"3\">\r\n            <v-text-field\r\n              type=\"number\"\r\n              :value = \"getPercentage(investment)\"\r\n              @blur = \"setPercentage($event.target.value, investment)\"\r\n              @change = \"addToChanged(investment)\"\r\n              dense outlined hide-details/>\r\n        </v-col>\r\n        <v-col\r\n          :cols=\"1\">\r\n          <DeleteObj\r\n            v-if=\"canEdit\"\r\n            :objectType=\"'modelInvestment'\"\r\n            :objectToDelete=\"investment\"\r\n            :portfolioID=\"portfolioID\"\r\n            @delete-object=\"getInvestments()\"\r\n            v-on=\"$listeners\"\r\n          />\r\n        </v-col>\r\n      </v-row>\r\n      <v-row\r\n        dense\r\n        v-if=\"canEdit\">\r\n        <v-col\r\n          :cols=\"8\">\r\n          <v-autocomplete\r\n            v-model=\"newInvestment.investment_name\"\r\n            :items=\"investmentList\"\r\n            item-text=\"name\"\r\n            item-value=\"id\"\r\n            outlined dense hide-details\r\n            label=\"Add an investment by typing a name\"/>\r\n        </v-col>\r\n        <v-col\r\n          :cols=\"3\">\r\n            <v-text-field\r\n              type=\"number\"\r\n              :value = \"getPercentage(newInvestment)\"\r\n              @blur = \"setPercentage($event.target.value, newInvestment)\"\r\n              outlined dense hide-details/>\r\n        </v-col>\r\n        <v-col\r\n          :cols=\"1\">\r\n          <v-btn type=\"button\" color=\"green\" dark dense\r\n            @click=\"addInvestment\">\r\n            <v-icon>\r\n              mdi-plus\r\n            </v-icon>\r\n          </v-btn>\r\n        </v-col>\r\n      </v-row>\r\n      <v-row v-if=\"investments.length && canEdit\">\r\n        <v-col>\r\n          <v-btn type=\"submit\" color=\"primary\" dark dense>Update All</v-btn>\r\n        </v-col>\r\n      </v-row>\r\n    </v-form>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { apiService } from \"@/common/api.service.js\";\r\nimport AddPortfolioName from \"@/components/AddPortfolioName.vue\";\r\nimport DeleteObj from \"@/components/DeleteObj.vue\";\r\n\r\nexport default {\r\n  name: \"PortfolioTable\",\r\n  props: {\r\n    portfolio: {\r\n      type: Object,\r\n      required: false,\r\n    },\r\n    user: {\r\n      type: Object,\r\n      required: true,\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      selectedPortfolio: {},\r\n      investments: [],\r\n      active: false,\r\n      error: null,\r\n      portfolios: [],\r\n      changeList: [],\r\n      investmentList: [],\r\n      newInvestment: {},\r\n      editPortfolioName: false,\r\n      newPortfolioName: '',\r\n    };\r\n  },\r\n  components: {\r\n    DeleteObj,\r\n    AddPortfolioName,\r\n  },\r\n  watch: {\r\n    portfolio: function () {\r\n      this.getInvestmentList();\r\n      this.getInvestments();\r\n    },\r\n    selectedPortfolio: function () {\r\n      this.getInvestmentList();\r\n      this.getInvestments();\r\n    },\r\n  },\r\n  computed: {\r\n    portfolioID: function() {\r\n      if (this.selectedPortfolio != null) {\r\n        return this.selectedPortfolio.id;\r\n      } else if (this.portfolio){\r\n        return this.portfolio.id;\r\n      } else {\r\n        return null\r\n      }\r\n    },\r\n    canEdit() {\r\n      if (this.isPracticeAdmin && this.isNotPublic ) {\r\n        return true\r\n      } else {\r\n        return false\r\n      }\r\n    },\r\n    isPracticeAdmin() {\r\n      if (this.selectedPortfolio.id) {\r\n        if (this.selectedPortfolio.practices.length > 0) {\r\n          return this.selectedPortfolio.practices.some(item => this.user.admin_practices.includes(item));\r\n        } else {\r\n          return true\r\n        }\r\n      } else {\r\n        return true\r\n      }\r\n    },\r\n    isNotPublic() {\r\n      if (this.selectedPortfolio.id) {\r\n        if (this.selectedPortfolio.allowed_users.length > 0) {\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      } else {\r\n        return false\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    checkHint() {\r\n      if (!this.checkComplete()) {\r\n        return \"Allocations do not equal 100%\"\r\n      }\r\n    },\r\n    checkColor(){\r\n      if (!this.checkComplete()) {\r\n        return \"red lighten-4\"\r\n      }\r\n    },\r\n    checkComplete() {\r\n      let value = this.investments.reduce( function (a,b) {\r\n        return a + Number(b.percentage);\r\n      }, 0);\r\n      if (value == 1) {\r\n        return true\r\n      } else {\r\n        return false\r\n      }\r\n    },\r\n    updatePortfolioName() {\r\n      this.editPortfolioName = !this.editPortfolioName;\r\n      if (this.newPortfolioName != '') {\r\n        let endpoint = `/api/portfoliotemplates/${this.selectedPortfolio.id}/`;\r\n        apiService(endpoint, \"PATCH\", {\r\n          name: this.newPortfolioName,\r\n        }).then(data => {\r\n          this.selectedPortfolio = data;\r\n          this.newPortfolioName = \"\";\r\n          const i = this.portfolios.findIndex(item => item.id === data.id);\r\n          this.portfolios.splice(i,0,data);\r\n        });\r\n      }\r\n    },\r\n    addPortfolio(data){\r\n      this.selectedPortfolio = data;\r\n      this.getPortfolios();\r\n    },\r\n    deletePortfolio(data) {\r\n      const i = this.portfolios.findIndex(item => item.id === data.id);\r\n      this.$delete(this.portfolios,i)\r\n      this.investments = [];\r\n    },\r\n    setPercentage(event, investment) {\r\n      if (investment.id) {\r\n        //for existing investments\r\n        const i = this.investments.findIndex(item => item.id === investment.id);\r\n        this.investments[i].percentage = event/100;\r\n      } else if (investment.percentage) {\r\n        //for new investments that have a percentage property\r\n        this.newInvestment.percentage = event/100\r\n      } else {\r\n        //for new investments\r\n        this.$set(this.newInvestment, 'percentage', event/100)\r\n      }\r\n    },\r\n    getPercentage(investment) {\r\n      if (investment.percentage) {\r\n        return (investment.percentage*100).toFixed(2);\r\n      } else {\r\n        return null\r\n      }\r\n    },\r\n    getInvestmentList() {\r\n      let endpoint = `/api/investmentname/`;\r\n      apiService(endpoint, \"GET\").then(data => {\r\n        this.investmentList = data.results;\r\n      });\r\n    },\r\n    addToChanged(investment) {\r\n      if (!(this.changeList.includes(investment))) {\r\n        this.changeList.push(investment);\r\n      } else {\r\n        const i = this.changeList.findIndex(item => item.id === investment.id);\r\n        this.changeList.splice(i, 1);\r\n        this.changeList.push(investment);\r\n      }\r\n    },\r\n    getPortfolios() {\r\n      let endpoint = `/api/portfoliotemplates/`;\r\n      apiService(endpoint).then(data => {\r\n        this.portfolios = data.results;\r\n      });\r\n    },\r\n    getInvestments() {\r\n      if (this.portfolioID != null) {\r\n        let endpoint = `/api/portfoliotemplates/${this.portfolioID}/investments/`;\r\n        apiService(endpoint).then(data => {\r\n          this.investments = data.results;\r\n        });\r\n      };\r\n    },\r\n    addInvestment() {\r\n      if (this.newInvestment.investment_name) {\r\n        let endpoint = `/api/portfoliotemplates/${this.portfolioID}/investments/`;\r\n        apiService(endpoint, \"POST\", {\r\n          investment_name_id: this.newInvestment.investment_name,\r\n          portfolio: this.portfolioID,\r\n          percentage: this.newInvestment.percentage,\r\n        }).then(data => {\r\n          this.investments.push(data);\r\n          this.newInvestment.investment_name = null;\r\n          this.newInvestment.percentage = null;\r\n          });\r\n        if (this.error) {\r\n          this.error = null;\r\n        }\r\n      } else {\r\n        this.error = \"You must enter a name and amount for the new investment\";\r\n      }\r\n    },\r\n    onSubmit() {\r\n      if (this.changeList) {\r\n        for (let i=0; i < this.changeList.length; i++) {\r\n          let endpoint = `/api/portfoliotemplates/${this.portfolioID}/investments/${this.changeList[i].id}/`;\r\n          apiService(endpoint, \"PATCH\", {\r\n            investment_name_id: this.changeList[i].investment_name.id,\r\n            portfolio: this.portfolioID,\r\n            percentage: this.changeList[i].percentage,\r\n          }).then(data => {\r\n            console.log(data);\r\n          });\r\n        };\r\n      };\r\n    },\r\n  },\r\n  mounted() {\r\n    this.getPortfolios();\r\n    this.getInvestmentList();\r\n    this.getInvestments();\r\n  }\r\n};\r\n</script>\r\n"]}]}