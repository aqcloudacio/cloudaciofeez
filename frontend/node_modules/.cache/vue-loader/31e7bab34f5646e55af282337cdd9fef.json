{"remainingRequest":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\components\\AddInvestment.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\components\\AddInvestment.vue","mtime":1599098952331},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgXyBmcm9tICdsb2Rhc2gnDQppbXBvcnQgeyBhcGlTZXJ2aWNlIH0gZnJvbSAiQC9jb21tb24vYXBpLnNlcnZpY2UuanMiOw0KaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gInZ1ZXgiOw0KaW1wb3J0IHsNCiAgSU5WRVNUTUVOVE5BTUVfQUxMLA0KfSBmcm9tICJAL3N0b3JlL2FjdGlvbnMudHlwZSI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIkFkZEludmVzdG1lbnQiLA0KICBpbmplY3Q6IFsicGxhdGZvcm1JZCIsICJzY2VuYXJpb0lkIl0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHNlYXJjaDogbnVsbCwNCiAgICAgIG5ld0ludmVzdG1lbnQ6IG51bGwsDQogICAgICBpbnZlc3RtZW50QW1vdW50OiBudWxsLA0KICAgICAgbGlua2VkSW52ZXN0bWVudE5hbWVzOiBbXSwNCiAgICAgIGVycm9yOiBudWxsLA0KICAgICAgbmV4dDogbnVsbCwNCiAgICAgIHNlbGVjdGVkOiBbXSwNCiAgICAgIGZpbHRlckl0ZW1zOiBbDQogICAgICAgIHtuYW1lOiAiU2hvdyBhbGwiLCBzZWxlY3RlZDogdHJ1ZSwgZGlzYWJsZWQ6IGZhbHNlLCBpZDogMX0sDQogICAgICAgIHtuYW1lOiAiU2hvdyBmdW5kLXNwZWNpZmljIGludmVzdG1lbnRzIiwgc2VsZWN0ZWQ6IGZhbHNlLCBkaXNhYmxlZDogdHJ1ZSwgaWQ6IDJ9LA0KICAgICAgICB7bmFtZTogIlNob3cgbWFuYWdlZCBmdW5kcyIsIHNlbGVjdGVkOiB0cnVlLCBkaXNhYmxlZDogZmFsc2UsIGlkOiAzfSwNCiAgICAgICAge25hbWU6ICJTaG93IG1hbmFnZWQgYWNjb3VudHMiLCBzZWxlY3RlZDogdHJ1ZSwgZGlzYWJsZWQ6IGZhbHNlLCBpZDogNH0sDQogICAgICAgIHtuYW1lOiAiU2hvdyBsaXN0ZWQgaW52ZXN0bWVudHMiLCBzZWxlY3RlZDogdHJ1ZSwgZGlzYWJsZWQ6IGZhbHNlLCBpZDogNX0sDQogICAgICAgIHtuYW1lOiAiU2hvdyBvdGhlciBhc3NldHMiLCBzZWxlY3RlZDogdHJ1ZSwgZGlzYWJsZWQ6IGZhbHNlLCBpZDogNn0sDQogICAgICBdDQogICAgfQ0KICB9LA0KICB3YXRjaDogew0KICAgIGFjdGl2ZVBsYXRmb3JtKCkgew0KICAgICAgdGhpcy5zZXRDaGVja0JveGVzKCk7DQogICAgICB0aGlzLmdldExpbmtlZEludmVzdG1lbnROYW1lcygpOw0KICAgIH0NCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICAuLi5tYXBHZXR0ZXJzKFsiYWN0aXZlUGxhdGZvcm0iLCAiaW52ZXN0bWVudE5hbWVzIl0pLA0KICAgIG5hbWVJZE9yTnVsbCgpIHsNCiAgICAgIGlmICh0aGlzLm5ld0ludmVzdG1lbnQuaWQgIT0gbnVsbCkgew0KICAgICAgICByZXR1cm4gdGhpcy5uZXdJbnZlc3RtZW50LmlkOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICB9DQogICAgfSwNCiAgICBjdXN0b21OYW1lKCkgew0KICAgICAgaWYgKHRoaXMubmV3SW52ZXN0bWVudC5pZCAhPSBudWxsKSB7DQogICAgICAgIHJldHVybiBudWxsDQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gdGhpcy5uZXdJbnZlc3RtZW50Ow0KICAgICAgfQ0KICAgIH0sDQogICAgZmlsdGVyZWRMaXN0KCkgew0KICAgICAgLy8gZmlsdGVycyB0aGUgd2hvbGUgdW5saW5rZWQgaW52ZXN0bWVudCBsaXN0IGJhc2VkIG9uIHVzZXIgaW5wdXQuDQogICAgICBsZXQgbGlzdCA9IFtdOw0KICAgICAgaWYgKHRoaXMuZmlsdGVySXRlbXMuZmluZCh4ID0+IHguaWQgPT09IDEpLnNlbGVjdGVkID09PSB0cnVlKSB7DQogICAgICAgIGxpc3QucHVzaCguLi50aGlzLmludmVzdG1lbnROYW1lcyk7DQogICAgICB9DQogICAgICBpZiAodGhpcy5maWx0ZXJJdGVtcy5maW5kKHggPT4geC5pZCA9PT0gMykuc2VsZWN0ZWQgPT09IHRydWUpIHsNCiAgICAgICAgbGV0IGYgPSBfLmZpbHRlcih0aGlzLmludmVzdG1lbnROYW1lcywge2ludmVzdG1lbnRfY2xhc3M6ICdNRid9KTsNCiAgICAgICAgbGlzdC5wdXNoKC4uLmYpOw0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMuZmlsdGVySXRlbXMuZmluZCh4ID0+IHguaWQgPT09IDQpLnNlbGVjdGVkID09PSB0cnVlKSB7DQogICAgICAgIGxldCBmID0gXy5maWx0ZXIodGhpcy5pbnZlc3RtZW50TmFtZXMsIHtpbnZlc3RtZW50X2NsYXNzOiAnTUEnfSk7DQogICAgICAgIGxpc3QucHVzaCguLi5mKTsNCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLmZpbHRlckl0ZW1zLmZpbmQoeCA9PiB4LmlkID09PSA1KS5zZWxlY3RlZCA9PT0gdHJ1ZSkgew0KICAgICAgICBsZXQgZiA9IF8uZmlsdGVyKHRoaXMuaW52ZXN0bWVudE5hbWVzLCB7aW52ZXN0bWVudF9jbGFzczogJ0xJU1RFRCd9KTsNCiAgICAgICAgbGlzdC5wdXNoKC4uLmYpOw0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMuZmlsdGVySXRlbXMuZmluZCh4ID0+IHguaWQgPT09IDYpLnNlbGVjdGVkID09PSB0cnVlKSB7DQogICAgICAgIGxldCBmID0gXy5maWx0ZXIodGhpcy5pbnZlc3RtZW50TmFtZXMsIHtpbnZlc3RtZW50X2NsYXNzOiAnT1RIRVInfSk7DQogICAgICAgIGxpc3QucHVzaCguLi5mKTsNCiAgICAgIH0NCiAgICAgIHJldHVybiBsaXN0DQogICAgfSwNCiAgICBpbnZlc3RtZW50TGlzdCgpIHsNCiAgICAgIC8vIGpvaW5zIHRoZSBsaW5rZWQgaW52ZXN0bWVudCBuYW1lcyAoaWYgYXBwbGljYWJsZSkgYW5kIHRoZSBmaWx0ZXJlZCBmdWxsDQogICAgICAvLyBpbnZlc3RtZW50IG5hbWUgbGlzdA0KICAgICAgbGV0IGZ1bGxMaXN0ID0gW107DQogICAgICBpZiAodGhpcy5maWx0ZXJJdGVtcy5maW5kKHggPT4geC5pZCA9PT0gMikuc2VsZWN0ZWQgPT09IHRydWUpIHsNCiAgICAgICAgZnVsbExpc3QucHVzaCguLi50aGlzLmxpbmtlZEludmVzdG1lbnROYW1lcyk7DQogICAgICB9DQogICAgICBpZiAodGhpcy5maWx0ZXJJdGVtcy5zb21lKHggPT4gKHguaWQgIT0gMikgJiYgKHguc2VsZWN0ZWQ9PT10cnVlKSkpIHsNCiAgICAgICAgZnVsbExpc3QucHVzaCguLi50aGlzLmZpbHRlcmVkTGlzdCk7DQogICAgICB9DQogICAgICByZXR1cm4gZnVsbExpc3QNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBmaWx0ZXJPYmplY3QoaXRlbSwgcXVlcnlUZXh0KSB7DQogICAgICAgIGNvbnN0IHRleHRPbmUgPSBpdGVtLm5hbWUudG9Mb3dlckNhc2UoKQ0KICAgICAgICBjb25zdCBzZWFyY2hUZXh0ID0gcXVlcnlUZXh0LnRvTG93ZXJDYXNlKCkNCg0KICAgICAgICBpZiAoaXRlbS5jb2RlKSB7DQogICAgICAgICAgY29uc3QgdGV4dFR3byA9IGl0ZW0uY29kZS50b0xvd2VyQ2FzZSgpDQogICAgICAgICAgcmV0dXJuIHRleHRPbmUuaW5kZXhPZihzZWFyY2hUZXh0KSA+IC0xIHx8DQogICAgICAgICAgICB0ZXh0VHdvLmluZGV4T2Yoc2VhcmNoVGV4dCkgPiAtMQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHJldHVybiB0ZXh0T25lLmluZGV4T2Yoc2VhcmNoVGV4dCkgPiAtMQ0KICAgICAgICB9DQogICAgfSwNCiAgICBuYW1lQW5kQ29kZShpdGVtKSB7DQogICAgICByZXR1cm4gaXRlbS5uYW1lICsgaXRlbS5jb2RlDQogICAgfSwNCiAgICBzZXRTZWxlY3RlZChldmVudCwgaWQpIHsNCiAgICAgIGlmIChpZD09PTEpew0KICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHRoaXMuZmlsdGVySXRlbXMpIHsNCiAgICAgICAgICBpZiAoaXRlbS5pZCAhPSAyKSB7DQogICAgICAgICAgICBpdGVtLnNlbGVjdGVkID0gZXZlbnQ7DQogICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmFjdGl2ZVBsYXRmb3JtLm5hbWUubGlua2VkX2ludmVzdG1lbnRzKSB7DQogICAgICAgICAgICBpdGVtLnNlbGVjdGVkID0gZXZlbnQ7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9IGVsc2UgaWYgKGV2ZW50ID09PSBmYWxzZSkgew0KICAgICAgICBsZXQgaWR4ID0gdGhpcy5maWx0ZXJJdGVtcy5maW5kSW5kZXgoeCA9PiB4LmlkID09PSAxKTsNCiAgICAgICAgdGhpcy5maWx0ZXJJdGVtc1tpZHhdLnNlbGVjdGVkID0gZmFsc2U7DQogICAgICB9DQogICAgfSwNCiAgICBzZXRDaGVja0JveGVzKCkgew0KICAgICAgbGV0IGxpbmtlZEludklkeCA9IHRoaXMuZmlsdGVySXRlbXMuZmluZEluZGV4KHggPT4geC5pZCA9PT0gMik7DQogICAgICBpZiAodGhpcy5hY3RpdmVQbGF0Zm9ybS5uYW1lLmxpbmtlZF9pbnZlc3RtZW50cykgew0KICAgICAgICB0aGlzLmZpbHRlckl0ZW1zW2xpbmtlZEludklkeF0uc2VsZWN0ZWQgPSB0cnVlOw0KICAgICAgICB0aGlzLmZpbHRlckl0ZW1zW2xpbmtlZEludklkeF0uZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiB0aGlzLmZpbHRlckl0ZW1zKSB7DQogICAgICAgICAgaWYgKGl0ZW0uaWQgIT0gMikgew0KICAgICAgICAgICAgaXRlbS5zZWxlY3RlZCA9IGZhbHNlOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5zZXRTZWxlY3RlZCh0cnVlLDEpOw0KICAgICAgfQ0KICAgIH0sDQogICAgZ2V0SW52ZXN0bWVudE5hbWVzKCkgew0KICAgICAgaWYgKF8uaXNFbXB0eSh0aGlzLmludmVzdG1lbnROYW1lcykpIHsNCiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goSU5WRVNUTUVOVE5BTUVfQUxMKQ0KICAgICAgfQ0KICAgIH0sDQogICAgZ2V0TGlua2VkSW52ZXN0bWVudE5hbWVzKCkgew0KICAgICAgaWYgKHRoaXMuYWN0aXZlUGxhdGZvcm0ubmFtZS5saW5rZWRfaW52ZXN0bWVudHMpIHsNCiAgICAgICAgbGV0IGVuZHBvaW50ID0gJycNCiAgICAgICAgaWYgKHRoaXMubmV4dCA9PT0gbnVsbCkgew0KICAgICAgICAgIGVuZHBvaW50ID0gYC9hcGkvcGxhdGZvcm1uYW1lcy8ke3RoaXMuYWN0aXZlUGxhdGZvcm0ubmFtZS5pZH0vaW52ZXN0bWVudG5hbWVzL2ANCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBlbmRwb2ludCA9IHRoaXMubmV4dDsNCiAgICAgICAgfQ0KICAgICAgICBhcGlTZXJ2aWNlKGVuZHBvaW50LCAiR0VUIikudGhlbihkYXRhID0+IHsNCiAgICAgICAgICB0aGlzLmxpbmtlZEludmVzdG1lbnROYW1lcy5wdXNoKC4uLmRhdGEucmVzdWx0cyk7DQogICAgICAgICAgaWYgKGRhdGEubmV4dCkgew0KICAgICAgICAgICAgdGhpcy5uZXh0ID0gZGF0YS5uZXh0Ow0KICAgICAgICAgICAgdGhpcy5nZXRMaW5rZWRJbnZlc3RtZW50TmFtZXMoKQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLm5leHQgPSBudWxsOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9DQogICAgICAvLyBsZXQgZW5kcG9pbnQgPSBgL2FwaS9pbnZlc3RtZW50bmFtZS9gOw0KICAgICAgLy8gYXBpU2VydmljZShlbmRwb2ludCwgIkdFVCIpLnRoZW4oZGF0YSA9PiB7DQogICAgICAvLyAgIHRoaXMuaW52ZXN0bWVudExpc3QgPSBkYXRhLnJlc3VsdHM7DQogICAgICAvLyB9KTsNCiAgICB9LA0KICAgIGRlbGF5U3VibWl0KCkgew0KICAgICAgLy8gUmVzb2x2ZXMgYSB3ZWlyZCBjb21ib2JveCBidWcgd2hlcmUgaXQgZG9lcyBub3QgdXBkYXRlIHByb3BzIHVudGlsIGJsdXINCiAgICAgIHRoaXMuJHJlZnMuY29tYm9ib3guYmx1cigpOw0KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICB0aGlzLm9uU3VibWl0KCk7DQogICAgICB9KQ0KICAgIH0sDQogICAgb25TdWJtaXQoKSB7DQogICAgICBsZXQgZW5kcG9pbnQgPSBgL2FwaS9zY2VuYXJpb3MvJHt0aGlzLnNjZW5hcmlvSWR9L3BsYXRmb3Jtcy8ke3RoaXMucGxhdGZvcm1JZH0vaW52ZXN0bWVudHMvYDsNCiAgICAgIGlmICh0aGlzLm5ld0ludmVzdG1lbnQgIT0gbnVsbCkgew0KICAgICAgICBhcGlTZXJ2aWNlKGVuZHBvaW50LCAiUE9TVCIsIHsNCiAgICAgICAgICBuYW1lX2lkOiB0aGlzLm5hbWVJZE9yTnVsbCwNCiAgICAgICAgICBpbnZlc3RtZW50X2NsYXNzX2lkOiBudWxsLA0KICAgICAgICAgIHBsYXRmb3JtOiB0aGlzLnBsYXRmb3JtSWQsDQogICAgICAgICAgYW1vdW50OiB0aGlzLmludmVzdG1lbnRBbW91bnQsDQogICAgICAgICAgY3VzdG9tX25hbWU6IHRoaXMuY3VzdG9tTmFtZSwNCiAgICAgICAgfSkudGhlbihkYXRhID0+IHsNCiAgICAgICAgICB0aGlzLiRlbWl0KCJhZGQtaW52ZXN0bWVudCIsIGRhdGEpOw0KICAgICAgICAgIHRoaXMubmV3SW52ZXN0bWVudCA9IG51bGw7DQogICAgICAgICAgdGhpcy5pbnZlc3RtZW50QW1vdW50ID0gbnVsbDsNCiAgICAgICAgfSk7DQogICAgICAgIGlmICh0aGlzLmVycm9yKSB7DQogICAgICAgICAgdGhpcy5lcnJvciA9IG51bGw7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuZXJyb3IgPSAiIg0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLmdldEludmVzdG1lbnROYW1lcygpOw0KICAgIC8vIHRoaXMuZ2V0SW52ZXN0bWVudExpc3QoKTsNCiAgICAvLyB0aGlzLnNldENoZWNrQm94ZXMoKTsNCiAgfQ0KfTsNCg=="},{"version":3,"sources":["AddInvestment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddInvestment.vue","sourceRoot":"src/components","sourcesContent":["<template lang=\"html\">\r\n  <v-expansion-panel outline   @click.stop >\r\n      <v-expansion-panel-header class=\"pa-3\"   @click.stop   >\r\n      <v-row class=\"ma-0\" @click.stop>\r\n      <v-col :cols=\"7\" class=\"py-0\" @click.stop>\r\n        <v-combobox\r\n          v-model=\"newInvestment\"\r\n          :items=\"investmentList\"\r\n          @keyup.enter=\"delaySubmit\"\r\n          ref=\"combobox\"\r\n          no-data-text=\"Create a custom investment\"\r\n          solo dense\r\n          @keyup.space.prevent\r\n          @click.stop\r\n          hide-details=\"auto\"\r\n          label=\"Add an investment by typing its name\"\r\n          :search-input.sync=\"search\"\r\n          item-text=\"name\"\r\n          :filter=\"filterObject\">\r\n        <template v-slot:no-data>\r\n          <v-list-item>\r\n            <v-list-item-content>\r\n              <v-list-item-title>\r\n                No investments match \"<strong>{{ search }}</strong>\". Press <kbd>enter</kbd> to create a custom investment.\r\n              </v-list-item-title>\r\n            </v-list-item-content>\r\n          </v-list-item>\r\n        </template>\r\n<!--\r\n        <template v-slot:selection='{ item }'>\r\n          <span class=\"pr-2\">\r\n\r\n              {{ item.name }} ({{ item.code }})\r\n            </span>\r\n        </template> -->\r\n        <template v-slot:item='{ item }'>\r\n          <v-list-item-content class=\"pr-2\">\r\n            <v-list-item-title v-text=\"item.name\"></v-list-item-title>\r\n          </v-list-item-content>\r\n          <v-spacer></v-spacer>\r\n          <v-chip v-if=\"item.code\" right outlined>\r\n            {{ item.code }}\r\n          </v-chip>\r\n        </template>\r\n      </v-combobox>\r\n      </v-col>\r\n      <v-col :cols=\"3\" class=\"py-0\">\r\n        <v-text-field\r\n          label=\"Amount\"\r\n          solo dense\r\n          hide-details=\"auto\"\r\n          type=\"number\"\r\n          @keyup.space.prevent\r\n          @click.stop\r\n          v-model=\"investmentAmount\" />\r\n      </v-col>\r\n      <v-col :cols=\"2\" class=\"py-0\">\r\n        <v-icon\r\n          color=\"teal\"\r\n          @click.stop\r\n          @click=\"delaySubmit\"\r\n          large\r\n        >mdi-check-circle-outline</v-icon>\r\n        <v-menu\r\n          top offset-y\r\n          :close-on-content-click=\"false\">\r\n          <template v-slot:activator=\"{ on }\">\r\n            <v-icon\r\n              color=\"teal\"\r\n              @click.stop\r\n              large\r\n              v-on=\"on\">\r\n                mdi-filter\r\n            </v-icon>\r\n          </template>\r\n          <v-list dense>\r\n            <template v-for=\"(item, idx) in filterItems\">\r\n              <v-list-item\r\n                :key=\"item.id\"\r\n                :disabled=\"item.disabled\">\r\n                <v-checkbox\r\n                  dense\r\n                  class='mt-0'\r\n                  hide-details\r\n                  @change=\"setSelected($event, item.id)\"\r\n                  v-model=\"item.selected\"\r\n                />\r\n                <v-list-item-title class=\"mt-1\">\r\n                  {{ item.name }}\r\n                </v-list-item-title>\r\n              </v-list-item>\r\n              <v-divider v-if=\"item.id===1\" :key=\"idx\" class=\"mx-4\"></v-divider>\r\n            </template>\r\n          </v-list>\r\n        </v-menu>\r\n      </v-col>\r\n    </v-row>\r\n  </v-expansion-panel-header>\r\n  </v-expansion-panel>\r\n</template>\r\n\r\n<script>\r\nimport _ from 'lodash'\r\nimport { apiService } from \"@/common/api.service.js\";\r\nimport { mapGetters } from \"vuex\";\r\nimport {\r\n  INVESTMENTNAME_ALL,\r\n} from \"@/store/actions.type\";\r\n\r\nexport default {\r\n  name: \"AddInvestment\",\r\n  inject: [\"platformId\", \"scenarioId\"],\r\n  data() {\r\n    return {\r\n      search: null,\r\n      newInvestment: null,\r\n      investmentAmount: null,\r\n      linkedInvestmentNames: [],\r\n      error: null,\r\n      next: null,\r\n      selected: [],\r\n      filterItems: [\r\n        {name: \"Show all\", selected: true, disabled: false, id: 1},\r\n        {name: \"Show fund-specific investments\", selected: false, disabled: true, id: 2},\r\n        {name: \"Show managed funds\", selected: true, disabled: false, id: 3},\r\n        {name: \"Show managed accounts\", selected: true, disabled: false, id: 4},\r\n        {name: \"Show listed investments\", selected: true, disabled: false, id: 5},\r\n        {name: \"Show other assets\", selected: true, disabled: false, id: 6},\r\n      ]\r\n    }\r\n  },\r\n  watch: {\r\n    activePlatform() {\r\n      this.setCheckBoxes();\r\n      this.getLinkedInvestmentNames();\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"activePlatform\", \"investmentNames\"]),\r\n    nameIdOrNull() {\r\n      if (this.newInvestment.id != null) {\r\n        return this.newInvestment.id;\r\n      } else {\r\n        return null;\r\n      }\r\n    },\r\n    customName() {\r\n      if (this.newInvestment.id != null) {\r\n        return null\r\n      } else {\r\n        return this.newInvestment;\r\n      }\r\n    },\r\n    filteredList() {\r\n      // filters the whole unlinked investment list based on user input.\r\n      let list = [];\r\n      if (this.filterItems.find(x => x.id === 1).selected === true) {\r\n        list.push(...this.investmentNames);\r\n      }\r\n      if (this.filterItems.find(x => x.id === 3).selected === true) {\r\n        let f = _.filter(this.investmentNames, {investment_class: 'MF'});\r\n        list.push(...f);\r\n      }\r\n      if (this.filterItems.find(x => x.id === 4).selected === true) {\r\n        let f = _.filter(this.investmentNames, {investment_class: 'MA'});\r\n        list.push(...f);\r\n      }\r\n      if (this.filterItems.find(x => x.id === 5).selected === true) {\r\n        let f = _.filter(this.investmentNames, {investment_class: 'LISTED'});\r\n        list.push(...f);\r\n      }\r\n      if (this.filterItems.find(x => x.id === 6).selected === true) {\r\n        let f = _.filter(this.investmentNames, {investment_class: 'OTHER'});\r\n        list.push(...f);\r\n      }\r\n      return list\r\n    },\r\n    investmentList() {\r\n      // joins the linked investment names (if applicable) and the filtered full\r\n      // investment name list\r\n      let fullList = [];\r\n      if (this.filterItems.find(x => x.id === 2).selected === true) {\r\n        fullList.push(...this.linkedInvestmentNames);\r\n      }\r\n      if (this.filterItems.some(x => (x.id != 2) && (x.selected===true))) {\r\n        fullList.push(...this.filteredList);\r\n      }\r\n      return fullList\r\n    }\r\n  },\r\n  methods: {\r\n    filterObject(item, queryText) {\r\n        const textOne = item.name.toLowerCase()\r\n        const searchText = queryText.toLowerCase()\r\n\r\n        if (item.code) {\r\n          const textTwo = item.code.toLowerCase()\r\n          return textOne.indexOf(searchText) > -1 ||\r\n            textTwo.indexOf(searchText) > -1\r\n        } else {\r\n          return textOne.indexOf(searchText) > -1\r\n        }\r\n    },\r\n    nameAndCode(item) {\r\n      return item.name + item.code\r\n    },\r\n    setSelected(event, id) {\r\n      if (id===1){\r\n        for (let item of this.filterItems) {\r\n          if (item.id != 2) {\r\n            item.selected = event;\r\n          } else if (this.activePlatform.name.linked_investments) {\r\n            item.selected = event;\r\n          }\r\n        }\r\n      } else if (event === false) {\r\n        let idx = this.filterItems.findIndex(x => x.id === 1);\r\n        this.filterItems[idx].selected = false;\r\n      }\r\n    },\r\n    setCheckBoxes() {\r\n      let linkedInvIdx = this.filterItems.findIndex(x => x.id === 2);\r\n      if (this.activePlatform.name.linked_investments) {\r\n        this.filterItems[linkedInvIdx].selected = true;\r\n        this.filterItems[linkedInvIdx].disabled = false;\r\n        for (let item of this.filterItems) {\r\n          if (item.id != 2) {\r\n            item.selected = false;\r\n          }\r\n        }\r\n      } else {\r\n        this.setSelected(true,1);\r\n      }\r\n    },\r\n    getInvestmentNames() {\r\n      if (_.isEmpty(this.investmentNames)) {\r\n        this.$store.dispatch(INVESTMENTNAME_ALL)\r\n      }\r\n    },\r\n    getLinkedInvestmentNames() {\r\n      if (this.activePlatform.name.linked_investments) {\r\n        let endpoint = ''\r\n        if (this.next === null) {\r\n          endpoint = `/api/platformnames/${this.activePlatform.name.id}/investmentnames/`\r\n        } else {\r\n          endpoint = this.next;\r\n        }\r\n        apiService(endpoint, \"GET\").then(data => {\r\n          this.linkedInvestmentNames.push(...data.results);\r\n          if (data.next) {\r\n            this.next = data.next;\r\n            this.getLinkedInvestmentNames()\r\n          } else {\r\n            this.next = null;\r\n          }\r\n        });\r\n      }\r\n      // let endpoint = `/api/investmentname/`;\r\n      // apiService(endpoint, \"GET\").then(data => {\r\n      //   this.investmentList = data.results;\r\n      // });\r\n    },\r\n    delaySubmit() {\r\n      // Resolves a weird combobox bug where it does not update props until blur\r\n      this.$refs.combobox.blur();\r\n      this.$nextTick(() => {\r\n        this.onSubmit();\r\n      })\r\n    },\r\n    onSubmit() {\r\n      let endpoint = `/api/scenarios/${this.scenarioId}/platforms/${this.platformId}/investments/`;\r\n      if (this.newInvestment != null) {\r\n        apiService(endpoint, \"POST\", {\r\n          name_id: this.nameIdOrNull,\r\n          investment_class_id: null,\r\n          platform: this.platformId,\r\n          amount: this.investmentAmount,\r\n          custom_name: this.customName,\r\n        }).then(data => {\r\n          this.$emit(\"add-investment\", data);\r\n          this.newInvestment = null;\r\n          this.investmentAmount = null;\r\n        });\r\n        if (this.error) {\r\n          this.error = null;\r\n        }\r\n      } else {\r\n        this.error = \"\"\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getInvestmentNames();\r\n    // this.getInvestmentList();\r\n    // this.setCheckBoxes();\r\n  }\r\n};\r\n</script>\r\n"]}]}