{"remainingRequest":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\components\\PortfolioTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\components\\PortfolioTable.vue","mtime":1603694657240},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBhcGlTZXJ2aWNlIH0gZnJvbSAiQC9jb21tb24vYXBpLnNlcnZpY2UuanMiOw0KaW1wb3J0IEFkZFBvcnRmb2xpb05hbWUgZnJvbSAiQC9jb21wb25lbnRzL0FkZFBvcnRmb2xpb05hbWUudnVlIjsNCmltcG9ydCBEZWxldGVPYmogZnJvbSAiQC9jb21wb25lbnRzL0RlbGV0ZU9iai52dWUiOw0KaW1wb3J0IHsgcnVsZVBlcmNUbzEwMCB9IGZyb20gIkAvY29tcG9uZW50cy9taXhpbnMvUnVsZXMuanMiOw0KaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gInZ1ZXgiOw0KaW1wb3J0IHsNCiAgSU5WRVNUTUVOVE5BTUVfQUxMLA0KfSBmcm9tICJAL3N0b3JlL2FjdGlvbnMudHlwZSI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIlBvcnRmb2xpb1RhYmxlIiwNCiAgbWl4aW5zOiBbcnVsZVBlcmNUbzEwMF0sDQogIHByb3BzOiB7DQogICAgcG9ydGZvbGlvOiB7DQogICAgICB0eXBlOiBPYmplY3QsDQogICAgICByZXF1aXJlZDogZmFsc2UsDQogICAgfSwNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgaXNTYXZpbmc6IGZhbHNlLA0KICAgICAgc2VhcmNoOiBudWxsLA0KICAgICAgc2VsZWN0ZWRQb3J0Zm9saW86IHt9LA0KICAgICAgaW52ZXN0bWVudHM6IFtdLA0KICAgICAgYWN0aXZlOiBmYWxzZSwNCiAgICAgIGVycm9yOiBudWxsLA0KICAgICAgcG9ydGZvbGlvczogW10sDQogICAgICBjaGFuZ2VMaXN0OiBbXSwNCiAgICAgIG5ld0ludmVzdG1lbnQ6IHt9LA0KICAgICAgZWRpdFBvcnRmb2xpb05hbWU6IGZhbHNlLA0KICAgICAgbmV3UG9ydGZvbGlvTmFtZTogJycsDQogICAgfTsNCiAgfSwNCiAgY29tcG9uZW50czogew0KICAgIERlbGV0ZU9iaiwNCiAgICBBZGRQb3J0Zm9saW9OYW1lLA0KICB9LA0KICB3YXRjaDogew0KICAgIHBvcnRmb2xpbzogZnVuY3Rpb24gKCkgew0KICAgICAgdGhpcy5nZXRJbnZlc3RtZW50cygpOw0KICAgIH0sDQogICAgc2VsZWN0ZWRQb3J0Zm9saW86IGZ1bmN0aW9uICgpIHsNCiAgICAgIHRoaXMuZ2V0SW52ZXN0bWVudHMoKTsNCiAgICB9LA0KICB9LA0KICBjb21wdXRlZDogew0KICAgIC4uLm1hcEdldHRlcnMoWyJhY3RpdmVVc2VyIiwgImludmVzdG1lbnROYW1lcyJdKSwNCiAgICBwb3J0Zm9saW9Jc1NlbGVjdGVkKCkgew0KICAgICAgcmV0dXJuICF0aGlzLl8uaXNFbXB0eSh0aGlzLnNlbGVjdGVkUG9ydGZvbGlvKTsNCiAgICB9LA0KICAgIGxvY2tNZXNzYWdlKCkgew0KICAgICAgbGV0IG1zZyA9ICcnOw0KICAgICAgaWYgKCF0aGlzLmlzTm90QUZTTExpbWl0ZWQpIHsNCiAgICAgICAgbXNnICs9ICdZb3UgY2Fubm90IGVkaXQgQUZTTCBNb2RlbCBQb3J0Zm9saW9zJw0KICAgICAgfQ0KICAgICAgZWxzZSBpZiAoIXRoaXMuaXNQcmFjdGljZUFkbWluKSB7DQogICAgICAgIG1zZyArPSAnWW91IGFyZSBub3QgYW4gYWRtaW4gb2YgdGhpcyBQcmFjdGljZScNCiAgICAgIH0NCiAgICAgIGVsc2UgaWYgKCF0aGlzLmlzTm90TWFzdGVyVGVtcGxhdGUpIHsNCiAgICAgICAgbXNnICs9ICdZb3UgY2Fubm90IGVkaXQgdGhpcyBNb2RlbCBQb3J0Zm9saW8nDQogICAgICB9DQogICAgICByZXR1cm4gbXNnDQogICAgfSwNCiAgICBwb3J0Zm9saW9JRDogZnVuY3Rpb24oKSB7DQogICAgICBpZiAodGhpcy5zZWxlY3RlZFBvcnRmb2xpbyAhPSBudWxsKSB7DQogICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkUG9ydGZvbGlvLmlkOw0KICAgICAgfSBlbHNlIGlmICh0aGlzLnBvcnRmb2xpbyl7DQogICAgICAgIHJldHVybiB0aGlzLnBvcnRmb2xpby5pZDsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiBudWxsDQogICAgICB9DQogICAgfSwNCiAgICBjYW5FZGl0KCkgew0KICAgICAgaWYgKHRoaXMuaXNQcmFjdGljZUFkbWluICYmIHRoaXMuaXNOb3RBRlNMTGltaXRlZCAmJiB0aGlzLmlzTm90TWFzdGVyVGVtcGxhdGUgKSB7DQogICAgICAgIHJldHVybiB0cnVlDQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgIH0NCiAgICB9LA0KICAgIGlzTm90TWFzdGVyVGVtcGxhdGUoKSB7DQogICAgICBpZiAodGhpcy5zZWxlY3RlZFBvcnRmb2xpby5pZCkgew0KICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFBvcnRmb2xpby50ZW1wbGF0ZSAmJiB0aGlzLnNlbGVjdGVkUG9ydGZvbGlvLm1hc3Rlcl90ZW1wbGF0ZSkgew0KICAgICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHJldHVybiB0cnVlDQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiB0cnVlDQogICAgICB9DQogICAgfSwNCiAgICBpc1ByYWN0aWNlQWRtaW4oKSB7DQogICAgICBpZiAodGhpcy5zZWxlY3RlZFBvcnRmb2xpby5pZCkgew0KICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFBvcnRmb2xpby5hY3RpdmVfcHJhY3RpY2VzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZFBvcnRmb2xpby5hY3RpdmVfcHJhY3RpY2VzLnNvbWUoaXRlbSA9PiB0aGlzLmFjdGl2ZVVzZXIuYWRtaW5fcHJhY3RpY2VzLmluY2x1ZGVzKGl0ZW0pKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICByZXR1cm4gdHJ1ZQ0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gdHJ1ZQ0KICAgICAgfQ0KICAgIH0sDQogICAgaXNOb3RBRlNMTGltaXRlZCgpIHsNCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkUG9ydGZvbGlvLmlkKSB7DQogICAgICAgIGlmICh0aGlzLl8uaXNFbXB0eSh0aGlzLnNlbGVjdGVkUG9ydGZvbGlvLmFmc2xzKSkgew0KICAgICAgICAgIHJldHVybiB0cnVlDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiB0cnVlDQogICAgICB9DQogICAgfSwNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGZpbHRlck9iamVjdChpdGVtLCBxdWVyeVRleHQpIHsNCiAgICAgICAgY29uc3QgdGV4dE9uZSA9IGl0ZW0ubmFtZS50b0xvd2VyQ2FzZSgpDQogICAgICAgIGNvbnN0IHNlYXJjaFRleHQgPSBxdWVyeVRleHQudG9Mb3dlckNhc2UoKQ0KDQogICAgICAgIGlmIChpdGVtLmNvZGUpIHsNCiAgICAgICAgICBjb25zdCB0ZXh0VHdvID0gaXRlbS5jb2RlLnRvTG93ZXJDYXNlKCkNCiAgICAgICAgICByZXR1cm4gdGV4dE9uZS5pbmRleE9mKHNlYXJjaFRleHQpID4gLTEgfHwNCiAgICAgICAgICAgIHRleHRUd28uaW5kZXhPZihzZWFyY2hUZXh0KSA+IC0xDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgcmV0dXJuIHRleHRPbmUuaW5kZXhPZihzZWFyY2hUZXh0KSA+IC0xDQogICAgICAgIH0NCiAgICB9LA0KICAgIGNoZWNrSGludCgpIHsNCiAgICAgIGlmICghdGhpcy5jaGVja0NvbXBsZXRlKCkpIHsNCiAgICAgICAgcmV0dXJuICJBbGxvY2F0aW9ucyBkbyBub3QgZXF1YWwgMTAwJSINCiAgICAgIH0NCiAgICB9LA0KICAgIGNoZWNrQ29tcGxldGUoKSB7DQogICAgICBsZXQgdmFsdWUgPSB0aGlzLmludmVzdG1lbnRzLnJlZHVjZSggZnVuY3Rpb24gKGEsYikgew0KICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChhKSArIHBhcnNlRmxvYXQoYi5wZXJjZW50YWdlKTsNCiAgICAgIH0sIDApOw0KICAgICAgaWYgKHZhbHVlLnRvRml4ZWQoNCkgPT09ICcxLjAwMDAnKSB7DQogICAgICAgIHJldHVybiB0cnVlDQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgIH0NCiAgICB9LA0KICAgIHVwZGF0ZVBvcnRmb2xpb05hbWUoKSB7DQogICAgICB0aGlzLmVkaXRQb3J0Zm9saW9OYW1lID0gIXRoaXMuZWRpdFBvcnRmb2xpb05hbWU7DQogICAgICBpZiAodGhpcy5uZXdQb3J0Zm9saW9OYW1lICE9ICcnKSB7DQogICAgICAgIGxldCBlbmRwb2ludCA9IGAvYXBpL3BvcnRmb2xpb3RlbXBsYXRlcy8ke3RoaXMuc2VsZWN0ZWRQb3J0Zm9saW8uaWR9L2A7DQogICAgICAgIGFwaVNlcnZpY2UoZW5kcG9pbnQsICJQQVRDSCIsIHsNCiAgICAgICAgICBuYW1lOiB0aGlzLm5ld1BvcnRmb2xpb05hbWUsDQogICAgICAgIH0pLnRoZW4oZGF0YSA9PiB7DQogICAgICAgICAgdGhpcy5zZWxlY3RlZFBvcnRmb2xpbyA9IGRhdGE7DQogICAgICAgICAgdGhpcy5uZXdQb3J0Zm9saW9OYW1lID0gIiI7DQogICAgICAgICAgY29uc3QgaSA9IHRoaXMucG9ydGZvbGlvcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmlkID09PSBkYXRhLmlkKTsNCiAgICAgICAgICB0aGlzLnBvcnRmb2xpb3Muc3BsaWNlKGksMCxkYXRhKTsNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfSwNCiAgICBhZGRQb3J0Zm9saW8oZGF0YSl7DQogICAgICB0aGlzLnNlbGVjdGVkUG9ydGZvbGlvID0gZGF0YTsNCiAgICAgIHRoaXMuZ2V0UG9ydGZvbGlvcygpOw0KICAgIH0sDQogICAgZGVsZXRlSW52ZXN0bWVudChkYXRhKSB7DQogICAgICAvLyBSZW1vdmVzIGl0ZW0gZnJvbSB0aGUgaW52ZXN0bWVudCBsaXN0DQogICAgICBjb25zdCBkZWxldGVkSW5kZXggPSB0aGlzLmludmVzdG1lbnRzLmZpbmRJbmRleChpdGVtID0+IGl0ZW0uaWQgPT09IGRhdGEuaWQpOw0KICAgICAgdGhpcy4kZGVsZXRlKHRoaXMuaW52ZXN0bWVudHMsIGRlbGV0ZWRJbmRleCkNCg0KICAgICAgLy8gUmVtb3ZlcyBpdGVtIGZyb20gdGhlIGNoYW5nZWQgbGlzdCAoaWYgaXQncyBpbiBpdCkNCiAgICAgIGNvbnN0IGRlbGV0ZWRDaGFuZ2VkSW5kZXggPSB0aGlzLmNoYW5nZUxpc3QuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5pZCA9PT0gZGF0YS5pZCk7DQogICAgICBpZiAoZGVsZXRlZENoYW5nZWRJbmRleCA+PSAwKSB7DQogICAgICAgIHRoaXMuJGRlbGV0ZSh0aGlzLmNoYW5nZUxpc3QsIGRlbGV0ZWRDaGFuZ2VkSW5kZXgpDQogICAgICB9DQogICAgfSwNCiAgICBkZWxldGVQb3J0Zm9saW8oZGF0YSkgew0KICAgICAgY29uc3QgaSA9IHRoaXMucG9ydGZvbGlvcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmlkID09PSBkYXRhLmlkKTsNCiAgICAgIHRoaXMuJGRlbGV0ZSh0aGlzLnBvcnRmb2xpb3MsaSkNCiAgICAgIHRoaXMuaW52ZXN0bWVudHMgPSBbXTsNCiAgICB9LA0KICAgIHNldFBlcmNlbnRhZ2UoZXZlbnQsIGludmVzdG1lbnQpIHsNCiAgICAgIGlmIChpbnZlc3RtZW50LmlkKSB7DQogICAgICAgIC8vZm9yIGV4aXN0aW5nIGludmVzdG1lbnRzDQogICAgICAgIGNvbnN0IGkgPSB0aGlzLmludmVzdG1lbnRzLmZpbmRJbmRleChpdGVtID0+IGl0ZW0uaWQgPT09IGludmVzdG1lbnQuaWQpOw0KICAgICAgICB0aGlzLmludmVzdG1lbnRzW2ldLnBlcmNlbnRhZ2UgPSAoZXZlbnQvMTAwKS50b0ZpeGVkKDQpOw0KICAgICAgfSBlbHNlIGlmIChpbnZlc3RtZW50LnBlcmNlbnRhZ2UpIHsNCiAgICAgICAgLy9mb3IgbmV3IGludmVzdG1lbnRzIHRoYXQgaGF2ZSBhIHBlcmNlbnRhZ2UgcHJvcGVydHkNCiAgICAgICAgdGhpcy5uZXdJbnZlc3RtZW50LnBlcmNlbnRhZ2UgPSAoZXZlbnQvMTAwKS50b0ZpeGVkKDQpDQogICAgICB9IGVsc2Ugew0KICAgICAgICAvL2ZvciBuZXcgaW52ZXN0bWVudHMNCiAgICAgICAgdGhpcy4kc2V0KHRoaXMubmV3SW52ZXN0bWVudCwgJ3BlcmNlbnRhZ2UnLCAoZXZlbnQvMTAwKS50b0ZpeGVkKDQpKQ0KICAgICAgfQ0KICAgIH0sDQogICAgZ2V0UGVyY2VudGFnZShpbnZlc3RtZW50KSB7DQogICAgICBpZiAoaW52ZXN0bWVudC5wZXJjZW50YWdlKSB7DQogICAgICAgIHJldHVybiAoaW52ZXN0bWVudC5wZXJjZW50YWdlKjEwMCkudG9GaXhlZCgyKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiBudWxsDQogICAgICB9DQogICAgfSwNCiAgICBhZGRUb0NoYW5nZWQoaW52ZXN0bWVudCkgew0KICAgICAgaWYgKCEodGhpcy5jaGFuZ2VMaXN0LmluY2x1ZGVzKGludmVzdG1lbnQpKSkgew0KICAgICAgICB0aGlzLmNoYW5nZUxpc3QucHVzaChpbnZlc3RtZW50KTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGNvbnN0IGkgPSB0aGlzLmNoYW5nZUxpc3QuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5pZCA9PT0gaW52ZXN0bWVudC5pZCk7DQogICAgICAgIHRoaXMuY2hhbmdlTGlzdC5zcGxpY2UoaSwgMSk7DQogICAgICAgIHRoaXMuY2hhbmdlTGlzdC5wdXNoKGludmVzdG1lbnQpOw0KICAgICAgfQ0KICAgIH0sDQogICAgZ2V0UG9ydGZvbGlvcygpIHsNCiAgICAgIGxldCBlbmRwb2ludCA9IGAvYXBpL3BvcnRmb2xpb3RlbXBsYXRlcy9gOw0KICAgICAgYXBpU2VydmljZShlbmRwb2ludCkudGhlbihkYXRhID0+IHsNCiAgICAgICAgdGhpcy5wb3J0Zm9saW9zID0gZGF0YS5yZXN1bHRzOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBnZXRJbnZlc3RtZW50cygpIHsNCiAgICAgIGlmICh0aGlzLnBvcnRmb2xpb0lEICE9IG51bGwpIHsNCiAgICAgICAgbGV0IGVuZHBvaW50ID0gYC9hcGkvcG9ydGZvbGlvdGVtcGxhdGVzLyR7dGhpcy5wb3J0Zm9saW9JRH0vaW52ZXN0bWVudHMvYDsNCiAgICAgICAgYXBpU2VydmljZShlbmRwb2ludCkudGhlbihkYXRhID0+IHsNCiAgICAgICAgICB0aGlzLmludmVzdG1lbnRzID0gZGF0YS5yZXN1bHRzOw0KICAgICAgICB9KTsNCiAgICAgIH07DQogICAgfSwNCiAgICBhZGRJbnZlc3RtZW50KCkgew0KICAgICAgaWYgKHRoaXMuJHJlZnMuYWRkRm9ybS52YWxpZGF0ZSgpKSB7DQogICAgICAgIHRoaXMuaXNTYXZpbmcgPSB0cnVlOw0KICAgICAgICAvLyBTZXQgYmxhbmsgcGVyY2VudGFnZXMgdG8gemVyby4NCiAgICAgICAgaWYgKCF0aGlzLm5ld0ludmVzdG1lbnQucGVyY2VudGFnZSkgew0KICAgICAgICAgIHRoaXMubmV3SW52ZXN0bWVudC5wZXJjZW50YWdlID0gMDsNCiAgICAgICAgfQ0KICAgICAgICBsZXQgZW5kcG9pbnQgPSBgL2FwaS9wb3J0Zm9saW90ZW1wbGF0ZXMvJHt0aGlzLnBvcnRmb2xpb0lEfS9pbnZlc3RtZW50cy9gOw0KICAgICAgICBhcGlTZXJ2aWNlKGVuZHBvaW50LCAiUE9TVCIsIHsNCiAgICAgICAgICBpbnZlc3RtZW50X25hbWVfaWQ6IHRoaXMubmV3SW52ZXN0bWVudC5pbnZlc3RtZW50X25hbWUsDQogICAgICAgICAgcG9ydGZvbGlvOiB0aGlzLnBvcnRmb2xpb0lELA0KICAgICAgICAgIHBlcmNlbnRhZ2U6IHRoaXMubmV3SW52ZXN0bWVudC5wZXJjZW50YWdlLA0KICAgICAgICB9KS50aGVuKGRhdGEgPT4gew0KICAgICAgICAgIHRoaXMuaW52ZXN0bWVudHMudW5zaGlmdChkYXRhKTsNCiAgICAgICAgICB0aGlzLm5ld0ludmVzdG1lbnQuaW52ZXN0bWVudF9uYW1lID0gbnVsbDsNCiAgICAgICAgICB0aGlzLm5ld0ludmVzdG1lbnQucGVyY2VudGFnZSA9IG51bGw7DQogICAgICAgICAgdGhpcy5pc1NhdmluZyA9IGZhbHNlOw0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIG9uU3VibWl0KCkgew0KICAgICAgLy8gSWYgdGhlcmUgaXMgYSBuZXcgaXRlbSBpbiB0aGUgYWRkIHJvdywgYWRkIGl0IHRvby4NCiAgICAgIGlmICh0aGlzLm5ld0ludmVzdG1lbnQuaW52ZXN0bWVudF9uYW1lKSB7DQogICAgICAgIHRoaXMuYWRkSW52ZXN0bWVudCgpOw0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMuY2hhbmdlTGlzdCAmJiB0aGlzLiRyZWZzLm1haW5Gb3JtLnZhbGlkYXRlKCkpIHsNCiAgICAgICAgZm9yIChsZXQgaT0wOyBpIDwgdGhpcy5jaGFuZ2VMaXN0Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgbGV0IGVuZHBvaW50ID0gYC9hcGkvcG9ydGZvbGlvdGVtcGxhdGVzLyR7dGhpcy5wb3J0Zm9saW9JRH0vaW52ZXN0bWVudHMvJHt0aGlzLmNoYW5nZUxpc3RbaV0uaWR9L2A7DQogICAgICAgICAgYXBpU2VydmljZShlbmRwb2ludCwgIlBBVENIIiwgew0KICAgICAgICAgICAgaW52ZXN0bWVudF9uYW1lX2lkOiB0aGlzLmNoYW5nZUxpc3RbaV0uaW52ZXN0bWVudF9uYW1lLmlkLA0KICAgICAgICAgICAgcG9ydGZvbGlvOiB0aGlzLnBvcnRmb2xpb0lELA0KICAgICAgICAgICAgcGVyY2VudGFnZTogdGhpcy5jaGFuZ2VMaXN0W2ldLnBlcmNlbnRhZ2UsDQogICAgICAgICAgfSkNCiAgICAgICAgfTsNCiAgICAgIH07DQogICAgfSwNCiAgICBnZXRJbnZlc3RtZW50TmFtZXMoKSB7DQogICAgICBpZiAodGhpcy5fLmlzRW1wdHkodGhpcy5pbnZlc3RtZW50TmFtZXMpKSB7DQogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKElOVkVTVE1FTlROQU1FX0FMTCkNCiAgICAgIH0NCiAgICB9LA0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMuZ2V0SW52ZXN0bWVudE5hbWVzKCk7DQogICAgdGhpcy5nZXRQb3J0Zm9saW9zKCk7DQogICAgdGhpcy5nZXRJbnZlc3RtZW50cygpOw0KICB9DQp9Ow0K"},{"version":3,"sources":["PortfolioTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PortfolioTable.vue","sourceRoot":"src/components","sourcesContent":["<template lang=\"html\">\r\n  <v-container>\r\n    <v-row\r\n      align=\"center\"\r\n      :class=\"(canEdit && !_.isEmpty(selectedPortfolio)) ? 'my-3' : '' \">\r\n      <v-col\r\n      :cols=\"10\">\r\n        <v-select\r\n          v-if=\"!editPortfolioName\"\r\n          :items=\"portfolios\"\r\n          item-text=\"name\"\r\n          return-object\r\n          v-model=\"selectedPortfolio\"\r\n          label=\"Model Portfolio Name\"\r\n          placeholder=\"Select a Model Portfolio\"\r\n          outlined dense hide-details=\"auto\">\r\n          <template v-slot:append-outer v-if=\"canEdit && portfolioIsSelected\">\r\n            <v-icon\r\n              v-if=\"!editPortfolioName\"\r\n              color=\"green\" icon\r\n              @click=\"editPortfolioName = !editPortfolioName\">mdi-pencil-circle</v-icon>\r\n          </template>\r\n          <template v-slot:append-outer v-else-if=\"!canEdit && portfolioIsSelected\">\r\n            <v-tooltip bottom>\r\n               <template v-slot:activator=\"{ on }\">\r\n                  <v-icon\r\n                    v-on='on'\r\n                    color=\"teal\" icon\r\n                    >mdi-lock</v-icon>\r\n              </template>\r\n              <span>{{lockMessage}}</span>\r\n            </v-tooltip>\r\n          </template>\r\n        </v-select>\r\n        <v-text-field\r\n          v-else\r\n          :value=\"selectedPortfolio.name\"\r\n          @change=\"newPortfolioName = $event\"\r\n          dense outlined\r\n          hide-details='auto'>\r\n          <template v-slot:append-outer v-if=\"canEdit\">\r\n            <v-icon\r\n              v-if=\"editPortfolioName\"\r\n              color=\"teal\" icon\r\n              @click=\"updatePortfolioName()\">mdi-check-circle</v-icon>\r\n          </template>\r\n        </v-text-field>\r\n      </v-col>\r\n      <v-divider vertical inset class=\"mt-0\"/>\r\n      <v-col\r\n        :cols=\"1\">\r\n        <v-container class=\"flex d-flex pa-0\">\r\n          <AddPortfolioName\r\n            @add-portfolio=\"addPortfolio\"/>\r\n          <v-spacer />\r\n          <v-btn icon>\r\n            <DeleteObj\r\n              v-if=\"canEdit\"\r\n              :objectType=\"'model portfolio'\"\r\n              :objectToDelete=\"selectedPortfolio\"\r\n              @delete-object=\"deletePortfolio($event)\"\r\n            />\r\n          </v-btn>\r\n        </v-container>\r\n      </v-col>\r\n    </v-row>\r\n    <v-divider v-if=\"canEdit && !_.isEmpty(selectedPortfolio)\" class=\"mt-1 mb-4\"/>\r\n    <v-form ref=\"addForm\">\r\n      <v-row\r\n        dense\r\n        v-if=\"canEdit && !_.isEmpty(selectedPortfolio)\">\r\n        <v-col\r\n          :cols=\"9\">\r\n          <v-autocomplete\r\n            v-model=\"newInvestment.investment_name\"\r\n            :items=\"investmentNames\"\r\n            item-text=\"name\"\r\n            item-value=\"id\"\r\n            outlined dense\r\n            :rules=\"[v => !!(v) || 'Select a name from the dropdown']\"\r\n            validate-on-blur\r\n            hide-details=\"auto\"\r\n            :filter=\"filterObject\"\r\n            label=\"Investment Name\"\r\n            placeholder=\"Add an investment by typing a name\">\r\n            <template v-slot:item='{ item }'>\r\n              <v-list-item-content class=\"pr-2\">\r\n                <v-list-item-title v-text=\"item.name\"></v-list-item-title>\r\n              </v-list-item-content>\r\n              <v-spacer></v-spacer>\r\n              <v-chip v-if=\"item.code\" right outlined>\r\n                {{ item.code }}\r\n              </v-chip>\r\n            </template>\r\n          </v-autocomplete>\r\n        </v-col>\r\n        <v-col\r\n          :cols=\"3\">\r\n            <v-text-field\r\n              placeholder=\"Percentage\"\r\n              type=\"number\"\r\n              :value = \"getPercentage(newInvestment)\"\r\n              @blur = \"setPercentage($event.target.value, newInvestment)\"\r\n              outlined dense\r\n              hide-details=\"auto\"\r\n              :rules=\"$rulePercTo100\"\r\n              suffix=\"%\">\r\n              <template v-slot:append-outer v-if=\"canEdit\">\r\n                <v-slide-x-reverse-transition\r\n                   mode=\"out-in\"\r\n                   >\r\n                  <v-icon color=\"teal\"\r\n                    @click=\"addInvestment()\"\r\n                    :key=\"`icon-${isSaving}`\">\r\n                    mdi-plus\r\n                  </v-icon>\r\n                </v-slide-x-reverse-transition>\r\n              </template>\r\n            </v-text-field>\r\n        </v-col>\r\n      </v-row>\r\n    </v-form>\r\n    <v-form ref=\"mainForm\">\r\n      <v-row\r\n        v-for=\"investment in investments\"\r\n        :key=\"investment.id\"\r\n        dense>\r\n        <v-col\r\n          :cols=\"9\">\r\n            <v-autocomplete\r\n              v-model=\"investment.investment_name\"\r\n              :items=\"investmentNames\"\r\n              item-value=\"id\"\r\n              item-text=\"name\"\r\n              @change=\"addToChanged(investment)\"\r\n              :filter=\"filterObject\"\r\n              outlined dense\r\n              :rules=\"[v => !!(v) || 'Select a name from the dropdown']\"\r\n              validate-on-blur\r\n              hide-details=\"auto\">\r\n              <template v-slot:item='{ item }'>\r\n                <v-list-item-content class=\"pr-2\">\r\n                  <v-list-item-title v-text=\"item.name\"></v-list-item-title>\r\n                </v-list-item-content>\r\n                <v-spacer></v-spacer>\r\n                <v-chip v-if=\"item.code\" right outlined>\r\n                  {{ item.code }}\r\n                </v-chip>\r\n              </template>\r\n            </v-autocomplete>\r\n        </v-col>\r\n        <v-col\r\n          :cols=\"3\">\r\n          <v-text-field\r\n            placeholder=\"Percentage\"\r\n            type=\"number\"\r\n            :value = \"getPercentage(investment)\"\r\n            @blur = \"setPercentage($event.target.value, investment)\"\r\n            @change = \"addToChanged(investment)\"\r\n            dense outlined\r\n            hide-details=\"auto\"\r\n            :rules=\"$rulePercTo100\"\r\n            suffix=\"%\">\r\n            <template v-slot:append-outer v-if=\"canEdit\">\r\n              <DeleteObj\r\n                v-if=\"canEdit\"\r\n                :objectType=\"'modelInvestment'\"\r\n                :objectToDelete=\"investment\"\r\n                :portfolioID=\"portfolioID\"\r\n                @delete-object=\"deleteInvestment($event)\"\r\n                v-on=\"$listeners\"\r\n              />\r\n            </template>\r\n          </v-text-field>\r\n        </v-col>\r\n      </v-row>\r\n    </v-form>\r\n    <v-divider class=\"mt-4\" v-if=\"canEdit && !_.isEmpty(selectedPortfolio)\" />\r\n    <v-row v-if=\"investments.length && canEdit\">\r\n      <v-col>\r\n        <v-tooltip bottom v-if=\"checkHint()\">\r\n          <template v-slot:activator=\"{ on }\">\r\n            <v-icon v-on=\"on\" color=\"red\" large>\r\n              mdi-alert-rhombus-outline\r\n            </v-icon>\r\n          </template>\r\n          {{ checkHint()}}\r\n        </v-tooltip>\r\n        <span style=\"color: red\">\r\n          {{ checkHint() }}\r\n        </span>\r\n      </v-col>\r\n      <v-spacer />\r\n      <v-col class=\"text-right\">\r\n\r\n        <v-btn text @click=\"onSubmit\" color=\"primary\" dark dense>Update All</v-btn>\r\n      </v-col>\r\n    </v-row>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { apiService } from \"@/common/api.service.js\";\r\nimport AddPortfolioName from \"@/components/AddPortfolioName.vue\";\r\nimport DeleteObj from \"@/components/DeleteObj.vue\";\r\nimport { rulePercTo100 } from \"@/components/mixins/Rules.js\";\r\nimport { mapGetters } from \"vuex\";\r\nimport {\r\n  INVESTMENTNAME_ALL,\r\n} from \"@/store/actions.type\";\r\n\r\nexport default {\r\n  name: \"PortfolioTable\",\r\n  mixins: [rulePercTo100],\r\n  props: {\r\n    portfolio: {\r\n      type: Object,\r\n      required: false,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      isSaving: false,\r\n      search: null,\r\n      selectedPortfolio: {},\r\n      investments: [],\r\n      active: false,\r\n      error: null,\r\n      portfolios: [],\r\n      changeList: [],\r\n      newInvestment: {},\r\n      editPortfolioName: false,\r\n      newPortfolioName: '',\r\n    };\r\n  },\r\n  components: {\r\n    DeleteObj,\r\n    AddPortfolioName,\r\n  },\r\n  watch: {\r\n    portfolio: function () {\r\n      this.getInvestments();\r\n    },\r\n    selectedPortfolio: function () {\r\n      this.getInvestments();\r\n    },\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"activeUser\", \"investmentNames\"]),\r\n    portfolioIsSelected() {\r\n      return !this._.isEmpty(this.selectedPortfolio);\r\n    },\r\n    lockMessage() {\r\n      let msg = '';\r\n      if (!this.isNotAFSLLimited) {\r\n        msg += 'You cannot edit AFSL Model Portfolios'\r\n      }\r\n      else if (!this.isPracticeAdmin) {\r\n        msg += 'You are not an admin of this Practice'\r\n      }\r\n      else if (!this.isNotMasterTemplate) {\r\n        msg += 'You cannot edit this Model Portfolio'\r\n      }\r\n      return msg\r\n    },\r\n    portfolioID: function() {\r\n      if (this.selectedPortfolio != null) {\r\n        return this.selectedPortfolio.id;\r\n      } else if (this.portfolio){\r\n        return this.portfolio.id;\r\n      } else {\r\n        return null\r\n      }\r\n    },\r\n    canEdit() {\r\n      if (this.isPracticeAdmin && this.isNotAFSLLimited && this.isNotMasterTemplate ) {\r\n        return true\r\n      } else {\r\n        return false\r\n      }\r\n    },\r\n    isNotMasterTemplate() {\r\n      if (this.selectedPortfolio.id) {\r\n        if (this.selectedPortfolio.template && this.selectedPortfolio.master_template) {\r\n          return false\r\n        } else {\r\n          return true\r\n        }\r\n      } else {\r\n        return true\r\n      }\r\n    },\r\n    isPracticeAdmin() {\r\n      if (this.selectedPortfolio.id) {\r\n        if (this.selectedPortfolio.active_practices.length > 0) {\r\n          return this.selectedPortfolio.active_practices.some(item => this.activeUser.admin_practices.includes(item));\r\n        } else {\r\n          return true\r\n        }\r\n      } else {\r\n        return true\r\n      }\r\n    },\r\n    isNotAFSLLimited() {\r\n      if (this.selectedPortfolio.id) {\r\n        if (this._.isEmpty(this.selectedPortfolio.afsls)) {\r\n          return true\r\n        } else {\r\n          return false\r\n        }\r\n      } else {\r\n        return true\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    filterObject(item, queryText) {\r\n        const textOne = item.name.toLowerCase()\r\n        const searchText = queryText.toLowerCase()\r\n\r\n        if (item.code) {\r\n          const textTwo = item.code.toLowerCase()\r\n          return textOne.indexOf(searchText) > -1 ||\r\n            textTwo.indexOf(searchText) > -1\r\n        } else {\r\n          return textOne.indexOf(searchText) > -1\r\n        }\r\n    },\r\n    checkHint() {\r\n      if (!this.checkComplete()) {\r\n        return \"Allocations do not equal 100%\"\r\n      }\r\n    },\r\n    checkComplete() {\r\n      let value = this.investments.reduce( function (a,b) {\r\n        return parseFloat(a) + parseFloat(b.percentage);\r\n      }, 0);\r\n      if (value.toFixed(4) === '1.0000') {\r\n        return true\r\n      } else {\r\n        return false\r\n      }\r\n    },\r\n    updatePortfolioName() {\r\n      this.editPortfolioName = !this.editPortfolioName;\r\n      if (this.newPortfolioName != '') {\r\n        let endpoint = `/api/portfoliotemplates/${this.selectedPortfolio.id}/`;\r\n        apiService(endpoint, \"PATCH\", {\r\n          name: this.newPortfolioName,\r\n        }).then(data => {\r\n          this.selectedPortfolio = data;\r\n          this.newPortfolioName = \"\";\r\n          const i = this.portfolios.findIndex(item => item.id === data.id);\r\n          this.portfolios.splice(i,0,data);\r\n        });\r\n      }\r\n    },\r\n    addPortfolio(data){\r\n      this.selectedPortfolio = data;\r\n      this.getPortfolios();\r\n    },\r\n    deleteInvestment(data) {\r\n      // Removes item from the investment list\r\n      const deletedIndex = this.investments.findIndex(item => item.id === data.id);\r\n      this.$delete(this.investments, deletedIndex)\r\n\r\n      // Removes item from the changed list (if it's in it)\r\n      const deletedChangedIndex = this.changeList.findIndex(item => item.id === data.id);\r\n      if (deletedChangedIndex >= 0) {\r\n        this.$delete(this.changeList, deletedChangedIndex)\r\n      }\r\n    },\r\n    deletePortfolio(data) {\r\n      const i = this.portfolios.findIndex(item => item.id === data.id);\r\n      this.$delete(this.portfolios,i)\r\n      this.investments = [];\r\n    },\r\n    setPercentage(event, investment) {\r\n      if (investment.id) {\r\n        //for existing investments\r\n        const i = this.investments.findIndex(item => item.id === investment.id);\r\n        this.investments[i].percentage = (event/100).toFixed(4);\r\n      } else if (investment.percentage) {\r\n        //for new investments that have a percentage property\r\n        this.newInvestment.percentage = (event/100).toFixed(4)\r\n      } else {\r\n        //for new investments\r\n        this.$set(this.newInvestment, 'percentage', (event/100).toFixed(4))\r\n      }\r\n    },\r\n    getPercentage(investment) {\r\n      if (investment.percentage) {\r\n        return (investment.percentage*100).toFixed(2);\r\n      } else {\r\n        return null\r\n      }\r\n    },\r\n    addToChanged(investment) {\r\n      if (!(this.changeList.includes(investment))) {\r\n        this.changeList.push(investment);\r\n      } else {\r\n        const i = this.changeList.findIndex(item => item.id === investment.id);\r\n        this.changeList.splice(i, 1);\r\n        this.changeList.push(investment);\r\n      }\r\n    },\r\n    getPortfolios() {\r\n      let endpoint = `/api/portfoliotemplates/`;\r\n      apiService(endpoint).then(data => {\r\n        this.portfolios = data.results;\r\n      });\r\n    },\r\n    getInvestments() {\r\n      if (this.portfolioID != null) {\r\n        let endpoint = `/api/portfoliotemplates/${this.portfolioID}/investments/`;\r\n        apiService(endpoint).then(data => {\r\n          this.investments = data.results;\r\n        });\r\n      };\r\n    },\r\n    addInvestment() {\r\n      if (this.$refs.addForm.validate()) {\r\n        this.isSaving = true;\r\n        // Set blank percentages to zero.\r\n        if (!this.newInvestment.percentage) {\r\n          this.newInvestment.percentage = 0;\r\n        }\r\n        let endpoint = `/api/portfoliotemplates/${this.portfolioID}/investments/`;\r\n        apiService(endpoint, \"POST\", {\r\n          investment_name_id: this.newInvestment.investment_name,\r\n          portfolio: this.portfolioID,\r\n          percentage: this.newInvestment.percentage,\r\n        }).then(data => {\r\n          this.investments.unshift(data);\r\n          this.newInvestment.investment_name = null;\r\n          this.newInvestment.percentage = null;\r\n          this.isSaving = false;\r\n        });\r\n      }\r\n    },\r\n    onSubmit() {\r\n      // If there is a new item in the add row, add it too.\r\n      if (this.newInvestment.investment_name) {\r\n        this.addInvestment();\r\n      }\r\n      if (this.changeList && this.$refs.mainForm.validate()) {\r\n        for (let i=0; i < this.changeList.length; i++) {\r\n          let endpoint = `/api/portfoliotemplates/${this.portfolioID}/investments/${this.changeList[i].id}/`;\r\n          apiService(endpoint, \"PATCH\", {\r\n            investment_name_id: this.changeList[i].investment_name.id,\r\n            portfolio: this.portfolioID,\r\n            percentage: this.changeList[i].percentage,\r\n          })\r\n        };\r\n      };\r\n    },\r\n    getInvestmentNames() {\r\n      if (this._.isEmpty(this.investmentNames)) {\r\n        this.$store.dispatch(INVESTMENTNAME_ALL)\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.getInvestmentNames();\r\n    this.getPortfolios();\r\n    this.getInvestments();\r\n  }\r\n};\r\n</script>\r\n"]}]}