{"remainingRequest":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\components\\RiskProfileTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\components\\RiskProfileTable.vue","mtime":1585623161856},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBhcGlTZXJ2aWNlIH0gZnJvbSAiQC9jb21tb24vYXBpLnNlcnZpY2UuanMiOw0KaW1wb3J0IEFBTmFtZUNvbmZpZyBmcm9tICJAL2NvbXBvbmVudHMvQUFOYW1lQ29uZmlnLnZ1ZSI7DQppbXBvcnQgRGVsZXRlT2JqIGZyb20gIkAvY29tcG9uZW50cy9EZWxldGVPYmoudnVlIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiUmlza1Byb2ZpbGVUYWJsZSIsDQogIHByb3BzOiB7DQogICAgUlBHcm91cElEOiB7DQogICAgICB0eXBlOiBOdW1iZXIsDQogICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICB9LA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICByaXNrUHJvZmlsZXM6IFtdLA0KICAgICAgUlBBQU5hbWVzOiBbXSwNCiAgICAgIGVycm9yOiBudWxsLA0KICAgICAgY2hhbmdlTGlzdDogW10sDQogICAgICBuZXdSUDogew0KICAgICAgICBuYW1lOiIiLA0KICAgICAgICBvcmRlcjpudWxsLA0KICAgICAgICBhbGxvY2F0aW9uczp7fSwNCiAgICAgIH0sDQogICAgfTsNCiAgfSwNCiAgY29tcG9uZW50czogew0KICAgIEFBTmFtZUNvbmZpZywNCiAgICBEZWxldGVPYmosDQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgbmFtZVNldDogZnVuY3Rpb24gKCl7DQogICAgICBsZXQgQUFOYW1lTGlzdCA9IFtdOw0KICAgICAgbGV0IGNoZWNrTGlzdCA9IFtdDQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuUlBBQU5hbWVzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGxldCBmb3VuZCA9IGZhbHNlOw0KICAgICAgICBsZXQgYWFOYW1lID0gdGhpcy5SUEFBTmFtZXNbaV07DQogICAgICAgICAgaWYgKGNoZWNrTGlzdC5pbmNsdWRlcyhhYU5hbWUuY3VzdG9tX25hbWUpKSB7DQogICAgICAgICAgICBmb3VuZCA9IHRydWU7DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmICghZm91bmQpIHsNCiAgICAgICAgICAgIGxldCBuZXdBQSA9IHt9Ow0KICAgICAgICAgICAgbmV3QUFbYWFOYW1lLmlkXSA9IGFhTmFtZS5jdXN0b21fbmFtZTsNCiAgICAgICAgICAgIEFBTmFtZUxpc3QucHVzaChuZXdBQSk7DQogICAgICAgICAgICBmb3VuZCA9IGZhbHNlOw0KICAgICAgICAgICAgY2hlY2tMaXN0LnB1c2goYWFOYW1lLmN1c3RvbV9uYW1lKTsNCiAgICAgICAgICB9DQogICAgICB9DQogICAgICByZXR1cm4gKEFBTmFtZUxpc3QpDQogICAgfQ0KICB9LA0KICB3YXRjaDogew0KICAgIFJQR3JvdXBJRDogZnVuY3Rpb24gKCkgew0KICAgICAgdGhpcy5nZXRSUEFBTmFtZURhdGEoKTsNCiAgICAgIHRoaXMuZ2V0Umlza1Byb2ZpbGVzKCk7DQogICAgfSwNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGFkZFRvQ2hhbmdlZChwcm9maWxlKSB7DQogICAgICBpZiAoISh0aGlzLmNoYW5nZUxpc3QuaW5jbHVkZXMocHJvZmlsZSkpKSB7DQogICAgICAgIHRoaXMuY2hhbmdlTGlzdC5wdXNoKHByb2ZpbGUpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgY29uc3QgaSA9IHRoaXMuY2hhbmdlTGlzdC5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmlkID09PSBwcm9maWxlLmlkKTsNCiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0LnNwbGljZShpLCAxKTsNCiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0LnB1c2gocHJvZmlsZSk7DQogICAgICB9DQogICAgfSwNCiAgICBzZXRBQVBlcmNlbnRhZ2UoZXZlbnQsIEFBTmFtZSwgcmlza1Byb2ZpbGUpIHsNCiAgICAgIGNvbnN0IGkgPSB0aGlzLnJpc2tQcm9maWxlcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmlkID09PSByaXNrUHJvZmlsZS5pZCk7DQogICAgICBjb25zdCBhYUlEID0gT2JqZWN0LmtleXMoQUFOYW1lKVswXTsNCiAgICAgIGxldCBmb3VuZCA9IGZhbHNlOw0KICAgICAgZm9yIChsZXQgeD0wOyB4IDwgdGhpcy5yaXNrUHJvZmlsZXNbaV0uYWxsb2NhdGlvbnMubGVuZ3RoOyB4Kyspew0KICAgICAgICBmb3VuZCA9IGZhbHNlOw0KICAgICAgICAgIGlmICh0aGlzLnJpc2tQcm9maWxlc1tpXS5hbGxvY2F0aW9uc1t4XS5uYW1lLmlkID09IGFhSUQpIHsNCiAgICAgICAgICAgIC8vIGV2ZW50ID0gZXZlbnQuc3BsaXQoIiUiKS5wb3AoKTsNCiAgICAgICAgICAgIHRoaXMucmlza1Byb2ZpbGVzW2ldLmFsbG9jYXRpb25zW3hdLnBlcmNlbnRhZ2UgPSBldmVudC8xMDA7DQogICAgICAgICAgICBmb3VuZCA9IHRydWU7DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgICB9DQogICAgICB9DQogICAgICBpZiAoIWZvdW5kKSB7DQogICAgICAgIGxldCBuZXdBbGxvY2F0aW9uID0ge30NCiAgICAgICAgbmV3QWxsb2NhdGlvbi5uYW1lID0ge30NCiAgICAgICAgbmV3QWxsb2NhdGlvbi5uYW1lLmlkID0gYWFJRDsNCiAgICAgICAgbmV3QWxsb2NhdGlvbi5wZXJjZW50YWdlID0gZXZlbnQvMTAwOw0KICAgICAgICBuZXdBbGxvY2F0aW9uLnJpc2twcm9maWxlID0gcmlza1Byb2ZpbGUuaWQ7DQogICAgICAgIG5ld0FsbG9jYXRpb24uaWQgPSBudWxsOw0KICAgICAgICB0aGlzLnJpc2tQcm9maWxlc1tpXS5hbGxvY2F0aW9ucy5wdXNoKG5ld0FsbG9jYXRpb24pOw0KICAgICAgfQ0KICAgIH0sDQogICAgZ2V0QUFQZXJjZW50YWdlKEFBTmFtZSwgcmlza1Byb2ZpbGUpIHsNCiAgICAgIGxldCBwZXJjZW50YWdlID0gMA0KICAgICAgZm9yIChsZXQgaT0wOyBpIDwgcmlza1Byb2ZpbGUuYWxsb2NhdGlvbnMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgaWYgKHJpc2tQcm9maWxlLmFsbG9jYXRpb25zW2ldLm5hbWUuY3VzdG9tX25hbWUgPT0gT2JqZWN0LnZhbHVlcyhBQU5hbWUpWzBdKSB7DQogICAgICAgICAgcGVyY2VudGFnZSArPSByaXNrUHJvZmlsZS5hbGxvY2F0aW9uc1tpXS5wZXJjZW50YWdlOw0KICAgICAgICB9DQogICAgICB9DQogICAgICByZXR1cm4gKHBlcmNlbnRhZ2UqMTAwKQ0KICAgIH0sDQogICAgZ2V0Umlza1Byb2ZpbGVzKCkgew0KICAgICAgbGV0IGVuZHBvaW50ID0gYC9hcGkvcmlza3Byb2ZpbGVncm91cHMvJHt0aGlzLlJQR3JvdXBJRH0vcmlza3Byb2ZpbGVzL2A7DQogICAgICBhcGlTZXJ2aWNlKGVuZHBvaW50KS50aGVuKGRhdGEgPT4gew0KICAgICAgICB0aGlzLnJpc2tQcm9maWxlcyA9IGRhdGEucmVzdWx0czsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgZ2V0UlBBQU5hbWVEYXRhKCkgew0KICAgICAgbGV0IGVuZHBvaW50ID0gYC9hcGkvYWN0aXZlcmlza3Byb2ZpbGVuYW1lcy9gOw0KICAgICAgYXBpU2VydmljZShlbmRwb2ludCkudGhlbihkYXRhID0+IHsNCiAgICAgICAgdGhpcy5SUEFBTmFtZXMgPSBkYXRhLnJlc3VsdHM7DQogICAgICB9KTsNCiAgICB9LA0KICAgIGFkZFJQKCkgew0KICAgICAgaWYgKHRoaXMubmV3UlAubmFtZSkgew0KICAgICAgICBsZXQgZW5kcG9pbnQgPSBgL2FwaS9yaXNrcHJvZmlsZWdyb3Vwcy8ke3RoaXMuUlBHcm91cElEfS9yaXNrcHJvZmlsZXMvYDsNCiAgICAgICAgYXBpU2VydmljZShlbmRwb2ludCwgIlBPU1QiLCB7DQogICAgICAgICAgbmFtZTogdGhpcy5uZXdSUC5uYW1lLA0KICAgICAgICAgIGdyb3VwOiB0aGlzLlJQR3JvdXBJRCwNCiAgICAgICAgICBvcmRlcjogdGhpcy5uZXdSUC5vcmRlciwNCiAgICAgICAgfSkudGhlbihkYXRhID0+IHsNCiAgICAgICAgICB0aGlzLmFkZEFBKGRhdGEuaWQpOw0KICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpOw0KICAgICAgICB9KTsNCiAgICAgICAgaWYgKHRoaXMuZXJyb3IpIHsNCiAgICAgICAgICB0aGlzLmVycm9yID0gbnVsbDsNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5lcnJvciA9ICJZb3UgbXVzdCBlbnRlciBhIG5hbWUgZm9yIHRoZSBuZXcgcmlzayBwcm9maWxlLiI7DQogICAgICB9DQogICAgfSwNCiAgICBhZGRBQShpZCkgew0KICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5uZXdSUC5hbGxvY2F0aW9ucykpIHsNCiAgICAgICAgbGV0IGVuZHBvaW50ID0gYC9hcGkvcmlza3Byb2ZpbGVncm91cHMvJHt0aGlzLlJQR3JvdXBJRH0vcmlza3Byb2ZpbGVzLyR7aWR9L2FhL2A7DQogICAgICAgIGFwaVNlcnZpY2UoZW5kcG9pbnQsICJQT1NUIiwgew0KICAgICAgICAgIG5hbWVfaWQ6IGtleSwNCiAgICAgICAgICBwZXJjZW50YWdlOiB2YWx1ZS8xMDAsDQogICAgICAgICAgcmlza3Byb2ZpbGU6IGlkDQogICAgICAgIH0pLnRoZW4oZGF0YSA9PiB7DQogICAgICAgICAgdGhpcy5nZXRSaXNrUHJvZmlsZXMoKTsNCiAgICAgICAgICB0aGlzLm5ld1JQLm5hbWU9IiI7DQogICAgICAgICAgdGhpcy5uZXdSUC5vcmRlcj1udWxsOw0KICAgICAgICAgIHRoaXMubmV3UlAuYWxsb2NhdGlvbnMgPSB7fTsNCiAgICAgICAgICB0aGlzLiRlbWl0KCJkaXNhYmxlLWRpYWxvZyIsIGRhdGEpOw0KICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpOw0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIG9uU3VibWl0KCkgew0KICAgICAgaWYgKHRoaXMuY2hhbmdlTGlzdCkgew0KICAgICAgICBmb3IgKGxldCBpPTA7IGkgPCB0aGlzLmNoYW5nZUxpc3QubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICBsZXQgZW5kcG9pbnQgPSBgL2FwaS9yaXNrcHJvZmlsZWdyb3Vwcy8ke3RoaXMuUlBHcm91cElEfS9yaXNrcHJvZmlsZXMvJHt0aGlzLmNoYW5nZUxpc3RbaV0uaWR9L2A7DQogICAgICAgICAgYXBpU2VydmljZShlbmRwb2ludCwgIlBBVENIIiwgew0KICAgICAgICAgICAgbmFtZTogdGhpcy5jaGFuZ2VMaXN0W2ldLm5hbWUsDQogICAgICAgICAgICBncm91cDogdGhpcy5jaGFuZ2VMaXN0W2ldLmdyb3VwLA0KICAgICAgICAgICAgb3JkZXI6IHRoaXMuY2hhbmdlTGlzdFtpXS5vcmRlciwNCiAgICAgICAgICB9KS50aGVuKGRhdGEgPT4gew0KICAgICAgICAgICAgdGhpcy51cGRhdGVBQShkYXRhLmlkLCB0aGlzLmNoYW5nZUxpc3RbaV0pOw0KICAgICAgICAgIH0pOw0KICAgICAgICB9Ow0KICAgICAgfTsNCiAgICB9LA0KICAgIHVwZGF0ZUFBKHByb2ZpbGVJRCwgcHJvZmlsZSkgew0KICAgICAgZm9yIChsZXQgaT0wOyBpIDwgcHJvZmlsZS5hbGxvY2F0aW9ucy5sZW5ndGg7IGkrKykgew0KICAgICAgICBsZXQgZW5kcG9pbnQgPSAnJzsNCiAgICAgICAgbGV0IG1ldGhvZCA9ICcnOw0KICAgICAgICBpZiAocHJvZmlsZS5hbGxvY2F0aW9uc1tpXS5pZCA9PSBudWxsKSB7DQogICAgICAgICAgZW5kcG9pbnQgPSBgL2FwaS9yaXNrcHJvZmlsZWdyb3Vwcy8ke3RoaXMuUlBHcm91cElEfS9yaXNrcHJvZmlsZXMvJHtwcm9maWxlSUR9L2FhL2A7DQogICAgICAgICAgbWV0aG9kID0gIlBPU1QiDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgZW5kcG9pbnQgPSBgL2FwaS9yaXNrcHJvZmlsZWdyb3Vwcy8ke3RoaXMuUlBHcm91cElEfS9yaXNrcHJvZmlsZXMvJHtwcm9maWxlSUR9L2FhLyR7cHJvZmlsZS5hbGxvY2F0aW9uc1tpXS5pZH0vYDsNCiAgICAgICAgICBtZXRob2QgPSAiUEFUQ0giDQogICAgICAgIH07DQogICAgICAgIGFwaVNlcnZpY2UoZW5kcG9pbnQsIG1ldGhvZCwgew0KICAgICAgICAgIGlkOiBwcm9maWxlLmFsbG9jYXRpb25zW2ldLmlkLA0KICAgICAgICAgIG5hbWVfaWQ6IHByb2ZpbGUuYWxsb2NhdGlvbnNbaV0ubmFtZS5pZCwNCiAgICAgICAgICBwZXJjZW50YWdlOiBwcm9maWxlLmFsbG9jYXRpb25zW2ldLnBlcmNlbnRhZ2UsDQogICAgICAgICAgcmlza3Byb2ZpbGU6IHByb2ZpbGVJRA0KICAgICAgICB9KS50aGVuKGRhdGEgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpDQogICAgICAgICAgdGhpcy5nZXRSaXNrUHJvZmlsZXMoKTsNCiAgICAgICAgICB0aGlzLiRlbWl0KCJkaXNhYmxlLWRpYWxvZyIsIGRhdGEpOw0KICAgICAgICAgIHRoaXMuY2hhbmdlTGlzdD1bXTsNCiAgICAgICAgfSk7DQogICAgICB9Ow0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLmdldFJQQUFOYW1lRGF0YSgpOw0KICAgIHRoaXMuZ2V0Umlza1Byb2ZpbGVzKCk7DQogIH0NCn07DQo="},{"version":3,"sources":["RiskProfileTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RiskProfileTable.vue","sourceRoot":"src/components","sourcesContent":["<template lang=\"html\">\r\n  <v-form  @submit.prevent=\"onSubmit\">\r\n    <v-container>\r\n      <v-row dense>\r\n        <v-col\r\n          :cols=\"2\">\r\n          <v-card>\r\n            <v-card-title>\r\n            </v-card-title>\r\n          </v-card>\r\n        </v-col>\r\n        <v-col\r\n          v-for=\"AAName in nameSet\"\r\n          :key=\"Object.keys(AAName)[0]\">\r\n          <v-card>\r\n            <v-card-title>\r\n              {{ Object.values(AAName)[0] }}\r\n            </v-card-title>\r\n          </v-card>\r\n        </v-col>\r\n        <v-col\r\n          :cols=\"1\">\r\n        </v-col>\r\n      </v-row>\r\n      <v-row\r\n        v-for=\"profile in riskProfiles\"\r\n        :key=\"profile.id\"\r\n        dense>\r\n        <v-col\r\n          :cols=\"2\">\r\n            <v-text-field\r\n              @change=\"addToChanged(profile)\"\r\n              v-model=\"profile.name\"\r\n              outlined dense solo />\r\n        </v-col>\r\n        <v-col\r\n          v-for=\"AAName in nameSet\"\r\n          :key=\"Object.keys(AAName)[0]\">\r\n            <v-text-field\r\n              @change=\"addToChanged(profile)\"\r\n              :value = \"getAAPercentage(AAName,profile)\"\r\n              @input = \"setAAPercentage($event, AAName, profile)\"\r\n              outlined dense solo/>\r\n        </v-col>\r\n        <v-col\r\n          :cols=\"1\">\r\n          <DeleteObj\r\n            :objectType=\"'riskprofile'\"\r\n            :objectToDelete=\"profile\"\r\n            :RPGroupID=\"RPGroupID\"\r\n            @delete-object=\"getRiskProfiles\"\r\n            v-on=\"$listeners\"\r\n          />\r\n        </v-col>\r\n      </v-row>\r\n      <v-row\r\n        dense>\r\n        <v-col\r\n          :cols=\"2\">\r\n            <v-text-field\r\n              v-model=\"newRP.name\"\r\n              outlined dense solo />\r\n        </v-col>\r\n        <v-col\r\n          v-for=\"AAName in nameSet\"\r\n          :key=\"Object.keys(AAName)[0]\">\r\n            <v-text-field\r\n              v-model=\"newRP.allocations[Object.keys(AAName)[0]]\"\r\n              outlined dense solo/>\r\n        </v-col>\r\n        <v-col\r\n          :cols=\"1\">\r\n          <v-btn type=\"button\" color=\"green\" dark dense\r\n            @click=\"addRP\">\r\n            <v-icon>\r\n              mdi-plus\r\n            </v-icon>\r\n          </v-btn>\r\n        </v-col>\r\n      </v-row>\r\n      <v-row v-if=\"riskProfiles.length\">\r\n        <v-col>\r\n          <v-btn type=\"submit\" color=\"primary\" dark dense>Update</v-btn>\r\n        </v-col>\r\n      </v-row>\r\n      <br>\r\n      <AANameConfig\r\n        :RPAANames=\"RPAANames\"/>\r\n    </v-container>\r\n  </v-form>\r\n</template>\r\n\r\n<script>\r\nimport { apiService } from \"@/common/api.service.js\";\r\nimport AANameConfig from \"@/components/AANameConfig.vue\";\r\nimport DeleteObj from \"@/components/DeleteObj.vue\";\r\n\r\nexport default {\r\n  name: \"RiskProfileTable\",\r\n  props: {\r\n    RPGroupID: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      riskProfiles: [],\r\n      RPAANames: [],\r\n      error: null,\r\n      changeList: [],\r\n      newRP: {\r\n        name:\"\",\r\n        order:null,\r\n        allocations:{},\r\n      },\r\n    };\r\n  },\r\n  components: {\r\n    AANameConfig,\r\n    DeleteObj,\r\n  },\r\n  computed: {\r\n    nameSet: function (){\r\n      let AANameList = [];\r\n      let checkList = []\r\n      for (let i = 0; i < this.RPAANames.length; i++) {\r\n        let found = false;\r\n        let aaName = this.RPAANames[i];\r\n          if (checkList.includes(aaName.custom_name)) {\r\n            found = true;\r\n          }\r\n          if (!found) {\r\n            let newAA = {};\r\n            newAA[aaName.id] = aaName.custom_name;\r\n            AANameList.push(newAA);\r\n            found = false;\r\n            checkList.push(aaName.custom_name);\r\n          }\r\n      }\r\n      return (AANameList)\r\n    }\r\n  },\r\n  watch: {\r\n    RPGroupID: function () {\r\n      this.getRPAANameData();\r\n      this.getRiskProfiles();\r\n    },\r\n  },\r\n  methods: {\r\n    addToChanged(profile) {\r\n      if (!(this.changeList.includes(profile))) {\r\n        this.changeList.push(profile);\r\n      } else {\r\n        const i = this.changeList.findIndex(item => item.id === profile.id);\r\n        this.changeList.splice(i, 1);\r\n        this.changeList.push(profile);\r\n      }\r\n    },\r\n    setAAPercentage(event, AAName, riskProfile) {\r\n      const i = this.riskProfiles.findIndex(item => item.id === riskProfile.id);\r\n      const aaID = Object.keys(AAName)[0];\r\n      let found = false;\r\n      for (let x=0; x < this.riskProfiles[i].allocations.length; x++){\r\n        found = false;\r\n          if (this.riskProfiles[i].allocations[x].name.id == aaID) {\r\n            // event = event.split(\"%\").pop();\r\n            this.riskProfiles[i].allocations[x].percentage = event/100;\r\n            found = true;\r\n            break;\r\n          }\r\n      }\r\n      if (!found) {\r\n        let newAllocation = {}\r\n        newAllocation.name = {}\r\n        newAllocation.name.id = aaID;\r\n        newAllocation.percentage = event/100;\r\n        newAllocation.riskprofile = riskProfile.id;\r\n        newAllocation.id = null;\r\n        this.riskProfiles[i].allocations.push(newAllocation);\r\n      }\r\n    },\r\n    getAAPercentage(AAName, riskProfile) {\r\n      let percentage = 0\r\n      for (let i=0; i < riskProfile.allocations.length; i++) {\r\n        if (riskProfile.allocations[i].name.custom_name == Object.values(AAName)[0]) {\r\n          percentage += riskProfile.allocations[i].percentage;\r\n        }\r\n      }\r\n      return (percentage*100)\r\n    },\r\n    getRiskProfiles() {\r\n      let endpoint = `/api/riskprofilegroups/${this.RPGroupID}/riskprofiles/`;\r\n      apiService(endpoint).then(data => {\r\n        this.riskProfiles = data.results;\r\n      });\r\n    },\r\n    getRPAANameData() {\r\n      let endpoint = `/api/activeriskprofilenames/`;\r\n      apiService(endpoint).then(data => {\r\n        this.RPAANames = data.results;\r\n      });\r\n    },\r\n    addRP() {\r\n      if (this.newRP.name) {\r\n        let endpoint = `/api/riskprofilegroups/${this.RPGroupID}/riskprofiles/`;\r\n        apiService(endpoint, \"POST\", {\r\n          name: this.newRP.name,\r\n          group: this.RPGroupID,\r\n          order: this.newRP.order,\r\n        }).then(data => {\r\n          this.addAA(data.id);\r\n          console.log(data);\r\n        });\r\n        if (this.error) {\r\n          this.error = null;\r\n        }\r\n      } else {\r\n        this.error = \"You must enter a name for the new risk profile.\";\r\n      }\r\n    },\r\n    addAA(id) {\r\n      for (const [key, value] of Object.entries(this.newRP.allocations)) {\r\n        let endpoint = `/api/riskprofilegroups/${this.RPGroupID}/riskprofiles/${id}/aa/`;\r\n        apiService(endpoint, \"POST\", {\r\n          name_id: key,\r\n          percentage: value/100,\r\n          riskprofile: id\r\n        }).then(data => {\r\n          this.getRiskProfiles();\r\n          this.newRP.name=\"\";\r\n          this.newRP.order=null;\r\n          this.newRP.allocations = {};\r\n          this.$emit(\"disable-dialog\", data);\r\n          console.log(data);\r\n        });\r\n      }\r\n    },\r\n    onSubmit() {\r\n      if (this.changeList) {\r\n        for (let i=0; i < this.changeList.length; i++) {\r\n          let endpoint = `/api/riskprofilegroups/${this.RPGroupID}/riskprofiles/${this.changeList[i].id}/`;\r\n          apiService(endpoint, \"PATCH\", {\r\n            name: this.changeList[i].name,\r\n            group: this.changeList[i].group,\r\n            order: this.changeList[i].order,\r\n          }).then(data => {\r\n            this.updateAA(data.id, this.changeList[i]);\r\n          });\r\n        };\r\n      };\r\n    },\r\n    updateAA(profileID, profile) {\r\n      for (let i=0; i < profile.allocations.length; i++) {\r\n        let endpoint = '';\r\n        let method = '';\r\n        if (profile.allocations[i].id == null) {\r\n          endpoint = `/api/riskprofilegroups/${this.RPGroupID}/riskprofiles/${profileID}/aa/`;\r\n          method = \"POST\"\r\n        } else {\r\n          endpoint = `/api/riskprofilegroups/${this.RPGroupID}/riskprofiles/${profileID}/aa/${profile.allocations[i].id}/`;\r\n          method = \"PATCH\"\r\n        };\r\n        apiService(endpoint, method, {\r\n          id: profile.allocations[i].id,\r\n          name_id: profile.allocations[i].name.id,\r\n          percentage: profile.allocations[i].percentage,\r\n          riskprofile: profileID\r\n        }).then(data => {\r\n          console.log(data)\r\n          this.getRiskProfiles();\r\n          this.$emit(\"disable-dialog\", data);\r\n          this.changeList=[];\r\n        });\r\n      };\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getRPAANameData();\r\n    this.getRiskProfiles();\r\n  }\r\n};\r\n</script>\r\n"]}]}