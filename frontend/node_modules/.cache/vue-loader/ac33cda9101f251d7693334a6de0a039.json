{"remainingRequest":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\components\\InvestmentDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\components\\InvestmentDetail.vue","mtime":1610079973668},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBhcGlTZXJ2aWNlIH0gZnJvbSAiQC9jb21tb24vYXBpLnNlcnZpY2UuanMiOw0KDQppbXBvcnQgew0KICBQTEFURk9STV9BQV9GRVRDSA0KfSBmcm9tICJAL3N0b3JlL2FjdGlvbnMudHlwZSI7DQppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7DQppbXBvcnQgeyBydWxlUGVyY1RvMTAwLCBydWxlUGVyY2VudGFnZSB9IGZyb20gIkAvY29tcG9uZW50cy9taXhpbnMvUnVsZXMuanMiOw0KDQppbXBvcnQgSW52ZXN0bWVudEFBQ2hhcnRTdW1tYXJ5IGZyb20gIkAvY29tcG9uZW50cy9JbnZlc3RtZW50QUFDaGFydFN1bW1hcnkudnVlIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiSW52ZXN0bWVudERldGFpbCIsDQogIG1peGluczogW3J1bGVQZXJjVG8xMDAsIHJ1bGVQZXJjZW50YWdlXSwNCiAgcHJvcHM6IHsNCiAgICBpbnZlc3RtZW50OiB7DQogICAgICB0eXBlOiBPYmplY3QsDQogICAgICByZXF1aXJlZDogZmFsc2UsDQogICAgICBkZWZhdWx0OiBmdW5jdGlvbigpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICBpZDogbnVsbCwNCiAgICAgICAgICBjdXN0b21fbmFtZTogbnVsbCwNCiAgICAgICAgICBpbnZlc3RtZW50X2NsYXNzOiBudWxsLA0KICAgICAgICAgIGFtb3VudDogbnVsbCwNCiAgICAgICAgICBpbnZlc3RtZW50X2ZlZTogbnVsbCwNCiAgICAgICAgICBfaW52ZXN0bWVudF9mZWU6IG51bGwsDQogICAgICAgICAgYnV5X3NwcmVhZDogbnVsbCwNCiAgICAgICAgICBzZWxsX3NwcmVhZDogbnVsbCwNCiAgICAgICAgICBjYXNoOiBmYWxzZSwNCiAgICAgICAgICBURDogZmFsc2UsDQogICAgICAgIH0NCiAgICAgIH0sDQogICAgfSwNCiAgICB0ZW1wbGF0ZTogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIHJlcXVpcmVkOiBmYWxzZQ0KICAgIH0sDQogICAgaW52ZXN0bWVudENsYXNzTGlzdDogew0KICAgICAgdHlwZTogQXJyYXksDQogICAgICByZXF1aXJlZDogdHJ1ZQ0KICAgIH0sDQogIH0sDQogIGNvbXBvbmVudHM6IHsNCiAgICBJbnZlc3RtZW50QUFDaGFydFN1bW1hcnksDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIG1lbnU6IGZhbHNlLA0KICAgICAgYWFFcnJvcjogbnVsbCwNCiAgICAgIGRpYWxvZzogZmFsc2UsDQogICAgICBwbGF0Zm9ybXM6IG51bGwsDQogICAgICBhYVN1bW1hcnk6IG51bGwsDQogICAgICBhYTogbnVsbCwNCiAgICB9Ow0KICB9LA0KICBjb21wdXRlZDogew0KICAgIC4uLm1hcEdldHRlcnMoWyJhY3RpdmVTY2VuYXJpbyIsICJhY3RpdmVQbGF0Zm9ybSIsImludmVzdG1lbnROYW1lcyJdKSwNCiAgICBydWxlUGVyY1RvMTAwKCkgew0KICAgICAgcmV0dXJuICBbdiA9PiB7DQogICAgICAgIGlmICgodiA8PSAxMDApICYmICh2ID49IDApKSB7DQogICAgICAgICAgcmV0dXJuIHRydWUNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICByZXR1cm4gIk11c3QgYmUgYmV0d2VlbiAwJSBhbmQgMTAwIg0KICAgICAgICB9DQogICAgICB9XQ0KICAgIH0sDQogICAgaW52OiB7DQogICAgICBnZXQoKSB7DQogICAgICAgIHJldHVybiB0aGlzLmludmVzdG1lbnQNCiAgICAgIH0sDQogICAgICBzZXQobmV3SW52ZXN0bWVudCkgew0KICAgICAgICByZXR1cm4gbmV3SW52ZXN0bWVudA0KICAgICAgfQ0KICAgIH0sDQogICAgY3VzdG9tUlBBQU5hbWVzKCkgew0KICAgICAgaWYgKCF0aGlzLl8uaXNFbXB0eSh0aGlzLmFhU3VtbWFyeSkpIHsNCg0KICAgICAgICBsZXQgY3VzdG9tX25hbWVzID0gdGhpcy5hYVN1bW1hcnkubWFwKGEgPT4gYS5jdXN0b21fbmFtZSk7DQogICAgICAgIGxldCBhYW5hbWVzID0gWy4uLm5ldyBTZXQoY3VzdG9tX25hbWVzKV07DQogICAgICAgIHJldHVybiBhYW5hbWVzDQogICAgICAgIC8vIHJldHVybiB0aGlzLmFhU3VtbWFyeS5tYXAoZSA9PiBlLmN1c3RvbV9uYW1lKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiBbXQ0KICAgICAgfQ0KICAgIH0sDQogICAgY2xlYXJBQSgpIHsNCiAgICAgIGlmICghdGhpcy5fLmlzRW1wdHkodGhpcy5hYSkgJiYgIXRoaXMuXy5pc0VtcHR5KHRoaXMuYWFTdW1tYXJ5KSApIHsNCiAgICAgICAgLy8gSWYgYW4gaW52ZXN0bWVudCBoYXMgYW55IGFzc2V0IGFsbG9jYXRpb24gbmFtZXMgd2hpY2ggZG8gbm90IG1hdGNoDQogICAgICAgIC8vIHRoZSBkZWZhdWx0IFJQIEFBIE5hbWVzIChBQVN1bW1hcnkubmFtZSksIHRoaXMgY29tcHV0ZWQgcHJvcCB3aWxsDQogICAgICAgIC8vIHRyaWdnZXIgYSBzaWduYWwgb24gc2F2ZSB0byBjbGVhciBhbGwgZXhpc3RpbmcgYXNzZXQgYWxsb2NhdGlvbnMNCiAgICAgICAgLy8gYW5kIHJlcGxhY2UgdGhlbSB3aXRoIGRlZmF1bHQgUlAgQUEgTmFtZXMuDQogICAgICAgIGxldCBkZWZhdWx0UlBBQU5hbWVzID0gdGhpcy5hYVN1bW1hcnkubWFwKGUgPT4gZS5uYW1lKTsNCiAgICAgICAgbGV0IGNsZWFuQUFOYW1lcyA9IHRoaXMuYWEuZmlsdGVyKGUgPT4gZS5uYW1lICE9IG51bGwpDQogICAgICAgIGxldCBBQU5hbWVzID0gY2xlYW5BQU5hbWVzLm1hcChlID0+IGUubmFtZS5uYW1lKTsNCiAgICAgICAgcmV0dXJuIChBQU5hbWVzLnNvbWUoZSA9PiAhZGVmYXVsdFJQQUFOYW1lcy5pbmNsdWRlcyhlKSkpDQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gdHJ1ZQ0KICAgICAgfQ0KICAgIH0sDQogICAgcmVidWlsdEFBKCkgew0KICAgICAgaWYgKHRoaXMuY2xlYXJBQSkgew0KICAgICAgICBsZXQgcmVidWlsdEFBID0gbmV3IEFycmF5Ow0KICAgICAgICBmb3IgKGxldCBhYSBvZiB0aGlzLmFhU3VtbWFyeSkgew0KICAgICAgICAgIGxldCBpdGVtID0gbmV3IE9iamVjdDsNCiAgICAgICAgICBpdGVtWyduYW1lX2lkJ10gPSBudWxsOw0KICAgICAgICAgIGl0ZW1bJ3JwX25hbWVfaWQnXSA9IGFhLmlkDQogICAgICAgICAgaXRlbVsnaW52ZXN0bWVudCddID0gdGhpcy5pbnYuaWQ7DQogICAgICAgICAgaWYgKGFhLmFhX3RvdGFsX3BlcmMpIHsNCiAgICAgICAgICAgIGl0ZW1bJ3BlcmNlbnRhZ2UnXSA9IChhYS5hYV90b3RhbF9wZXJjKS50b0ZpeGVkKDYpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpdGVtWydwZXJjZW50YWdlJ10gPSAwDQogICAgICAgICAgfQ0KICAgICAgICAgIGl0ZW1bJ25hbWUnXSA9IG5ldyBPYmplY3QoKTsNCiAgICAgICAgICBpdGVtLm5hbWVbJ25hbWUnXSA9IGFhLm5hbWU7DQogICAgICAgICAgaWYgKGl0ZW1bJ3BlcmNlbnRhZ2UnXSA+IDApIHsNCiAgICAgICAgICAgIHJlYnVpbHRBQS5wdXNoKGl0ZW0pDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiByZWJ1aWx0QUENCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiBudWxsDQogICAgICB9DQogICAgfSwNCiAgICB1bmlxdWVBQSgpIHsNCiAgICAgIGlmICghdGhpcy5fLmlzRW1wdHkodGhpcy5hYVN1bW1hcnkpKSB7DQogICAgICAgIGxldCB1bmlxdWUgPSBbXTsNCiAgICAgICAgZm9yIChjb25zdCBhYSBvZiB0aGlzLmFhU3VtbWFyeSkgew0KICAgICAgICAgIGlmICghdGhpcy5fLmlzRW1wdHkodW5pcXVlKSkgew0KICAgICAgICAgICAgLy8gQ2hlY2tzIGZvciBleGlzdGVuY2Ugb2YgdGhlIGN1cnJlbnQgaXRlcmF0ZWQgaXRlbSdzIGN1c3RvbV9uYW1lIGluIHRoZSB1bmlxdWUgbGlzdA0KICAgICAgICAgICAgbGV0IGZvdW5kID0gdW5pcXVlLnNvbWUoeCA9PiB4LmN1c3RvbV9uYW1lID09PSBhYS5jdXN0b21fbmFtZSk7DQogICAgICAgICAgICBpZiAoIWZvdW5kKSB7DQogICAgICAgICAgICAgIC8vSWYgbm8gbWF0Y2gsIGFkZCBpdA0KICAgICAgICAgICAgICB1bmlxdWUucHVzaChhYSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIC8vIElmIHRoZSB1bmlxdWUgbGlzdCBkb2VzIG5vdCB5ZXQgZXhpc3QsIGFkZCB0aGUgZmlyc3QgaXRlbSBpbiB0aGUgYWEgYXJyYXkNCiAgICAgICAgICAgIHVuaXF1ZS5wdXNoKGFhKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHVuaXF1ZQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuIFtdDQogICAgICB9DQogICAgfSwNCiAgICBjdXN0b21PckZ1bGwoKSB7DQogICAgICBpZiAodGhpcy5pbnYuY3VzdG9tX25hbWUgIT0gbnVsbCkgew0KICAgICAgICByZXR1cm4gdGhpcy5pbnYuY3VzdG9tX25hbWUNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiB0aGlzLmludi5uYW1lLm5hbWUNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIHdhdGNoOiB7DQogICAgaW52KCkgew0KICAgICAgdGhpcy5nZXRBQURhdGEoKTsNCiAgICAgIGlmICh0aGlzLnRlbXBsYXRlID09PSB0cnVlKSB7DQogICAgICAgIHRoaXMuaW52LnRlbXBsYXRlID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5nZXRQbGF0Zm9ybUxpc3QoKTsNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICB2YWxpZGF0ZUFBKCkgew0KICAgICAgaWYgKHRoaXMuJHJlZnMuYWFGb3JtLnZhbGlkYXRlKCkpew0KICAgICAgICB0aGlzLmNsZWFyQUFFcnJvcigpOw0KICAgICAgICByZXR1cm4gdHJ1ZQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5zZXRBQUVycm9yKCk7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGNsZWFyQUFFcnJvcigpIHsNCiAgICAgIHRoaXMuYWFFcnJvciA9IG51bGw7DQogICAgfSwNCiAgICBzZXRBQUVycm9yKCl7DQogICAgICB0aGlzLmFhRXJyb3IgPSAiTXVzdCBiZSBiZXR3ZWVuIDAlIGFuZCAxMDAiOw0KICAgIH0sDQogICAgc2V0QUFQZXJjZW50YWdlKGV2ZW50LCB1bmlxdWVTdW1tYXJ5SXRlbSkgew0KICAgICAgaWYgKHRoaXMudmFsaWRhdGVBQSgpKSB7DQogICAgICAgIGxldCBhYVN1bW1hcnlJdGVtID0gdGhpcy5hYVN1bW1hcnkuZmluZCh4ID0+IHguaWQgPT09IHVuaXF1ZVN1bW1hcnlJdGVtLmlkKQ0KICAgICAgICAvLyBDaGVja3MgZm9yIG1lcmdlZCBpdGVtcyB0aGF0IGFyZSBub3Qgc2hvd24gb24gdGhlIHVuaXF1ZSBhYSBsaXN0DQogICAgICAgIC8vIFRoYXQgaXMsIG1lcmdlZCBpdGVtcyB0aGF0IGFyZSBlc3NlbnRhaWxseSAiaGlkZGVuIi4NCiAgICAgICAgLy8gVGhlcmUgd2lsbCBhbHdheXMgYmUgb25lIG1lcmdlZCBpdGVtIHRoYXQgaXMgbm90IGhpZGRlbg0KICAgICAgICBsZXQgbWVyZ2VkQUFTdW1tYXJ5SXRlbXMgPSB0aGlzLmFhU3VtbWFyeS5maWx0ZXIoDQogICAgICAgICAgeCA9PiAoeC5pZCAhPSB1bmlxdWVTdW1tYXJ5SXRlbS5pZCkgJiYgKHguY3VzdG9tX25hbWUgPT09IHVuaXF1ZVN1bW1hcnlJdGVtLmN1c3RvbV9uYW1lKSApDQogICAgICAgIC8vIElmIHRoZXJlIGFyZSBtZXJnZWQgaXRlbXMsIGNsZWFyIHRoZWlyIHZhbHVlcw0KICAgICAgICBpZiAoIXRoaXMuXy5pc0VtcHR5KG1lcmdlZEFBU3VtbWFyeUl0ZW1zKSkgew0KICAgICAgICAgIGZvciAobGV0IGl0ZW0gb2YgbWVyZ2VkQUFTdW1tYXJ5SXRlbXMpIHsNCiAgICAgICAgICAgIGl0ZW0uYWFfdG90YWxfcGVyYyA9IDANCiAgICAgICAgICAgIGNvbnN0IGlkeCA9IHRoaXMuYWEuZmluZEluZGV4KHggPT4geC5ycF9uYW1lX2lkID09PSBpdGVtLmlkKTsNCiAgICAgICAgICAgIGlmIChpZHggPj0gMCkgew0KICAgICAgICAgICAgICB0aGlzLmFhW2lkeF0ucGVyY2VudGFnZSA9IDA7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGlmICh0aGlzLmNsZWFyQUEpIHsNCiAgICAgICAgICAvLyBJZiBBQSBpcyBiZWluZyBjbGVhcmVkLCBlZGl0IHRoZSBhYVN1bW1hcnkgYXJyYXkgZGlyZWN0bHkuDQogICAgICAgICAgLy8gVGhpcyB3aWxsIGFsc28gdXBkYXRlIHRoZSByZWJ1aWx0QUEgY29tcHV0ZWQgcHJvcGVydHkgZm9yIEFQSSBjYWxsDQogICAgICAgICAgYWFTdW1tYXJ5SXRlbS5hYV90b3RhbF9wZXJjID0gZXZlbnQvMTAwOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIC8vIEFkZCB0byBhYVN1bW1hcnkgc28gaXQgdXBkYXRlcyBjaGFydCBldGMNCiAgICAgICAgICBhYVN1bW1hcnlJdGVtLmFhX3RvdGFsX3BlcmMgPSBldmVudC8xMDA7DQoNCiAgICAgICAgICBsZXQgYWFfaXRlbSA9IHRoaXMuYWEuZmluZCh4ID0+IHgubmFtZS5uYW1lID09PSBhYVN1bW1hcnlJdGVtLm5hbWUpOw0KICAgICAgICAgIC8vIExvb2tzIGZvciB0aGUgYWEgaXRlbSBpbiB0aGUgYWEgYXJyYXkgdGhhdCBtYXRjaGVzIHRoZSBSUEFBIG5hbWUNCiAgICAgICAgICBpZiAoYWFfaXRlbSAhPSBudWxsKSB7DQogICAgICAgICAgICAvLyBJZiBpdCBmaW5kcyBpdCwgc2V0cyB0aGUgdmFsdWUNCiAgICAgICAgICAgIGFhX2l0ZW0ucGVyY2VudGFnZSA9IGV2ZW50LzEwMDsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgLy8gSWYgaXQgY2FuJ3QgZmluZCBpdCBpbiB0aGUgYXJyYXksIGNyZWF0ZXMgYSBuZXcgZW50cnkNCiAgICAgICAgICAgIGxldCBuZXdfYWFfaXRlbSA9IG5ldyBPYmplY3QoKQ0KICAgICAgICAgICAgbmV3X2FhX2l0ZW1bJ25hbWVfaWQnXSA9IG51bGw7DQogICAgICAgICAgICBuZXdfYWFfaXRlbVsncnBfbmFtZV9pZCddID0gYWFTdW1tYXJ5SXRlbS5pZA0KICAgICAgICAgICAgbmV3X2FhX2l0ZW1bJ2ludmVzdG1lbnQnXSA9IHRoaXMuaW52LmlkOw0KICAgICAgICAgICAgbmV3X2FhX2l0ZW1bJ3BlcmNlbnRhZ2UnXSA9IGV2ZW50LzEwMDsNCiAgICAgICAgICAgIG5ld19hYV9pdGVtWyduYW1lJ10gPSBuZXcgT2JqZWN0KCk7DQogICAgICAgICAgICBuZXdfYWFfaXRlbS5uYW1lWyduYW1lJ10gPSBhYVN1bW1hcnlJdGVtLm5hbWU7DQogICAgICAgICAgICBpZiAoZXZlbnQgPiAwKSB7DQogICAgICAgICAgICAgIHRoaXMuYWEucHVzaChuZXdfYWFfaXRlbSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIGdldEFBUGVyY2VudGFnZShhYSkgew0KICAgICAgY29uc3QgZmlsdGVyQXJyID0gdGhpcy5hYVN1bW1hcnkuZmlsdGVyKA0KICAgICAgICB4ID0+IHguY3VzdG9tX25hbWUgPT09IGFhLmN1c3RvbV9uYW1lKQ0KICAgICAgLy8gY3JlYXRlcyBhbiBhcnJheSB3aXRoIHRoZSBmb3VuZCBpdGVtcw0KICAgICAgY29uc3QgcGVyY2VudGFnZUFyciA9IGZpbHRlckFyci5tYXAoYSA9PiBhLmFhX3RvdGFsX3BlcmMpOw0KICAgICAgaWYgKCF0aGlzLl8uaXNFbXB0eShwZXJjZW50YWdlQXJyKSkgew0KICAgICAgICAvLyBJZiB0aGUgZm91bmQgaXRlbSBhcnJheSBoYXMgdmFsdWUsIHN1bXMgdGhlIGl0ZW1zDQogICAgICAgIGNvbnN0IHBlcmNlbnRhZ2VUb3RhbCA9IHBlcmNlbnRhZ2VBcnIucmVkdWNlKChhY2MsIGN1clZhbCkgPT4NCiAgICAgICAgICBOdW1iZXIoYWNjKSArIE51bWJlcihjdXJWYWwpKQ0KICAgICAgICByZXR1cm4gKHBlcmNlbnRhZ2VUb3RhbCoxMDApLnRvRml4ZWQoMik7DQogICAgICB9IGVsc2Ugew0KICAgICAgICAvLyBJZiBubyBkYXRhIGlzIGZvdW5kLCBhZGRzIDAgdG8gdGhlIGFycmF5IHRvIG1haW50YWluIGRhdGEgb3JkZXIuDQogICAgICAgIHJldHVybiAwDQogICAgICB9DQogICAgICAvLyByZXR1cm4gKHJlc3VsdCoxMDApLnRvRml4ZWQoMik7DQogICAgfSwNCiAgICBzZXRQZXJjZW50YWdlKGV2ZW50LCBpbnYsIGZpZWxkKSB7DQogICAgICB0aGlzLmludltmaWVsZF0gPSAoZXZlbnQvMTAwKS50b0ZpeGVkKDYpOw0KICAgIH0sDQogICAgZ2V0UGVyY2VudGFnZShpbnYsIGZpZWxkKSB7DQogICAgICByZXR1cm4gKyh0aGlzLmludltmaWVsZF0qMTAwKS50b0ZpeGVkKDIpOw0KICAgIH0sDQogICAgZ2V0QUFTdW1tYXJ5RGF0YSgpIHsNCiAgICAgIGlmICh0aGlzLnRlbXBsYXRlID09PSBmYWxzZSkgew0KICAgICAgICBsZXQgZW5kcG9pbnQgPSBgL2FwaS9zY2VuYXJpb3MvJHt0aGlzLmFjdGl2ZVNjZW5hcmlvLmlkfS9wbGF0Zm9ybXMvJHt0aGlzLmFjdGl2ZVBsYXRmb3JtLmlkfS9pbnZlc3RtZW50cy8ke3RoaXMuaW52LmlkfS9hYXN1bW1hcnkvYDsNCiAgICAgICAgYXBpU2VydmljZShlbmRwb2ludCkudGhlbihkYXRhID0+IHsNCiAgICAgICAgICAgIHRoaXMuYWFTdW1tYXJ5ID0gZGF0YS5yZXN1bHRzOw0KICAgICAgICAgICAgdGhpcy5nZXRBQURhdGEoKTsNCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICB9LA0KICAgIGdldEFBRGF0YSgpIHsNCiAgICAgIGlmICh0aGlzLnRlbXBsYXRlID09PSBmYWxzZSkgew0KICAgICAgICBsZXQgZW5kcG9pbnQgPSBgL2FwaS9zY2VuYXJpb3MvJHt0aGlzLmFjdGl2ZVNjZW5hcmlvLmlkfS9wbGF0Zm9ybXMvJHt0aGlzLmFjdGl2ZVBsYXRmb3JtLmlkfS9pbnZlc3RtZW50cy8ke3RoaXMuaW52LmlkfS9hYS9gOw0KICAgICAgICBhcGlTZXJ2aWNlKGVuZHBvaW50KS50aGVuKGRhdGEgPT4gew0KICAgICAgICAgICAgdGhpcy5hYSA9IGRhdGEucmVzdWx0czsNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfSwNCiAgICBoaWRlQUFUYWIoKXsNCiAgICAgIGlmICh0aGlzLnZhbGlkYXRlQUEoKSl7DQogICAgICAgIHRoaXMubWVudSA9IGZhbHNlOw0KICAgICAgfQ0KICAgIH0sDQogICAgb25TdWJtaXQoKSB7DQogICAgICAvLyBWdWV0aWZ5IGRvZXMgbm90IHN1cHBvcnQgbmVzdGVkIGZvcm1zLCBzbyBjaGVjayBpZiB0aGUgYWFFcnJvciBtZXNzYWdlDQogICAgICAvLyBleGlzdHMgYXMgYSBmb3JtIG9mIHZhbGlkYXRpb24NCiAgICAgIGlmICghdGhpcy5hYUVycm9yICYmIHRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgpKSB7DQoNCiAgICAgICAgaWYgKHRoaXMudGVtcGxhdGUgPT09IGZhbHNlKSB7DQogICAgICAgICAgbGV0IGludk9iaiA9IHRoaXMuaW52DQogICAgICAgICAgaWYgKHRoaXMuY2xlYXJBQSkgew0KICAgICAgICAgICAgLy8gQWRkcyBhIG5ldyBhYSBhcnJheSB0byB0aGUgaW52ZXN0bWVudCBpZiB0aGUgb2xkIG9uZSBpcyB0byBiZQ0KICAgICAgICAgICAgLy8gY2xlYXJlZA0KICAgICAgICAgICAgaW52T2JqWydjbGVhcl9hYSddID0gdGhpcy5jbGVhckFBOw0KICAgICAgICAgICAgaW52T2JqWydhc3NldF9hbGxvY2F0aW9ucyddID0gdGhpcy5yZWJ1aWx0QUE7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIC8vIE90aGVyd2lzZSBhZGRzIHRoZSBleGlzdGluZyBhYSBhcnJheQ0KICAgICAgICAgICAgaW52T2JqWydhc3NldF9hbGxvY2F0aW9ucyddID0gdGhpcy5hYTsNCiAgICAgICAgICB9DQogICAgICAgICAgZm9yIChsZXQgYWEgb2YgaW52T2JqLmFzc2V0X2FsbG9jYXRpb25zKSB7DQogICAgICAgICAgICAgIGFhLm5hbWUgPSBhYS5uYW1lLmlkDQogICAgICAgICAgfQ0KICAgICAgICAgIGxldCBlbmRwb2ludCA9IGAvYXBpL3NjZW5hcmlvcy8ke3RoaXMuYWN0aXZlU2NlbmFyaW8uaWR9L3BsYXRmb3Jtcy8ke3RoaXMuYWN0aXZlUGxhdGZvcm0uaWR9L2ludmVzdG1lbnRzLyR7dGhpcy5pbnYuaWR9L2A7DQogICAgICAgICAgYXBpU2VydmljZShlbmRwb2ludCwgIlBBVENIIiwgaW52T2JqKS50aGVuKGRhdGEgPT4gew0KICAgICAgICAgICAgdGhpcy5pbnYgPSBkYXRhOw0KICAgICAgICAgICAgdGhpcy5nZXRBQVN1bW1hcnlEYXRhKCk7DQogICAgICAgICAgICB0aGlzLmdldEFjdGl2ZVBsYXRmb3JtQUEoKTsNCiAgICAgICAgICB9KTsNCg0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGxldCBlbmRwb2ludCA9IGAvYXBpL2ludmVzdG1lbnR0ZW1wbGF0ZS8ke3RoaXMuaW52LmlkfS9gOw0KICAgICAgICAgIGFwaVNlcnZpY2UoZW5kcG9pbnQsICJQQVRDSCIsIHRoaXMuaW52KQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICBnZXRBY3RpdmVQbGF0Zm9ybUFBKCkgew0KICAgICAgLy8gUmVmcmVzaGVzIHRoZSBwbGF0Zm9ybSBhYSBjaGFydCB3aGVuIGFuIGludmVzdG1lbnQgaXMgc2F2ZWQNCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKFBMQVRGT1JNX0FBX0ZFVENILCB7DQogICAgICAgICdzY2VuYXJpb0lkJzogdGhpcy5hY3RpdmVTY2VuYXJpby5pZCwNCiAgICAgICAgJ3BsYXRmb3JtSWQnOiB0aGlzLmFjdGl2ZVBsYXRmb3JtLmlkLA0KICAgICAgfSkNCiAgICB9LA0KICAgIGdldFBsYXRmb3JtTGlzdCgpIHsNCiAgICAgIGlmICh0aGlzLnRlbXBsYXRlID09PSB0cnVlKSB7DQogICAgICAgIGxldCBlbmRwb2ludCA9IGAvYXBpL3BsYXRmb3JtbmFtZXMvYDsNCiAgICAgICAgYXBpU2VydmljZShlbmRwb2ludCwgIkdFVCIpLnRoZW4oZGF0YSA9PiB7DQogICAgICAgICAgdGhpcy5wbGF0Zm9ybXMgPSBkYXRhLnJlc3VsdHM7DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sDQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5nZXRBQVN1bW1hcnlEYXRhKCk7DQogICAgdGhpcy5nZXRQbGF0Zm9ybUxpc3QoKTsNCiAgfQ0KfTsNCg=="},{"version":3,"sources":["InvestmentDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqOA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"InvestmentDetail.vue","sourceRoot":"src/components","sourcesContent":["<template lang=\"html\">\r\n  <v-container class='half-rounded-card-bottom-only grey3 px-6 pt-0'>\r\n    <v-row>\r\n      <v-col :cols=\"5\">\r\n        <v-card height=\"100%\" class=\"rounded-card small-text \">\r\n          <v-card-title class=\"grey1 justify-center subtitle-1 pa-2\">\r\n            Investment Details\r\n          </v-card-title>\r\n          <v-container class=\"py-3 px-4\">\r\n            <v-form @submit.prevent=\"onSubmit\" ref=\"form\">\r\n              <v-row v-if=\"template===true\">\r\n                <v-col >\r\n                  <v-autocomplete\r\n                    v-model=\"inv.name\"\r\n                    :items=\"investmentNames\"\r\n                    :return-object=\"true\"\r\n                    item-text=\"name\"\r\n                    dense\r\n                    label=\"Investment Name\"/>\r\n                </v-col>\r\n              </v-row>\r\n\r\n                <v-row dense >\r\n                  <v-col>\r\n                    <v-text-field\r\n                      hide-details=\"auto\"\r\n                      :rules=\"$rulePercentage\"\r\n                      label=\"Fee\"\r\n                      type=\"number\"\r\n                      suffix=\"%\"\r\n                      :value=\"getPercentage(inv, 'investment_fee')\"\r\n                      @change=\"setPercentage($event, inv, '_investment_fee')\"\r\n                    />\r\n                  </v-col>\r\n                  <v-col>\r\n                    <v-text-field\r\n                    hide-details=\"auto\"\r\n                    :rules=\"$rulePercentage\"\r\n                    label=\"Buy spread\"\r\n                    type=\"number\"\r\n                    suffix=\"%\"\r\n                    :value=\"getPercentage(inv, 'buy_spread')\"\r\n                    @change=\"setPercentage($event, inv, 'buy_spread')\"\r\n                   />\r\n                  </v-col>\r\n                  <v-col>\r\n                    <v-text-field\r\n                    hide-details=\"auto\"\r\n                    :rules=\"$rulePercentage\"\r\n                    label=\"Sell spread\"\r\n                    type=\"number\"\r\n                    suffix=\"%\"\r\n                    :value=\"getPercentage(inv, 'sell_spread')\"\r\n                    @change=\"setPercentage($event, inv, 'sell_spread')\" />\r\n                  </v-col>\r\n                </v-row>\r\n                <v-row dense>\r\n                  <v-col>\r\n                    <v-autocomplete\r\n                      class=\"pt-2\"\r\n                      hide-details\r\n                      clearable\r\n                      :value=\"inv.investment_class\"\r\n                      @input=\"(inv.investment_class = $event) && (inv.investment_class_id = $event.id)\"\r\n                      :items=\"investmentClassList\"\r\n                      item-text=\"name\"\r\n                      return-object\r\n                      placeholder=\"Investment class\"/>\r\n                    </v-col>\r\n                  </v-row>\r\n                <v-row dense>\r\n                  <v-col>\r\n                    <v-checkbox\r\n                      dense\r\n                      class=\"checkbox-small-label\"\r\n                      v-model=\"inv.cash\"\r\n                      hide-details\r\n                      label=\"Cash Account\"></v-checkbox>\r\n                  </v-col>\r\n                  <v-col>\r\n                    <v-checkbox\r\n                      class=\"checkbox-small-label\"\r\n                      dense\r\n                      v-model=\"inv.TD\"\r\n                      hide-details\r\n                      label=\"Term Deposit\"></v-checkbox>\r\n                  </v-col>\r\n                </v-row>\r\n                <v-row v-if=\"template===true\">\r\n                  <v-col>\r\n                    <v-text-field\r\n                    label=\"APIR Code\"\r\n                    dense\r\n                    v-model=\"inv.APIR_code\" />\r\n                  </v-col>\r\n                  <v-col>\r\n                    <v-text-field\r\n                    label=\"ASX Code\"\r\n                    dense\r\n                    v-model=\"inv.ASX_code\" />\r\n                  </v-col>\r\n                  <v-col>\r\n                    <v-text-field\r\n                    label=\"Other Code\"\r\n                    dense\r\n                    v-model=\"inv.other_code\" />\r\n                  </v-col>\r\n                </v-row>\r\n                <v-row v-if=\"template==true\">\r\n                  <v-col>\r\n                    <v-autocomplete\r\n                      label=\"Platform Limitation\"\r\n                      dense\r\n                      v-model=\"inv.platform_limitation\"\r\n                      :items=\"platforms\"\r\n                      item-text=\"name\"\r\n                      item-value=\"id\"\r\n                    />\r\n                  </v-col>\r\n                </v-row>\r\n              </v-form>\r\n            </v-container>\r\n          </v-card>\r\n        </v-col>\r\n        <v-col v-if=\"!template\" :cols=\"7\">\r\n          <v-card class=\"rounded-card small-text\">\r\n            <v-row class=\"grey1 ma-0 pa-0\">\r\n              <v-col :cols=\"2\" class=\"ma-0 pa-0\">\r\n              </v-col>\r\n              <v-col :cols=\"8\" class=\"justify-center ma-0 pa-0\">\r\n                <v-card-title class=\"grey1 justify-center subtitle-1 pa-2\">\r\n                  Asset Allocation\r\n                </v-card-title>\r\n              </v-col>\r\n              <v-col :cols=\"2\" class=\"ma-0 pa-0 pr-4\">\r\n                <v-menu\r\n                  class=\"transparent\"\r\n                  v-model=\"menu\"\r\n                  :close-on-content-click=\"false\"\r\n                  :close-on-click=\"false\"\r\n                  offset-x\r\n                  >\r\n                  <template v-slot:activator=\"{ on }\">\r\n                    <v-card-actions>\r\n                      <v-spacer />\r\n                      <v-btn icon small\r\n                        v-on=\"on\"\r\n                        style=\"z-index:0\"\r\n                        >\r\n                        <v-icon\r\n                          color=\"teal\"\r\n                          dark\r\n                          icon>\r\n                        mdi-circle-edit-outline\r\n                        </v-icon>\r\n                      </v-btn>\r\n                    </v-card-actions>\r\n                  </template>\r\n                  <v-card class=\"rounded-card small-text\">\r\n                    <v-form ref=\"aaForm\">\r\n                      <v-list  class=\"dialog-header dense\">\r\n                        <v-list-item  style=\"min-height:30px\">\r\n                          <v-list-item-title class=\"pa-0\">Modify Asset Allocation</v-list-item-title>\r\n                          <v-list-item-action>\r\n                            <v-btn icon>\r\n                              <v-icon>mdi-save</v-icon>\r\n                            </v-btn>\r\n                          </v-list-item-action>\r\n                        </v-list-item>\r\n                      </v-list>\r\n                      <v-list >\r\n                        <v-list-item\r\n                          v-for=\"aa in uniqueAA\"\r\n                          :key=\"aa.id\">\r\n                          <v-list-item-content style=\"font-size:13px\" class=\"small-text\">{{aa.custom_name}}</v-list-item-content>\r\n                          <v-list-item-action class=\"my-0\" style=\"width:33%\">\r\n                            <v-text-field\r\n                              dense\r\n                              rounded solo\r\n                              suffix=\"%\"\r\n                              :value=\"getAAPercentage(aa)\"\r\n                              @change=\"setAAPercentage($event, aa)\"\r\n                              @input=\"validateAA()\"\r\n                              hide-details\r\n                              :rules=\"rulePercTo100\"\r\n                              type=\"number\"\r\n                            />\r\n                          </v-list-item-action>\r\n                        </v-list-item>\r\n                      </v-list>\r\n                      <v-divider></v-divider>\r\n                      <v-card-actions>\r\n                        <v-card-text class=\"pa-2 red--text\">\r\n                        {{aaError}}\r\n                      </v-card-text>\r\n\r\n                        <v-spacer></v-spacer>\r\n\r\n                        <v-btn\r\n                          class=\"mr-4\"\r\n                          style=\"width:80px\"\r\n                          color=\"primary\"\r\n                          rounded small\r\n                          @click=\"hideAATab\"\r\n                        >\r\n                          Hide\r\n                        </v-btn>\r\n                      </v-card-actions>\r\n                    </v-form>\r\n                  </v-card>\r\n                </v-menu>\r\n            </v-col>\r\n</v-row>\r\n\r\n            <InvestmentAAChartSummary\r\n              :RPAANames=\"customRPAANames\"\r\n              :aaSummary=\"aaSummary\"\r\n            />\r\n          </v-card>\r\n        </v-col>\r\n      </v-row>\r\n      <v-card-actions>\r\n        <v-spacer></v-spacer>\r\n          <v-btn width=\"80\" small @click=\"onSubmit\" color=\"primary\" rounded><span class=\"font-weight-light\">Save</span></v-btn>\r\n      </v-card-actions>\r\n    </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { apiService } from \"@/common/api.service.js\";\r\n\r\nimport {\r\n  PLATFORM_AA_FETCH\r\n} from \"@/store/actions.type\";\r\nimport { mapGetters } from \"vuex\";\r\nimport { rulePercTo100, rulePercentage } from \"@/components/mixins/Rules.js\";\r\n\r\nimport InvestmentAAChartSummary from \"@/components/InvestmentAAChartSummary.vue\";\r\n\r\nexport default {\r\n  name: \"InvestmentDetail\",\r\n  mixins: [rulePercTo100, rulePercentage],\r\n  props: {\r\n    investment: {\r\n      type: Object,\r\n      required: false,\r\n      default: function() {\r\n        return {\r\n          id: null,\r\n          custom_name: null,\r\n          investment_class: null,\r\n          amount: null,\r\n          investment_fee: null,\r\n          _investment_fee: null,\r\n          buy_spread: null,\r\n          sell_spread: null,\r\n          cash: false,\r\n          TD: false,\r\n        }\r\n      },\r\n    },\r\n    template: {\r\n      type: Boolean,\r\n      required: false\r\n    },\r\n    investmentClassList: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n  },\r\n  components: {\r\n    InvestmentAAChartSummary,\r\n  },\r\n  data() {\r\n    return {\r\n      menu: false,\r\n      aaError: null,\r\n      dialog: false,\r\n      platforms: null,\r\n      aaSummary: null,\r\n      aa: null,\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"activeScenario\", \"activePlatform\",\"investmentNames\"]),\r\n    rulePercTo100() {\r\n      return  [v => {\r\n        if ((v <= 100) && (v >= 0)) {\r\n          return true\r\n        } else {\r\n          return \"Must be between 0% and 100\"\r\n        }\r\n      }]\r\n    },\r\n    inv: {\r\n      get() {\r\n        return this.investment\r\n      },\r\n      set(newInvestment) {\r\n        return newInvestment\r\n      }\r\n    },\r\n    customRPAANames() {\r\n      if (!this._.isEmpty(this.aaSummary)) {\r\n\r\n        let custom_names = this.aaSummary.map(a => a.custom_name);\r\n        let aanames = [...new Set(custom_names)];\r\n        return aanames\r\n        // return this.aaSummary.map(e => e.custom_name);\r\n      } else {\r\n        return []\r\n      }\r\n    },\r\n    clearAA() {\r\n      if (!this._.isEmpty(this.aa) && !this._.isEmpty(this.aaSummary) ) {\r\n        // If an investment has any asset allocation names which do not match\r\n        // the default RP AA Names (AASummary.name), this computed prop will\r\n        // trigger a signal on save to clear all existing asset allocations\r\n        // and replace them with default RP AA Names.\r\n        let defaultRPAANames = this.aaSummary.map(e => e.name);\r\n        let cleanAANames = this.aa.filter(e => e.name != null)\r\n        let AANames = cleanAANames.map(e => e.name.name);\r\n        return (AANames.some(e => !defaultRPAANames.includes(e)))\r\n      } else {\r\n        return true\r\n      }\r\n    },\r\n    rebuiltAA() {\r\n      if (this.clearAA) {\r\n        let rebuiltAA = new Array;\r\n        for (let aa of this.aaSummary) {\r\n          let item = new Object;\r\n          item['name_id'] = null;\r\n          item['rp_name_id'] = aa.id\r\n          item['investment'] = this.inv.id;\r\n          if (aa.aa_total_perc) {\r\n            item['percentage'] = (aa.aa_total_perc).toFixed(6);\r\n          } else {\r\n            item['percentage'] = 0\r\n          }\r\n          item['name'] = new Object();\r\n          item.name['name'] = aa.name;\r\n          if (item['percentage'] > 0) {\r\n            rebuiltAA.push(item)\r\n          }\r\n        }\r\n        return rebuiltAA\r\n      } else {\r\n        return null\r\n      }\r\n    },\r\n    uniqueAA() {\r\n      if (!this._.isEmpty(this.aaSummary)) {\r\n        let unique = [];\r\n        for (const aa of this.aaSummary) {\r\n          if (!this._.isEmpty(unique)) {\r\n            // Checks for existence of the current iterated item's custom_name in the unique list\r\n            let found = unique.some(x => x.custom_name === aa.custom_name);\r\n            if (!found) {\r\n              //If no match, add it\r\n              unique.push(aa);\r\n            }\r\n          } else {\r\n            // If the unique list does not yet exist, add the first item in the aa array\r\n            unique.push(aa);\r\n          }\r\n        }\r\n        return unique\r\n      } else {\r\n        return []\r\n      }\r\n    },\r\n    customOrFull() {\r\n      if (this.inv.custom_name != null) {\r\n        return this.inv.custom_name\r\n      } else {\r\n        return this.inv.name.name\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    inv() {\r\n      this.getAAData();\r\n      if (this.template === true) {\r\n        this.inv.template = true;\r\n        this.getPlatformList();\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    validateAA() {\r\n      if (this.$refs.aaForm.validate()){\r\n        this.clearAAError();\r\n        return true\r\n      } else {\r\n        this.setAAError();\r\n        return false;\r\n      }\r\n    },\r\n    clearAAError() {\r\n      this.aaError = null;\r\n    },\r\n    setAAError(){\r\n      this.aaError = \"Must be between 0% and 100\";\r\n    },\r\n    setAAPercentage(event, uniqueSummaryItem) {\r\n      if (this.validateAA()) {\r\n        let aaSummaryItem = this.aaSummary.find(x => x.id === uniqueSummaryItem.id)\r\n        // Checks for merged items that are not shown on the unique aa list\r\n        // That is, merged items that are essentailly \"hidden\".\r\n        // There will always be one merged item that is not hidden\r\n        let mergedAASummaryItems = this.aaSummary.filter(\r\n          x => (x.id != uniqueSummaryItem.id) && (x.custom_name === uniqueSummaryItem.custom_name) )\r\n        // If there are merged items, clear their values\r\n        if (!this._.isEmpty(mergedAASummaryItems)) {\r\n          for (let item of mergedAASummaryItems) {\r\n            item.aa_total_perc = 0\r\n            const idx = this.aa.findIndex(x => x.rp_name_id === item.id);\r\n            if (idx >= 0) {\r\n              this.aa[idx].percentage = 0;\r\n            }\r\n          }\r\n        }\r\n        if (this.clearAA) {\r\n          // If AA is being cleared, edit the aaSummary array directly.\r\n          // This will also update the rebuiltAA computed property for API call\r\n          aaSummaryItem.aa_total_perc = event/100;\r\n        } else {\r\n          // Add to aaSummary so it updates chart etc\r\n          aaSummaryItem.aa_total_perc = event/100;\r\n\r\n          let aa_item = this.aa.find(x => x.name.name === aaSummaryItem.name);\r\n          // Looks for the aa item in the aa array that matches the RPAA name\r\n          if (aa_item != null) {\r\n            // If it finds it, sets the value\r\n            aa_item.percentage = event/100;\r\n          } else {\r\n            // If it can't find it in the array, creates a new entry\r\n            let new_aa_item = new Object()\r\n            new_aa_item['name_id'] = null;\r\n            new_aa_item['rp_name_id'] = aaSummaryItem.id\r\n            new_aa_item['investment'] = this.inv.id;\r\n            new_aa_item['percentage'] = event/100;\r\n            new_aa_item['name'] = new Object();\r\n            new_aa_item.name['name'] = aaSummaryItem.name;\r\n            if (event > 0) {\r\n              this.aa.push(new_aa_item)\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    getAAPercentage(aa) {\r\n      const filterArr = this.aaSummary.filter(\r\n        x => x.custom_name === aa.custom_name)\r\n      // creates an array with the found items\r\n      const percentageArr = filterArr.map(a => a.aa_total_perc);\r\n      if (!this._.isEmpty(percentageArr)) {\r\n        // If the found item array has value, sums the items\r\n        const percentageTotal = percentageArr.reduce((acc, curVal) =>\r\n          Number(acc) + Number(curVal))\r\n        return (percentageTotal*100).toFixed(2);\r\n      } else {\r\n        // If no data is found, adds 0 to the array to maintain data order.\r\n        return 0\r\n      }\r\n      // return (result*100).toFixed(2);\r\n    },\r\n    setPercentage(event, inv, field) {\r\n      this.inv[field] = (event/100).toFixed(6);\r\n    },\r\n    getPercentage(inv, field) {\r\n      return +(this.inv[field]*100).toFixed(2);\r\n    },\r\n    getAASummaryData() {\r\n      if (this.template === false) {\r\n        let endpoint = `/api/scenarios/${this.activeScenario.id}/platforms/${this.activePlatform.id}/investments/${this.inv.id}/aasummary/`;\r\n        apiService(endpoint).then(data => {\r\n            this.aaSummary = data.results;\r\n            this.getAAData();\r\n        })\r\n      }\r\n    },\r\n    getAAData() {\r\n      if (this.template === false) {\r\n        let endpoint = `/api/scenarios/${this.activeScenario.id}/platforms/${this.activePlatform.id}/investments/${this.inv.id}/aa/`;\r\n        apiService(endpoint).then(data => {\r\n            this.aa = data.results;\r\n        });\r\n      }\r\n    },\r\n    hideAATab(){\r\n      if (this.validateAA()){\r\n        this.menu = false;\r\n      }\r\n    },\r\n    onSubmit() {\r\n      // Vuetify does not support nested forms, so check if the aaError message\r\n      // exists as a form of validation\r\n      if (!this.aaError && this.$refs.form.validate()) {\r\n\r\n        if (this.template === false) {\r\n          let invObj = this.inv\r\n          if (this.clearAA) {\r\n            // Adds a new aa array to the investment if the old one is to be\r\n            // cleared\r\n            invObj['clear_aa'] = this.clearAA;\r\n            invObj['asset_allocations'] = this.rebuiltAA;\r\n          } else {\r\n            // Otherwise adds the existing aa array\r\n            invObj['asset_allocations'] = this.aa;\r\n          }\r\n          for (let aa of invObj.asset_allocations) {\r\n              aa.name = aa.name.id\r\n          }\r\n          let endpoint = `/api/scenarios/${this.activeScenario.id}/platforms/${this.activePlatform.id}/investments/${this.inv.id}/`;\r\n          apiService(endpoint, \"PATCH\", invObj).then(data => {\r\n            this.inv = data;\r\n            this.getAASummaryData();\r\n            this.getActivePlatformAA();\r\n          });\r\n\r\n        } else {\r\n          let endpoint = `/api/investmenttemplate/${this.inv.id}/`;\r\n          apiService(endpoint, \"PATCH\", this.inv)\r\n        }\r\n      }\r\n    },\r\n    getActivePlatformAA() {\r\n      // Refreshes the platform aa chart when an investment is saved\r\n      this.$store.dispatch(PLATFORM_AA_FETCH, {\r\n        'scenarioId': this.activeScenario.id,\r\n        'platformId': this.activePlatform.id,\r\n      })\r\n    },\r\n    getPlatformList() {\r\n      if (this.template === true) {\r\n        let endpoint = `/api/platformnames/`;\r\n        apiService(endpoint, \"GET\").then(data => {\r\n          this.platforms = data.results;\r\n        });\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.getAASummaryData();\r\n    this.getPlatformList();\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n  div.v-menu__content {\r\n    border-radius: 40px !important;\r\n  }\r\n</style>\r\n"]}]}