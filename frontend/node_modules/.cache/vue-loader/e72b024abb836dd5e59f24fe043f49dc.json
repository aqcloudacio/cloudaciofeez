{"remainingRequest":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\components\\AddCustomPlatform.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\components\\AddCustomPlatform.vue","mtime":1587617041443},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBhcGlTZXJ2aWNlIH0gZnJvbSAiQC9jb21tb24vYXBpLnNlcnZpY2UuanMiOw0KaW1wb3J0IFBsYXRmb3JtRGV0YWlsIGZyb20gIkAvY29tcG9uZW50cy9QbGF0Zm9ybURldGFpbC52dWUiOw0KaW1wb3J0IFBsYXRmb3JtRmVlU3VtbWFyeSBmcm9tICJAL2NvbXBvbmVudHMvUGxhdGZvcm1GZWVTdW1tYXJ5LnZ1ZSI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIkFkZEN1c3RvbVBsYXRmb3JtIiwNCiAgaW5qZWN0OiBbInNjZW5hcmlvSWQiXSwNCiAgY29tcG9uZW50czogew0KICAgIFBsYXRmb3JtRGV0YWlsLA0KICAgIFBsYXRmb3JtRmVlU3VtbWFyeQ0KICB9LA0KICBwcm9wczogew0KICAgIGRpYWxvZzogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIHJlcXVpcmVkOiB0cnVlDQogICAgfSwNCiAgICBzdGF0dXM6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwNCiAgICB9LA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBwbGF0Zm9ybU5hbWU6IiIsDQogICAgICBwbGF0Zm9ybUZlZToge30sDQogICAgICBwbGF0Zm9ybTogbnVsbCwNCiAgICAgIHNob3dEZXRhaWw6IGZhbHNlLA0KICAgICAgcGxhdGZvcm1LZXk6IDAsDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGZvcmNlUmVyZW5kZXIoKXsNCiAgICAgIHRoaXMucGxhdGZvcm1LZXkgKz0gMTsNCiAgICB9LA0KICAgIG9uU3VibWl0KCkgew0KICAgICAgaWYgKHRoaXMucGxhdGZvcm1OYW1lKSB7DQogICAgICAgIGxldCBlbmRwb2ludCA9IGAvYXBpL3NjZW5hcmlvcy8ke3RoaXMuc2NlbmFyaW9JZH0vcGxhdGZvcm1zL2A7DQogICAgICAgIGFwaVNlcnZpY2UoZW5kcG9pbnQsICJQT1NUIiwgew0KICAgICAgICAgIG5hbWVfaWQ6IG51bGwsDQogICAgICAgICAgY3VzdG9tX25hbWU6IHRoaXMucGxhdGZvcm1OYW1lLA0KICAgICAgICAgIHNjZW5hcmlvOiB0aGlzLnNjZW5hcmlvSWQsDQogICAgICAgICAgZWRpdGVkOiB0cnVlLA0KICAgICAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMsDQogICAgICAgIH0pLnRoZW4oZGF0YSA9PiB7DQogICAgICAgICAgdGhpcy4kZW1pdCgiYWRkLXBsYXRmb3JtIiwgZGF0YSk7DQogICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7DQogICAgICAgICAgdGhpcy5wbGF0Zm9ybSA9IGRhdGE7DQogICAgICAgICAgdGhpcy5zaG93RGV0YWlsID0gdHJ1ZTsNCiAgICAgICAgICB0aGlzLmZvcmNlUmVyZW5kZXIoKTsNCiAgICAgICAgICB0aGlzLmdldFBsYXRmb3JtRmVlRGF0YSgpDQogICAgICAgIH0pOw0KICAgICAgICBpZiAodGhpcy5lcnJvcikgew0KICAgICAgICAgIHRoaXMuZXJyb3IgPSBudWxsOw0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmVycm9yID0gIllvdSBtdXN0IGVudGVyIGEgcGxhdGZvcm0gbmFtZSI7DQogICAgICB9DQogICAgfSwNCiAgICBnZXRQbGF0Zm9ybUZlZURhdGEoKSB7DQogICAgICBsZXQgZW5kcG9pbnQgPSBgL2FwaS9zY2VuYXJpb3MvJHt0aGlzLnNjZW5hcmlvSWR9L3BsYXRmb3Jtcy8ke3RoaXMucGxhdGZvcm0uaWR9L3BsYXRmb3JtZmVlcy9gOw0KICAgICAgYXBpU2VydmljZShlbmRwb2ludCkudGhlbihkYXRhID0+IHsNCiAgICAgICAgdGhpcy5wbGF0Zm9ybUZlZSA9IGRhdGEucmVzdWx0c1swXTsNCiAgICAgIH0pOw0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["AddCustomPlatform.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddCustomPlatform.vue","sourceRoot":"src/components","sourcesContent":["<template lang=\"html\">\r\n  <v-row>\r\n  <v-dialog v-model=\"dialog\">\r\n\r\n    <v-card>\r\n      <v-form @submit.prevent=\"onSubmit\"\r\n              class=\"pa-4\">\r\n        <v-row>\r\n          <v-col :cols=\"10\">\r\n            <v-text-field\r\n              dense solo hide-details\r\n              v-model=\"platformName\"\r\n            />\r\n          </v-col>\r\n          <v-col :cols=\"2\">\r\n            <v-btn type=\"submit\" color=\"primary\" dense>Save</v-btn>\r\n          </v-col>\r\n        </v-row>\r\n        <v-row>\r\n            <v-col>\r\n            <PlatformDetail\r\n              v-if=\"showDetail == true\"\r\n              :platform=\"platform\"\r\n              :key=\"platformKey\"\r\n            />\r\n          </v-col>\r\n        </v-row>\r\n        <v-row>\r\n          <v-col>\r\n            <PlatformFeeSummary\r\n              v-if=\"showDetail == true\"\r\n              :platformFee=\"platformFee\"\r\n              :platform=\"platform.id\"\r\n              :key=\"platformKey\"\r\n            />\r\n          </v-col>\r\n        </v-row>\r\n      </v-form>\r\n    </v-card>\r\n  </v-dialog>\r\n</v-row>\r\n</template>\r\n\r\n<script>\r\nimport { apiService } from \"@/common/api.service.js\";\r\nimport PlatformDetail from \"@/components/PlatformDetail.vue\";\r\nimport PlatformFeeSummary from \"@/components/PlatformFeeSummary.vue\";\r\n\r\nexport default {\r\n  name: \"AddCustomPlatform\",\r\n  inject: [\"scenarioId\"],\r\n  components: {\r\n    PlatformDetail,\r\n    PlatformFeeSummary\r\n  },\r\n  props: {\r\n    dialog: {\r\n      type: Boolean,\r\n      required: true\r\n    },\r\n    status: {\r\n      type: String,\r\n      required: false,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      platformName:\"\",\r\n      platformFee: {},\r\n      platform: null,\r\n      showDetail: false,\r\n      platformKey: 0,\r\n    };\r\n  },\r\n  methods: {\r\n    forceRerender(){\r\n      this.platformKey += 1;\r\n    },\r\n    onSubmit() {\r\n      if (this.platformName) {\r\n        let endpoint = `/api/scenarios/${this.scenarioId}/platforms/`;\r\n        apiService(endpoint, \"POST\", {\r\n          name_id: null,\r\n          custom_name: this.platformName,\r\n          scenario: this.scenarioId,\r\n          edited: true,\r\n          status: this.status,\r\n        }).then(data => {\r\n          this.$emit(\"add-platform\", data);\r\n          console.log(data);\r\n          this.platform = data;\r\n          this.showDetail = true;\r\n          this.forceRerender();\r\n          this.getPlatformFeeData()\r\n        });\r\n        if (this.error) {\r\n          this.error = null;\r\n        }\r\n      } else {\r\n        this.error = \"You must enter a platform name\";\r\n      }\r\n    },\r\n    getPlatformFeeData() {\r\n      let endpoint = `/api/scenarios/${this.scenarioId}/platforms/${this.platform.id}/platformfees/`;\r\n      apiService(endpoint).then(data => {\r\n        this.platformFee = data.results[0];\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"css\" scoped>\r\n</style>\r\n"]}]}