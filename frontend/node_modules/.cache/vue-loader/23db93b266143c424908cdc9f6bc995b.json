{"remainingRequest":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\components\\InvestmentDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\components\\InvestmentDetail.vue","mtime":1612317751033},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBhcGlTZXJ2aWNlIH0gZnJvbSAiQC9jb21tb24vYXBpLnNlcnZpY2UuanMiOw0KDQppbXBvcnQgew0KICBQTEFURk9STV9BQV9GRVRDSA0KfSBmcm9tICJAL3N0b3JlL2FjdGlvbnMudHlwZSI7DQppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7DQppbXBvcnQgeyBydWxlUGVyY1RvMTAwLCBydWxlUGVyY2VudGFnZSB9IGZyb20gIkAvY29tcG9uZW50cy9taXhpbnMvUnVsZXMuanMiOw0KDQppbXBvcnQgSW52ZXN0bWVudEFBQ2hhcnRTdW1tYXJ5IGZyb20gIkAvY29tcG9uZW50cy9JbnZlc3RtZW50QUFDaGFydFN1bW1hcnkudnVlIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiSW52ZXN0bWVudERldGFpbCIsDQogIG1peGluczogW3J1bGVQZXJjVG8xMDAsIHJ1bGVQZXJjZW50YWdlXSwNCiAgcHJvcHM6IHsNCiAgICBpbnZlc3RtZW50OiB7DQogICAgICB0eXBlOiBPYmplY3QsDQogICAgICByZXF1aXJlZDogZmFsc2UsDQogICAgICBkZWZhdWx0OiBmdW5jdGlvbigpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICBpZDogbnVsbCwNCiAgICAgICAgICBjdXN0b21fbmFtZTogbnVsbCwNCiAgICAgICAgICBpbnZlc3RtZW50X2NsYXNzOiBudWxsLA0KICAgICAgICAgIGFtb3VudDogbnVsbCwNCiAgICAgICAgICBpbnZlc3RtZW50X2ZlZTogbnVsbCwNCiAgICAgICAgICBfaW52ZXN0bWVudF9mZWU6IG51bGwsDQogICAgICAgICAgYnV5X3NwcmVhZDogbnVsbCwNCiAgICAgICAgICBzZWxsX3NwcmVhZDogbnVsbCwNCiAgICAgICAgICBjYXNoOiBmYWxzZSwNCiAgICAgICAgICBURDogZmFsc2UsDQogICAgICAgICAgb3ZlcnJpZGVfZmVlX2dyb3VwOiBmYWxzZSwNCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICB9LA0KICAgIHRlbXBsYXRlOiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgcmVxdWlyZWQ6IGZhbHNlDQogICAgfSwNCiAgICBpbnZlc3RtZW50Q2xhc3NMaXN0OiB7DQogICAgICB0eXBlOiBBcnJheSwNCiAgICAgIHJlcXVpcmVkOiB0cnVlDQogICAgfSwNCiAgICBwbGF0Zm9ybUZlZXM6IHsNCiAgICAgIHR5cGU6IEFycmF5LA0KICAgICAgcmVxdWlyZWQ6IGZhbHNlDQogICAgfQ0KICB9LA0KICBjb21wb25lbnRzOiB7DQogICAgSW52ZXN0bWVudEFBQ2hhcnRTdW1tYXJ5LA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBtZW51OiBmYWxzZSwNCiAgICAgIGFhRXJyb3I6IG51bGwsDQogICAgICBkaWFsb2c6IGZhbHNlLA0KICAgICAgcGxhdGZvcm1zOiBudWxsLA0KICAgICAgYWFTdW1tYXJ5OiBudWxsLA0KICAgICAgYWE6IG51bGwsDQogICAgfTsNCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICAuLi5tYXBHZXR0ZXJzKFsiYWN0aXZlU2NlbmFyaW8iLCAiYWN0aXZlUGxhdGZvcm0iLCJpbnZlc3RtZW50TmFtZXMiXSksDQogICAgcnVsZVBlcmNUbzEwMCgpIHsNCiAgICAgIHJldHVybiAgW3YgPT4gew0KICAgICAgICBpZiAoKHYgPD0gMTAwKSAmJiAodiA+PSAwKSkgew0KICAgICAgICAgIHJldHVybiB0cnVlDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgcmV0dXJuICJNdXN0IGJlIGJldHdlZW4gMCUgYW5kIDEwMCINCiAgICAgICAgfQ0KICAgICAgfV0NCiAgICB9LA0KICAgIGludjogew0KICAgICAgZ2V0KCkgew0KICAgICAgICByZXR1cm4gdGhpcy5pbnZlc3RtZW50DQogICAgICB9LA0KICAgICAgc2V0KG5ld0ludmVzdG1lbnQpIHsNCiAgICAgICAgcmV0dXJuIG5ld0ludmVzdG1lbnQNCiAgICAgIH0NCiAgICB9LA0KICAgIGN1c3RvbVJQQUFOYW1lcygpIHsNCiAgICAgIGlmICghdGhpcy5fLmlzRW1wdHkodGhpcy5hYVN1bW1hcnkpKSB7DQoNCiAgICAgICAgbGV0IGN1c3RvbV9uYW1lcyA9IHRoaXMuYWFTdW1tYXJ5Lm1hcChhID0+IGEuY3VzdG9tX25hbWUpOw0KICAgICAgICBsZXQgYWFuYW1lcyA9IFsuLi5uZXcgU2V0KGN1c3RvbV9uYW1lcyldOw0KICAgICAgICByZXR1cm4gYWFuYW1lcw0KICAgICAgICAvLyByZXR1cm4gdGhpcy5hYVN1bW1hcnkubWFwKGUgPT4gZS5jdXN0b21fbmFtZSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gW10NCiAgICAgIH0NCiAgICB9LA0KICAgIGNsZWFyQUEoKSB7DQogICAgICBpZiAoIXRoaXMuXy5pc0VtcHR5KHRoaXMuYWEpICYmICF0aGlzLl8uaXNFbXB0eSh0aGlzLmFhU3VtbWFyeSkgKSB7DQogICAgICAgIC8vIElmIGFuIGludmVzdG1lbnQgaGFzIGFueSBhc3NldCBhbGxvY2F0aW9uIG5hbWVzIHdoaWNoIGRvIG5vdCBtYXRjaA0KICAgICAgICAvLyB0aGUgZGVmYXVsdCBSUCBBQSBOYW1lcyAoQUFTdW1tYXJ5Lm5hbWUpLCB0aGlzIGNvbXB1dGVkIHByb3Agd2lsbA0KICAgICAgICAvLyB0cmlnZ2VyIGEgc2lnbmFsIG9uIHNhdmUgdG8gY2xlYXIgYWxsIGV4aXN0aW5nIGFzc2V0IGFsbG9jYXRpb25zDQogICAgICAgIC8vIGFuZCByZXBsYWNlIHRoZW0gd2l0aCBkZWZhdWx0IFJQIEFBIE5hbWVzLg0KICAgICAgICBsZXQgZGVmYXVsdFJQQUFOYW1lcyA9IHRoaXMuYWFTdW1tYXJ5Lm1hcChlID0+IGUubmFtZSk7DQogICAgICAgIGxldCBjbGVhbkFBTmFtZXMgPSB0aGlzLmFhLmZpbHRlcihlID0+IGUubmFtZSAhPSBudWxsKQ0KICAgICAgICBsZXQgQUFOYW1lcyA9IGNsZWFuQUFOYW1lcy5tYXAoZSA9PiBlLm5hbWUubmFtZSk7DQogICAgICAgIHJldHVybiAoQUFOYW1lcy5zb21lKGUgPT4gIWRlZmF1bHRSUEFBTmFtZXMuaW5jbHVkZXMoZSkpKQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuIHRydWUNCiAgICAgIH0NCiAgICB9LA0KICAgIHJlYnVpbHRBQSgpIHsNCiAgICAgIGlmICh0aGlzLmNsZWFyQUEpIHsNCiAgICAgICAgbGV0IHJlYnVpbHRBQSA9IG5ldyBBcnJheTsNCiAgICAgICAgZm9yIChsZXQgYWEgb2YgdGhpcy5hYVN1bW1hcnkpIHsNCiAgICAgICAgICBsZXQgaXRlbSA9IG5ldyBPYmplY3Q7DQogICAgICAgICAgaXRlbVsnbmFtZV9pZCddID0gbnVsbDsNCiAgICAgICAgICBpdGVtWydycF9uYW1lX2lkJ10gPSBhYS5pZA0KICAgICAgICAgIGl0ZW1bJ2ludmVzdG1lbnQnXSA9IHRoaXMuaW52LmlkOw0KICAgICAgICAgIGlmIChhYS5hYV90b3RhbF9wZXJjKSB7DQogICAgICAgICAgICBpdGVtWydwZXJjZW50YWdlJ10gPSAoYWEuYWFfdG90YWxfcGVyYykudG9GaXhlZCg2KTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgaXRlbVsncGVyY2VudGFnZSddID0gMA0KICAgICAgICAgIH0NCiAgICAgICAgICBpdGVtWyduYW1lJ10gPSBuZXcgT2JqZWN0KCk7DQogICAgICAgICAgaXRlbS5uYW1lWyduYW1lJ10gPSBhYS5uYW1lOw0KICAgICAgICAgIGlmIChpdGVtWydwZXJjZW50YWdlJ10gPiAwKSB7DQogICAgICAgICAgICByZWJ1aWx0QUEucHVzaChpdGVtKQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gcmVidWlsdEFBDQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gbnVsbA0KICAgICAgfQ0KICAgIH0sDQogICAgdW5pcXVlQUEoKSB7DQogICAgICBpZiAoIXRoaXMuXy5pc0VtcHR5KHRoaXMuYWFTdW1tYXJ5KSkgew0KICAgICAgICBsZXQgdW5pcXVlID0gW107DQogICAgICAgIGZvciAoY29uc3QgYWEgb2YgdGhpcy5hYVN1bW1hcnkpIHsNCiAgICAgICAgICBpZiAoIXRoaXMuXy5pc0VtcHR5KHVuaXF1ZSkpIHsNCiAgICAgICAgICAgIC8vIENoZWNrcyBmb3IgZXhpc3RlbmNlIG9mIHRoZSBjdXJyZW50IGl0ZXJhdGVkIGl0ZW0ncyBjdXN0b21fbmFtZSBpbiB0aGUgdW5pcXVlIGxpc3QNCiAgICAgICAgICAgIGxldCBmb3VuZCA9IHVuaXF1ZS5zb21lKHggPT4geC5jdXN0b21fbmFtZSA9PT0gYWEuY3VzdG9tX25hbWUpOw0KICAgICAgICAgICAgaWYgKCFmb3VuZCkgew0KICAgICAgICAgICAgICAvL0lmIG5vIG1hdGNoLCBhZGQgaXQNCiAgICAgICAgICAgICAgdW5pcXVlLnB1c2goYWEpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAvLyBJZiB0aGUgdW5pcXVlIGxpc3QgZG9lcyBub3QgeWV0IGV4aXN0LCBhZGQgdGhlIGZpcnN0IGl0ZW0gaW4gdGhlIGFhIGFycmF5DQogICAgICAgICAgICB1bmlxdWUucHVzaChhYSk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiB1bmlxdWUNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiBbXQ0KICAgICAgfQ0KICAgIH0sDQogICAgY3VzdG9tT3JGdWxsKCkgew0KICAgICAgaWYgKHRoaXMuaW52LmN1c3RvbV9uYW1lICE9IG51bGwpIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuaW52LmN1c3RvbV9uYW1lDQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gdGhpcy5pbnYubmFtZS5uYW1lDQogICAgICB9DQogICAgfQ0KICB9LA0KICB3YXRjaDogew0KICAgIGludigpIHsNCiAgICAgIHRoaXMuZ2V0QUFEYXRhKCk7DQogICAgICBpZiAodGhpcy50ZW1wbGF0ZSA9PT0gdHJ1ZSkgew0KICAgICAgICB0aGlzLmludi50ZW1wbGF0ZSA9IHRydWU7DQogICAgICAgIHRoaXMuZ2V0UGxhdGZvcm1MaXN0KCk7DQogICAgICB9DQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgdmFsaWRhdGVBQSgpIHsNCiAgICAgIGlmICh0aGlzLiRyZWZzLmFhRm9ybS52YWxpZGF0ZSgpKXsNCiAgICAgICAgdGhpcy5jbGVhckFBRXJyb3IoKTsNCiAgICAgICAgcmV0dXJuIHRydWUNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuc2V0QUFFcnJvcigpOw0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICB9DQogICAgfSwNCiAgICBjbGVhckFBRXJyb3IoKSB7DQogICAgICB0aGlzLmFhRXJyb3IgPSBudWxsOw0KICAgIH0sDQogICAgc2V0QUFFcnJvcigpew0KICAgICAgdGhpcy5hYUVycm9yID0gIk11c3QgYmUgYmV0d2VlbiAwJSBhbmQgMTAwIjsNCiAgICB9LA0KICAgIHNldEFBUGVyY2VudGFnZShldmVudCwgdW5pcXVlU3VtbWFyeUl0ZW0pIHsNCiAgICAgIGlmICh0aGlzLnZhbGlkYXRlQUEoKSkgew0KICAgICAgICBsZXQgYWFTdW1tYXJ5SXRlbSA9IHRoaXMuYWFTdW1tYXJ5LmZpbmQoeCA9PiB4LmlkID09PSB1bmlxdWVTdW1tYXJ5SXRlbS5pZCkNCiAgICAgICAgLy8gQ2hlY2tzIGZvciBtZXJnZWQgaXRlbXMgdGhhdCBhcmUgbm90IHNob3duIG9uIHRoZSB1bmlxdWUgYWEgbGlzdA0KICAgICAgICAvLyBUaGF0IGlzLCBtZXJnZWQgaXRlbXMgdGhhdCBhcmUgZXNzZW50YWlsbHkgImhpZGRlbiIuDQogICAgICAgIC8vIFRoZXJlIHdpbGwgYWx3YXlzIGJlIG9uZSBtZXJnZWQgaXRlbSB0aGF0IGlzIG5vdCBoaWRkZW4NCiAgICAgICAgbGV0IG1lcmdlZEFBU3VtbWFyeUl0ZW1zID0gdGhpcy5hYVN1bW1hcnkuZmlsdGVyKA0KICAgICAgICAgIHggPT4gKHguaWQgIT0gdW5pcXVlU3VtbWFyeUl0ZW0uaWQpICYmICh4LmN1c3RvbV9uYW1lID09PSB1bmlxdWVTdW1tYXJ5SXRlbS5jdXN0b21fbmFtZSkgKQ0KICAgICAgICAvLyBJZiB0aGVyZSBhcmUgbWVyZ2VkIGl0ZW1zLCBjbGVhciB0aGVpciB2YWx1ZXMNCiAgICAgICAgaWYgKCF0aGlzLl8uaXNFbXB0eShtZXJnZWRBQVN1bW1hcnlJdGVtcykpIHsNCiAgICAgICAgICBmb3IgKGxldCBpdGVtIG9mIG1lcmdlZEFBU3VtbWFyeUl0ZW1zKSB7DQogICAgICAgICAgICBpdGVtLmFhX3RvdGFsX3BlcmMgPSAwDQogICAgICAgICAgICBjb25zdCBpZHggPSB0aGlzLmFhLmZpbmRJbmRleCh4ID0+IHgucnBfbmFtZV9pZCA9PT0gaXRlbS5pZCk7DQogICAgICAgICAgICBpZiAoaWR4ID49IDApIHsNCiAgICAgICAgICAgICAgdGhpcy5hYVtpZHhdLnBlcmNlbnRhZ2UgPSAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAodGhpcy5jbGVhckFBKSB7DQogICAgICAgICAgLy8gSWYgQUEgaXMgYmVpbmcgY2xlYXJlZCwgZWRpdCB0aGUgYWFTdW1tYXJ5IGFycmF5IGRpcmVjdGx5Lg0KICAgICAgICAgIC8vIFRoaXMgd2lsbCBhbHNvIHVwZGF0ZSB0aGUgcmVidWlsdEFBIGNvbXB1dGVkIHByb3BlcnR5IGZvciBBUEkgY2FsbA0KICAgICAgICAgIGFhU3VtbWFyeUl0ZW0uYWFfdG90YWxfcGVyYyA9IGV2ZW50LzEwMDsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAvLyBBZGQgdG8gYWFTdW1tYXJ5IHNvIGl0IHVwZGF0ZXMgY2hhcnQgZXRjDQogICAgICAgICAgYWFTdW1tYXJ5SXRlbS5hYV90b3RhbF9wZXJjID0gZXZlbnQvMTAwOw0KDQogICAgICAgICAgbGV0IGFhX2l0ZW0gPSB0aGlzLmFhLmZpbmQoeCA9PiB4Lm5hbWUubmFtZSA9PT0gYWFTdW1tYXJ5SXRlbS5uYW1lKTsNCiAgICAgICAgICAvLyBMb29rcyBmb3IgdGhlIGFhIGl0ZW0gaW4gdGhlIGFhIGFycmF5IHRoYXQgbWF0Y2hlcyB0aGUgUlBBQSBuYW1lDQogICAgICAgICAgaWYgKGFhX2l0ZW0gIT0gbnVsbCkgew0KICAgICAgICAgICAgLy8gSWYgaXQgZmluZHMgaXQsIHNldHMgdGhlIHZhbHVlDQogICAgICAgICAgICBhYV9pdGVtLnBlcmNlbnRhZ2UgPSBldmVudC8xMDA7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIC8vIElmIGl0IGNhbid0IGZpbmQgaXQgaW4gdGhlIGFycmF5LCBjcmVhdGVzIGEgbmV3IGVudHJ5DQogICAgICAgICAgICBsZXQgbmV3X2FhX2l0ZW0gPSBuZXcgT2JqZWN0KCkNCiAgICAgICAgICAgIG5ld19hYV9pdGVtWyduYW1lX2lkJ10gPSBudWxsOw0KICAgICAgICAgICAgbmV3X2FhX2l0ZW1bJ3JwX25hbWVfaWQnXSA9IGFhU3VtbWFyeUl0ZW0uaWQNCiAgICAgICAgICAgIG5ld19hYV9pdGVtWydpbnZlc3RtZW50J10gPSB0aGlzLmludi5pZDsNCiAgICAgICAgICAgIG5ld19hYV9pdGVtWydwZXJjZW50YWdlJ10gPSBldmVudC8xMDA7DQogICAgICAgICAgICBuZXdfYWFfaXRlbVsnbmFtZSddID0gbmV3IE9iamVjdCgpOw0KICAgICAgICAgICAgbmV3X2FhX2l0ZW0ubmFtZVsnbmFtZSddID0gYWFTdW1tYXJ5SXRlbS5uYW1lOw0KICAgICAgICAgICAgaWYgKGV2ZW50ID4gMCkgew0KICAgICAgICAgICAgICB0aGlzLmFhLnB1c2gobmV3X2FhX2l0ZW0pDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICBnZXRBQVBlcmNlbnRhZ2UoYWEpIHsNCiAgICAgIGNvbnN0IGZpbHRlckFyciA9IHRoaXMuYWFTdW1tYXJ5LmZpbHRlcigNCiAgICAgICAgeCA9PiB4LmN1c3RvbV9uYW1lID09PSBhYS5jdXN0b21fbmFtZSkNCiAgICAgIC8vIGNyZWF0ZXMgYW4gYXJyYXkgd2l0aCB0aGUgZm91bmQgaXRlbXMNCiAgICAgIGNvbnN0IHBlcmNlbnRhZ2VBcnIgPSBmaWx0ZXJBcnIubWFwKGEgPT4gYS5hYV90b3RhbF9wZXJjKTsNCiAgICAgIGlmICghdGhpcy5fLmlzRW1wdHkocGVyY2VudGFnZUFycikpIHsNCiAgICAgICAgLy8gSWYgdGhlIGZvdW5kIGl0ZW0gYXJyYXkgaGFzIHZhbHVlLCBzdW1zIHRoZSBpdGVtcw0KICAgICAgICBjb25zdCBwZXJjZW50YWdlVG90YWwgPSBwZXJjZW50YWdlQXJyLnJlZHVjZSgoYWNjLCBjdXJWYWwpID0+DQogICAgICAgICAgTnVtYmVyKGFjYykgKyBOdW1iZXIoY3VyVmFsKSkNCiAgICAgICAgcmV0dXJuIChwZXJjZW50YWdlVG90YWwqMTAwKS50b0ZpeGVkKDIpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgLy8gSWYgbm8gZGF0YSBpcyBmb3VuZCwgYWRkcyAwIHRvIHRoZSBhcnJheSB0byBtYWludGFpbiBkYXRhIG9yZGVyLg0KICAgICAgICByZXR1cm4gMA0KICAgICAgfQ0KICAgICAgLy8gcmV0dXJuIChyZXN1bHQqMTAwKS50b0ZpeGVkKDIpOw0KICAgIH0sDQogICAgc2V0UGVyY2VudGFnZShldmVudCwgaW52LCBmaWVsZCkgew0KICAgICAgdGhpcy5pbnZbZmllbGRdID0gKGV2ZW50LzEwMCkudG9GaXhlZCg2KTsNCiAgICB9LA0KICAgIGdldFBlcmNlbnRhZ2UoaW52LCBmaWVsZCkgew0KICAgICAgcmV0dXJuICsodGhpcy5pbnZbZmllbGRdKjEwMCkudG9GaXhlZCgyKTsNCiAgICB9LA0KICAgIGdldEFBU3VtbWFyeURhdGEoKSB7DQogICAgICBpZiAodGhpcy50ZW1wbGF0ZSA9PT0gZmFsc2UpIHsNCiAgICAgICAgbGV0IGVuZHBvaW50ID0gYC9hcGkvc2NlbmFyaW9zLyR7dGhpcy5hY3RpdmVTY2VuYXJpby5pZH0vcGxhdGZvcm1zLyR7dGhpcy5hY3RpdmVQbGF0Zm9ybS5pZH0vaW52ZXN0bWVudHMvJHt0aGlzLmludi5pZH0vYWFzdW1tYXJ5L2A7DQogICAgICAgIGFwaVNlcnZpY2UoZW5kcG9pbnQpLnRoZW4oZGF0YSA9PiB7DQogICAgICAgICAgICB0aGlzLmFhU3VtbWFyeSA9IGRhdGEucmVzdWx0czsNCiAgICAgICAgICAgIHRoaXMuZ2V0QUFEYXRhKCk7DQogICAgICAgIH0pDQogICAgICB9DQogICAgfSwNCiAgICBnZXRBQURhdGEoKSB7DQogICAgICBpZiAodGhpcy50ZW1wbGF0ZSA9PT0gZmFsc2UpIHsNCiAgICAgICAgbGV0IGVuZHBvaW50ID0gYC9hcGkvc2NlbmFyaW9zLyR7dGhpcy5hY3RpdmVTY2VuYXJpby5pZH0vcGxhdGZvcm1zLyR7dGhpcy5hY3RpdmVQbGF0Zm9ybS5pZH0vaW52ZXN0bWVudHMvJHt0aGlzLmludi5pZH0vYWEvYDsNCiAgICAgICAgYXBpU2VydmljZShlbmRwb2ludCkudGhlbihkYXRhID0+IHsNCiAgICAgICAgICAgIHRoaXMuYWEgPSBkYXRhLnJlc3VsdHM7DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sDQogICAgaGlkZUFBVGFiKCl7DQogICAgICBpZiAodGhpcy52YWxpZGF0ZUFBKCkpew0KICAgICAgICB0aGlzLm1lbnUgPSBmYWxzZTsNCiAgICAgIH0NCiAgICB9LA0KICAgIG92ZXJyaWRlRmVlR3JvdXAoZXZlbnQpIHsNCiAgICAgIHRoaXMuaW52LnBsYXRmb3JtX2ZlZV9ncm91cCA9IGV2ZW50LmlkOw0KICAgICAgdGhpcy5pbnYub3ZlcnJpZGVfZmVlX2dyb3VwID0gdHJ1ZTsNCiAgICB9LA0KICAgIG9uU3VibWl0KCkgew0KICAgICAgLy8gVnVldGlmeSBkb2VzIG5vdCBzdXBwb3J0IG5lc3RlZCBmb3Jtcywgc28gY2hlY2sgaWYgdGhlIGFhRXJyb3IgbWVzc2FnZQ0KICAgICAgLy8gZXhpc3RzIGFzIGEgZm9ybSBvZiB2YWxpZGF0aW9uDQogICAgICBpZiAoIXRoaXMuYWFFcnJvciAmJiB0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoKSkgew0KDQogICAgICAgIGlmICh0aGlzLnRlbXBsYXRlID09PSBmYWxzZSkgew0KICAgICAgICAgIGxldCBpbnZPYmogPSB0aGlzLmludg0KICAgICAgICAgIGlmICh0aGlzLmNsZWFyQUEpIHsNCiAgICAgICAgICAgIC8vIEFkZHMgYSBuZXcgYWEgYXJyYXkgdG8gdGhlIGludmVzdG1lbnQgaWYgdGhlIG9sZCBvbmUgaXMgdG8gYmUNCiAgICAgICAgICAgIC8vIGNsZWFyZWQNCiAgICAgICAgICAgIGludk9ialsnY2xlYXJfYWEnXSA9IHRoaXMuY2xlYXJBQTsNCiAgICAgICAgICAgIGludk9ialsnYXNzZXRfYWxsb2NhdGlvbnMnXSA9IHRoaXMucmVidWlsdEFBOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAvLyBPdGhlcndpc2UgYWRkcyB0aGUgZXhpc3RpbmcgYWEgYXJyYXkNCiAgICAgICAgICAgIGludk9ialsnYXNzZXRfYWxsb2NhdGlvbnMnXSA9IHRoaXMuYWE7DQogICAgICAgICAgfQ0KICAgICAgICAgIGZvciAobGV0IGFhIG9mIGludk9iai5hc3NldF9hbGxvY2F0aW9ucykgew0KICAgICAgICAgICAgICBhYS5uYW1lID0gYWEubmFtZS5pZA0KICAgICAgICAgIH0NCiAgICAgICAgICBsZXQgZW5kcG9pbnQgPSBgL2FwaS9zY2VuYXJpb3MvJHt0aGlzLmFjdGl2ZVNjZW5hcmlvLmlkfS9wbGF0Zm9ybXMvJHt0aGlzLmFjdGl2ZVBsYXRmb3JtLmlkfS9pbnZlc3RtZW50cy8ke3RoaXMuaW52LmlkfS9gOw0KICAgICAgICAgIGFwaVNlcnZpY2UoZW5kcG9pbnQsICJQQVRDSCIsIGludk9iaikudGhlbihkYXRhID0+IHsNCiAgICAgICAgICAgIHRoaXMuaW52ID0gZGF0YTsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpOw0KICAgICAgICAgICAgdGhpcy5nZXRBQVN1bW1hcnlEYXRhKCk7DQogICAgICAgICAgICB0aGlzLmdldEFjdGl2ZVBsYXRmb3JtQUEoKTsNCiAgICAgICAgICB9KTsNCg0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGxldCBlbmRwb2ludCA9IGAvYXBpL2ludmVzdG1lbnR0ZW1wbGF0ZS8ke3RoaXMuaW52LmlkfS9gOw0KICAgICAgICAgIGFwaVNlcnZpY2UoZW5kcG9pbnQsICJQQVRDSCIsIHRoaXMuaW52KQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICBnZXRBY3RpdmVQbGF0Zm9ybUFBKCkgew0KICAgICAgLy8gUmVmcmVzaGVzIHRoZSBwbGF0Zm9ybSBhYSBjaGFydCB3aGVuIGFuIGludmVzdG1lbnQgaXMgc2F2ZWQNCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKFBMQVRGT1JNX0FBX0ZFVENILCB7DQogICAgICAgICdzY2VuYXJpb0lkJzogdGhpcy5hY3RpdmVTY2VuYXJpby5pZCwNCiAgICAgICAgJ3BsYXRmb3JtSWQnOiB0aGlzLmFjdGl2ZVBsYXRmb3JtLmlkLA0KICAgICAgfSkNCiAgICB9LA0KICAgIGdldFBsYXRmb3JtTGlzdCgpIHsNCiAgICAgIGlmICh0aGlzLnRlbXBsYXRlID09PSB0cnVlKSB7DQogICAgICAgIGxldCBlbmRwb2ludCA9IGAvYXBpL3BsYXRmb3JtbmFtZXMvYDsNCiAgICAgICAgYXBpU2VydmljZShlbmRwb2ludCwgIkdFVCIpLnRoZW4oZGF0YSA9PiB7DQogICAgICAgICAgdGhpcy5wbGF0Zm9ybXMgPSBkYXRhLnJlc3VsdHM7DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sDQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5nZXRBQVN1bW1hcnlEYXRhKCk7DQogICAgdGhpcy5nZXRQbGF0Zm9ybUxpc3QoKTsNCiAgfQ0KfTsNCg=="},{"version":3,"sources":["InvestmentDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0PA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"InvestmentDetail.vue","sourceRoot":"src/components","sourcesContent":["<template lang=\"html\">\r\n  <v-container class='half-rounded-card-bottom-only grey3 px-6 pt-0'>\r\n    <v-row>\r\n      <v-col :cols=\"5\">\r\n        <v-card height=\"100%\" class=\"rounded-card small-text \">\r\n          <v-card-title class=\"grey1 justify-center subtitle-1 pa-2\">\r\n            Investment Details\r\n          </v-card-title>\r\n          <v-container class=\"py-3 px-4\">\r\n            <v-form @submit.prevent=\"onSubmit\" ref=\"form\">\r\n              <v-row v-if=\"template===true\">\r\n                <v-col >\r\n                  <v-autocomplete\r\n                    v-model=\"inv.name\"\r\n                    :items=\"investmentNames\"\r\n                    :return-object=\"true\"\r\n                    item-text=\"name\"\r\n                    dense\r\n                    label=\"Investment Name\"/>\r\n                </v-col>\r\n              </v-row>\r\n\r\n                <v-row dense >\r\n                  <v-col>\r\n                    <v-text-field\r\n                      hide-details=\"auto\"\r\n                      :rules=\"$rulePercentage\"\r\n                      label=\"Fee\"\r\n                      type=\"number\"\r\n                      suffix=\"%\"\r\n                      :value=\"getPercentage(inv, 'investment_fee')\"\r\n                      @change=\"setPercentage($event, inv, '_investment_fee')\"\r\n                    />\r\n                  </v-col>\r\n                  <v-col>\r\n                    <v-text-field\r\n                    hide-details=\"auto\"\r\n                    :rules=\"$rulePercentage\"\r\n                    label=\"Buy spread\"\r\n                    type=\"number\"\r\n                    suffix=\"%\"\r\n                    :value=\"getPercentage(inv, 'buy_spread')\"\r\n                    @change=\"setPercentage($event, inv, 'buy_spread')\"\r\n                   />\r\n                  </v-col>\r\n                  <v-col>\r\n                    <v-text-field\r\n                    hide-details=\"auto\"\r\n                    :rules=\"$rulePercentage\"\r\n                    label=\"Sell spread\"\r\n                    type=\"number\"\r\n                    suffix=\"%\"\r\n                    :value=\"getPercentage(inv, 'sell_spread')\"\r\n                    @change=\"setPercentage($event, inv, 'sell_spread')\" />\r\n                  </v-col>\r\n                </v-row>\r\n                <v-row dense>\r\n                  <v-col>\r\n                    <v-autocomplete\r\n                      class=\"pt-2\"\r\n                      hide-details\r\n                      clearable\r\n                      :value=\"inv.investment_class\"\r\n                      @input=\"(inv.investment_class = $event) && (inv.investment_class_id = $event.id)\"\r\n                      :items=\"investmentClassList\"\r\n                      item-text=\"name\"\r\n                      return-object\r\n                      placeholder=\"Investment class\"/>\r\n                  </v-col>\r\n                </v-row>\r\n                <v-row dense>\r\n                  <v-col>\r\n                    <v-checkbox\r\n                      dense\r\n                      class=\"checkbox-small-label\"\r\n                      v-model=\"inv.cash\"\r\n                      hide-details\r\n                      label=\"Cash Account\"></v-checkbox>\r\n                  </v-col>\r\n                  <v-col>\r\n                    <v-checkbox\r\n                      class=\"checkbox-small-label\"\r\n                      dense\r\n                      v-model=\"inv.TD\"\r\n                      hide-details\r\n                      label=\"Term Deposit\"></v-checkbox>\r\n                  </v-col>\r\n                </v-row>\r\n                <v-row dense v-if=\"platformFees.length > 1\">\r\n                  <v-col>\r\n                    <v-select\r\n                      class=\"smalltext\"\r\n                      hide-details\r\n                      :value=\"inv.platform_fee_group_name\"\r\n                      @input=\"overrideFeeGroup($event)\"\r\n                      :items=\"platformFees\"\r\n                      item-text=\"description\"\r\n                      return-object\r\n                      label=\"Fee Group\"/>\r\n                  </v-col>\r\n                  <v-col :cols=\"4\">\r\n                    <v-checkbox\r\n                      class=\"checkbox-small-label\"\r\n                      dense\r\n                      v-model=\"inv.override_fee_group\"\r\n                      hide-details\r\n                      label=\"Override\"></v-checkbox>\r\n                  </v-col>\r\n                </v-row>\r\n                <v-row v-if=\"template===true\">\r\n                  <v-col>\r\n                    <v-text-field\r\n                    label=\"APIR Code\"\r\n                    dense\r\n                    v-model=\"inv.APIR_code\" />\r\n                  </v-col>\r\n                  <v-col>\r\n                    <v-text-field\r\n                    label=\"ASX Code\"\r\n                    dense\r\n                    v-model=\"inv.ASX_code\" />\r\n                  </v-col>\r\n                  <v-col>\r\n                    <v-text-field\r\n                    label=\"Other Code\"\r\n                    dense\r\n                    v-model=\"inv.other_code\" />\r\n                  </v-col>\r\n                </v-row>\r\n                <v-row v-if=\"template==true\">\r\n                  <v-col>\r\n                    <v-autocomplete\r\n                      label=\"Platform Limitation\"\r\n                      dense\r\n                      v-model=\"inv.platform_limitation\"\r\n                      :items=\"platforms\"\r\n                      item-text=\"name\"\r\n                      item-value=\"id\"\r\n                    />\r\n                  </v-col>\r\n                </v-row>\r\n              </v-form>\r\n            </v-container>\r\n          </v-card>\r\n        </v-col>\r\n        <v-col v-if=\"!template\" :cols=\"7\">\r\n          <v-card class=\"rounded-card small-text\">\r\n            <v-row class=\"grey1 ma-0 pa-0\">\r\n              <v-col :cols=\"2\" class=\"ma-0 pa-0\">\r\n              </v-col>\r\n              <v-col :cols=\"8\" class=\"justify-center ma-0 pa-0\">\r\n                <v-card-title class=\"grey1 justify-center subtitle-1 pa-2\">\r\n                  Asset Allocation\r\n                </v-card-title>\r\n              </v-col>\r\n              <v-col :cols=\"2\" class=\"ma-0 pa-0 pr-4\">\r\n                <v-menu\r\n                  class=\"transparent\"\r\n                  v-model=\"menu\"\r\n                  :close-on-content-click=\"false\"\r\n                  :close-on-click=\"false\"\r\n                  offset-x\r\n                  >\r\n                  <template v-slot:activator=\"{ on }\">\r\n                    <v-card-actions>\r\n                      <v-spacer />\r\n                      <v-btn icon small\r\n                        v-on=\"on\"\r\n                        style=\"z-index:0\"\r\n                        >\r\n                        <v-icon\r\n                          color=\"teal\"\r\n                          dark\r\n                          icon>\r\n                        mdi-circle-edit-outline\r\n                        </v-icon>\r\n                      </v-btn>\r\n                    </v-card-actions>\r\n                  </template>\r\n                  <v-card class=\"rounded-card small-text\">\r\n                    <v-form ref=\"aaForm\">\r\n                      <v-list  class=\"dialog-header dense\">\r\n                        <v-list-item  style=\"min-height:30px\">\r\n                          <v-list-item-title class=\"pa-0\">Modify Asset Allocation</v-list-item-title>\r\n                          <v-list-item-action>\r\n                            <v-btn icon>\r\n                              <v-icon>mdi-save</v-icon>\r\n                            </v-btn>\r\n                          </v-list-item-action>\r\n                        </v-list-item>\r\n                      </v-list>\r\n                      <v-list >\r\n                        <v-list-item\r\n                          v-for=\"aa in uniqueAA\"\r\n                          :key=\"aa.id\">\r\n                          <v-list-item-content style=\"font-size:13px\" class=\"small-text\">{{aa.custom_name}}</v-list-item-content>\r\n                          <v-list-item-action class=\"my-0\" style=\"width:33%\">\r\n                            <v-text-field\r\n                              dense\r\n                              rounded solo\r\n                              suffix=\"%\"\r\n                              :value=\"getAAPercentage(aa)\"\r\n                              @change=\"setAAPercentage($event, aa)\"\r\n                              @input=\"validateAA()\"\r\n                              hide-details\r\n                              :rules=\"rulePercTo100\"\r\n                              type=\"number\"\r\n                            />\r\n                          </v-list-item-action>\r\n                        </v-list-item>\r\n                      </v-list>\r\n                      <v-divider></v-divider>\r\n                      <v-card-actions>\r\n                        <v-card-text class=\"pa-2 red--text\">\r\n                        {{aaError}}\r\n                      </v-card-text>\r\n\r\n                        <v-spacer></v-spacer>\r\n\r\n                        <v-btn\r\n                          class=\"mr-4\"\r\n                          style=\"width:80px\"\r\n                          color=\"primary\"\r\n                          rounded small\r\n                          @click=\"hideAATab\"\r\n                        >\r\n                          Hide\r\n                        </v-btn>\r\n                      </v-card-actions>\r\n                    </v-form>\r\n                  </v-card>\r\n                </v-menu>\r\n            </v-col>\r\n</v-row>\r\n\r\n            <InvestmentAAChartSummary\r\n              :RPAANames=\"customRPAANames\"\r\n              :aaSummary=\"aaSummary\"\r\n            />\r\n          </v-card>\r\n        </v-col>\r\n      </v-row>\r\n      <v-card-actions>\r\n        <v-spacer></v-spacer>\r\n          <v-btn width=\"80\" small @click=\"onSubmit\" color=\"primary\" rounded><span class=\"font-weight-light\">Save</span></v-btn>\r\n      </v-card-actions>\r\n    </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { apiService } from \"@/common/api.service.js\";\r\n\r\nimport {\r\n  PLATFORM_AA_FETCH\r\n} from \"@/store/actions.type\";\r\nimport { mapGetters } from \"vuex\";\r\nimport { rulePercTo100, rulePercentage } from \"@/components/mixins/Rules.js\";\r\n\r\nimport InvestmentAAChartSummary from \"@/components/InvestmentAAChartSummary.vue\";\r\n\r\nexport default {\r\n  name: \"InvestmentDetail\",\r\n  mixins: [rulePercTo100, rulePercentage],\r\n  props: {\r\n    investment: {\r\n      type: Object,\r\n      required: false,\r\n      default: function() {\r\n        return {\r\n          id: null,\r\n          custom_name: null,\r\n          investment_class: null,\r\n          amount: null,\r\n          investment_fee: null,\r\n          _investment_fee: null,\r\n          buy_spread: null,\r\n          sell_spread: null,\r\n          cash: false,\r\n          TD: false,\r\n          override_fee_group: false,\r\n        }\r\n      },\r\n    },\r\n    template: {\r\n      type: Boolean,\r\n      required: false\r\n    },\r\n    investmentClassList: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    platformFees: {\r\n      type: Array,\r\n      required: false\r\n    }\r\n  },\r\n  components: {\r\n    InvestmentAAChartSummary,\r\n  },\r\n  data() {\r\n    return {\r\n      menu: false,\r\n      aaError: null,\r\n      dialog: false,\r\n      platforms: null,\r\n      aaSummary: null,\r\n      aa: null,\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"activeScenario\", \"activePlatform\",\"investmentNames\"]),\r\n    rulePercTo100() {\r\n      return  [v => {\r\n        if ((v <= 100) && (v >= 0)) {\r\n          return true\r\n        } else {\r\n          return \"Must be between 0% and 100\"\r\n        }\r\n      }]\r\n    },\r\n    inv: {\r\n      get() {\r\n        return this.investment\r\n      },\r\n      set(newInvestment) {\r\n        return newInvestment\r\n      }\r\n    },\r\n    customRPAANames() {\r\n      if (!this._.isEmpty(this.aaSummary)) {\r\n\r\n        let custom_names = this.aaSummary.map(a => a.custom_name);\r\n        let aanames = [...new Set(custom_names)];\r\n        return aanames\r\n        // return this.aaSummary.map(e => e.custom_name);\r\n      } else {\r\n        return []\r\n      }\r\n    },\r\n    clearAA() {\r\n      if (!this._.isEmpty(this.aa) && !this._.isEmpty(this.aaSummary) ) {\r\n        // If an investment has any asset allocation names which do not match\r\n        // the default RP AA Names (AASummary.name), this computed prop will\r\n        // trigger a signal on save to clear all existing asset allocations\r\n        // and replace them with default RP AA Names.\r\n        let defaultRPAANames = this.aaSummary.map(e => e.name);\r\n        let cleanAANames = this.aa.filter(e => e.name != null)\r\n        let AANames = cleanAANames.map(e => e.name.name);\r\n        return (AANames.some(e => !defaultRPAANames.includes(e)))\r\n      } else {\r\n        return true\r\n      }\r\n    },\r\n    rebuiltAA() {\r\n      if (this.clearAA) {\r\n        let rebuiltAA = new Array;\r\n        for (let aa of this.aaSummary) {\r\n          let item = new Object;\r\n          item['name_id'] = null;\r\n          item['rp_name_id'] = aa.id\r\n          item['investment'] = this.inv.id;\r\n          if (aa.aa_total_perc) {\r\n            item['percentage'] = (aa.aa_total_perc).toFixed(6);\r\n          } else {\r\n            item['percentage'] = 0\r\n          }\r\n          item['name'] = new Object();\r\n          item.name['name'] = aa.name;\r\n          if (item['percentage'] > 0) {\r\n            rebuiltAA.push(item)\r\n          }\r\n        }\r\n        return rebuiltAA\r\n      } else {\r\n        return null\r\n      }\r\n    },\r\n    uniqueAA() {\r\n      if (!this._.isEmpty(this.aaSummary)) {\r\n        let unique = [];\r\n        for (const aa of this.aaSummary) {\r\n          if (!this._.isEmpty(unique)) {\r\n            // Checks for existence of the current iterated item's custom_name in the unique list\r\n            let found = unique.some(x => x.custom_name === aa.custom_name);\r\n            if (!found) {\r\n              //If no match, add it\r\n              unique.push(aa);\r\n            }\r\n          } else {\r\n            // If the unique list does not yet exist, add the first item in the aa array\r\n            unique.push(aa);\r\n          }\r\n        }\r\n        return unique\r\n      } else {\r\n        return []\r\n      }\r\n    },\r\n    customOrFull() {\r\n      if (this.inv.custom_name != null) {\r\n        return this.inv.custom_name\r\n      } else {\r\n        return this.inv.name.name\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    inv() {\r\n      this.getAAData();\r\n      if (this.template === true) {\r\n        this.inv.template = true;\r\n        this.getPlatformList();\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    validateAA() {\r\n      if (this.$refs.aaForm.validate()){\r\n        this.clearAAError();\r\n        return true\r\n      } else {\r\n        this.setAAError();\r\n        return false;\r\n      }\r\n    },\r\n    clearAAError() {\r\n      this.aaError = null;\r\n    },\r\n    setAAError(){\r\n      this.aaError = \"Must be between 0% and 100\";\r\n    },\r\n    setAAPercentage(event, uniqueSummaryItem) {\r\n      if (this.validateAA()) {\r\n        let aaSummaryItem = this.aaSummary.find(x => x.id === uniqueSummaryItem.id)\r\n        // Checks for merged items that are not shown on the unique aa list\r\n        // That is, merged items that are essentailly \"hidden\".\r\n        // There will always be one merged item that is not hidden\r\n        let mergedAASummaryItems = this.aaSummary.filter(\r\n          x => (x.id != uniqueSummaryItem.id) && (x.custom_name === uniqueSummaryItem.custom_name) )\r\n        // If there are merged items, clear their values\r\n        if (!this._.isEmpty(mergedAASummaryItems)) {\r\n          for (let item of mergedAASummaryItems) {\r\n            item.aa_total_perc = 0\r\n            const idx = this.aa.findIndex(x => x.rp_name_id === item.id);\r\n            if (idx >= 0) {\r\n              this.aa[idx].percentage = 0;\r\n            }\r\n          }\r\n        }\r\n        if (this.clearAA) {\r\n          // If AA is being cleared, edit the aaSummary array directly.\r\n          // This will also update the rebuiltAA computed property for API call\r\n          aaSummaryItem.aa_total_perc = event/100;\r\n        } else {\r\n          // Add to aaSummary so it updates chart etc\r\n          aaSummaryItem.aa_total_perc = event/100;\r\n\r\n          let aa_item = this.aa.find(x => x.name.name === aaSummaryItem.name);\r\n          // Looks for the aa item in the aa array that matches the RPAA name\r\n          if (aa_item != null) {\r\n            // If it finds it, sets the value\r\n            aa_item.percentage = event/100;\r\n          } else {\r\n            // If it can't find it in the array, creates a new entry\r\n            let new_aa_item = new Object()\r\n            new_aa_item['name_id'] = null;\r\n            new_aa_item['rp_name_id'] = aaSummaryItem.id\r\n            new_aa_item['investment'] = this.inv.id;\r\n            new_aa_item['percentage'] = event/100;\r\n            new_aa_item['name'] = new Object();\r\n            new_aa_item.name['name'] = aaSummaryItem.name;\r\n            if (event > 0) {\r\n              this.aa.push(new_aa_item)\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    getAAPercentage(aa) {\r\n      const filterArr = this.aaSummary.filter(\r\n        x => x.custom_name === aa.custom_name)\r\n      // creates an array with the found items\r\n      const percentageArr = filterArr.map(a => a.aa_total_perc);\r\n      if (!this._.isEmpty(percentageArr)) {\r\n        // If the found item array has value, sums the items\r\n        const percentageTotal = percentageArr.reduce((acc, curVal) =>\r\n          Number(acc) + Number(curVal))\r\n        return (percentageTotal*100).toFixed(2);\r\n      } else {\r\n        // If no data is found, adds 0 to the array to maintain data order.\r\n        return 0\r\n      }\r\n      // return (result*100).toFixed(2);\r\n    },\r\n    setPercentage(event, inv, field) {\r\n      this.inv[field] = (event/100).toFixed(6);\r\n    },\r\n    getPercentage(inv, field) {\r\n      return +(this.inv[field]*100).toFixed(2);\r\n    },\r\n    getAASummaryData() {\r\n      if (this.template === false) {\r\n        let endpoint = `/api/scenarios/${this.activeScenario.id}/platforms/${this.activePlatform.id}/investments/${this.inv.id}/aasummary/`;\r\n        apiService(endpoint).then(data => {\r\n            this.aaSummary = data.results;\r\n            this.getAAData();\r\n        })\r\n      }\r\n    },\r\n    getAAData() {\r\n      if (this.template === false) {\r\n        let endpoint = `/api/scenarios/${this.activeScenario.id}/platforms/${this.activePlatform.id}/investments/${this.inv.id}/aa/`;\r\n        apiService(endpoint).then(data => {\r\n            this.aa = data.results;\r\n        });\r\n      }\r\n    },\r\n    hideAATab(){\r\n      if (this.validateAA()){\r\n        this.menu = false;\r\n      }\r\n    },\r\n    overrideFeeGroup(event) {\r\n      this.inv.platform_fee_group = event.id;\r\n      this.inv.override_fee_group = true;\r\n    },\r\n    onSubmit() {\r\n      // Vuetify does not support nested forms, so check if the aaError message\r\n      // exists as a form of validation\r\n      if (!this.aaError && this.$refs.form.validate()) {\r\n\r\n        if (this.template === false) {\r\n          let invObj = this.inv\r\n          if (this.clearAA) {\r\n            // Adds a new aa array to the investment if the old one is to be\r\n            // cleared\r\n            invObj['clear_aa'] = this.clearAA;\r\n            invObj['asset_allocations'] = this.rebuiltAA;\r\n          } else {\r\n            // Otherwise adds the existing aa array\r\n            invObj['asset_allocations'] = this.aa;\r\n          }\r\n          for (let aa of invObj.asset_allocations) {\r\n              aa.name = aa.name.id\r\n          }\r\n          let endpoint = `/api/scenarios/${this.activeScenario.id}/platforms/${this.activePlatform.id}/investments/${this.inv.id}/`;\r\n          apiService(endpoint, \"PATCH\", invObj).then(data => {\r\n            this.inv = data;\r\n            console.log(data);\r\n            this.getAASummaryData();\r\n            this.getActivePlatformAA();\r\n          });\r\n\r\n        } else {\r\n          let endpoint = `/api/investmenttemplate/${this.inv.id}/`;\r\n          apiService(endpoint, \"PATCH\", this.inv)\r\n        }\r\n      }\r\n    },\r\n    getActivePlatformAA() {\r\n      // Refreshes the platform aa chart when an investment is saved\r\n      this.$store.dispatch(PLATFORM_AA_FETCH, {\r\n        'scenarioId': this.activeScenario.id,\r\n        'platformId': this.activePlatform.id,\r\n      })\r\n    },\r\n    getPlatformList() {\r\n      if (this.template === true) {\r\n        let endpoint = `/api/platformnames/`;\r\n        apiService(endpoint, \"GET\").then(data => {\r\n          this.platforms = data.results;\r\n        });\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.getAASummaryData();\r\n    this.getPlatformList();\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n  div.v-menu__content {\r\n    border-radius: 40px !important;\r\n  }\r\n  .v-input >>> .v-select__selections {\r\n    font-size: .8rem !important;\r\n  }\r\n  .v-list >>> .v-list-item__title {\r\n    font-size: .8rem !important;\r\n  }\r\n</style>\r\n"]}]}