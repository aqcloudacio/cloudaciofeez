{"remainingRequest":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\views\\Verify.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\views\\Verify.vue","mtime":1604976047903},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7DQoNCmltcG9ydCB7DQogIFVTRVJfVkVSSUZZLA0KICBVU0VSX1JFU0VORF9WRVJJRklDQVRJT05fVE9LRU4sDQogfSBmcm9tICJAL3N0b3JlL2FjdGlvbnMudHlwZSI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIlZlcmlmeVJlc2V0IiwNCiAgcHJvcHM6IHsNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgdG9rZW46IHRoaXMuJHJvdXRlLnBhcmFtcy50b2tlbiwNCiAgICAgIHVzZXI6IHRoaXMuJHJvdXRlLnBhcmFtcy51c2VyLA0KICAgICAgd3JvbmdDcmVkOiB0cnVlLA0KICAgICAgZXJyb3I6IG51bGwsDQogICAgICBzbmFja2JhcjogZmFsc2UsDQogICAgICBzbmFja2JhclRleHQ6ICcnLA0KICAgIH07DQogIH0sDQogIGNvbXBvbmVudHM6IHsNCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICAuLi5tYXBHZXR0ZXJzKFsiYWN0aXZlVXNlciIsICJsb2dnZWRJbiJdKSwNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIG9uU3VibWl0KCkgew0KICAgICAgaWYgKHRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgpKSB7DQogICAgICAgIHRoaXMuZXJyb3IgPSBudWxsOw0KICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaChVU0VSX1ZFUklGWSwgew0KICAgICAgICAgICdpZCc6IHRoaXMudXNlciwNCiAgICAgICAgICAndmVyaWZ5X3Rva2VuJzogdGhpcy50b2tlbiwNCiAgICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgICAgdGhpcy5nb0xvZ2luKCk7DQogICAgICAgIH0pLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICB0aGlzLmVycm9yID0gJ1ZlcmlmaWNhdGlvbiBjb2RlIGlzIGludmFsaWQnOw0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgcmVzZW5kQ29kZSgpIHsNCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKFVTRVJfUkVTRU5EX1ZFUklGSUNBVElPTl9UT0tFTiwgew0KICAgICAgICAnaWQnOiB0aGlzLnVzZXIsDQogICAgICB9KQ0KICAgICAgdGhpcy5zbmFja2JhciA9IHRydWU7DQogICAgICB0aGlzLnNuYWNrYmFyVGV4dCA9ICJWZXJpZmljYXRpb24gY29kZSBoYXMgYmVlbiBzZW50IHRvIHlvdXIgZW1haWwuIg0KICAgICAgbGV0IHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7DQogICAgICAgIHRoaXMuc25hY2tiYXIgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5zbmFja2JhclRleHQgPSAiIg0KICAgICAgICAvL2NsZWFyIHRpbWVyDQogICAgICB9LCA2MDAwKQ0KICAgIH0sDQogICAgZ29Mb2dpbigpIHsNCiAgICAgIHRoaXMuc25hY2tiYXIgPSB0cnVlOw0KICAgICAgdGhpcy5zbmFja2JhclRleHQgPSAiQWNjb3VudCBzdWNjZXNzZnVsbHkgdmFsaWRhdGVkLiBSZWRpcmVjdGluZy4uLiINCiAgICAgIGxldCB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICBjbGVhclRpbWVvdXQodGltZXIpOw0KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICdsb2dpbicgfSkNCiAgICAgICAgLy9jbGVhciB0aW1lcg0KICAgICAgfSwgMzAwMCkNCiAgICB9LA0KICAgIGNoZWNrTG9nZ2VkSW4oKSB7DQogICAgICBpZiAodGhpcy5sb2dnZWRJbikgew0KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICdob21lJyB9KQ0KICAgICAgfQ0KICAgIH0sDQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5jaGVja0xvZ2dlZEluKCk7DQogIH0sDQp9Ow0K"},{"version":3,"sources":["Verify.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Verify.vue","sourceRoot":"src/views","sourcesContent":["<template lang=\"html\">\r\n  <v-container\r\n  fluid\r\n    class=\"justify-center align-center flex d-flex\">\r\n    <v-card\r\n      min-width=\"500px\"\r\n      min-height=\"600px\"\r\n      class=\"pa-12\">\r\n      <v-form submit.prevent=\"onSubmit\" ref=\"form\">\r\n        <v-img\r\n          src=\"http://127.0.0.1:8000/media/logo.PNG\"\r\n          position=\"center\"\r\n          width=\"300px\"\r\n          class=\"mx-auto\"\r\n          />\r\n        <v-card-subtitle\r\n          class=\"text-center\">\r\n          The King of Product Recommendations\r\n        </v-card-subtitle>\r\n        <v-card-title\r\n          class=\"justify-center\">\r\n          Verify Account\r\n        </v-card-title>\r\n        <v-text-field\r\n          outlined\r\n          class=\"mx-8 mb-3\"\r\n          v-model=\"token\"\r\n          hide-details=\"auto\"\r\n          :rules=\"[v => !!(v) || 'Please enter a code']\"\r\n          placeholder=\"Verification Code\"\r\n          validate-on-blur\r\n          :error-messages=\"error ? error : null\"\r\n          @change=\"error = null\"\r\n        />\r\n        <v-row justify=\"center\">\r\n          <v-col\r\n          class=\"mx-8\"\r\n            align=\"center\"\r\n          >\r\n            <v-btn\r\n              v-if=\"!error\"\r\n              @click=\"onSubmit()\"\r\n              color=\"primary\"\r\n              width=\"100%\" >\r\n              Continue\r\n            </v-btn>\r\n            <v-btn\r\n              v-else\r\n              @click=\"resendCode()\"\r\n              color=\"warning\"\r\n              width=\"100%\" >\r\n              Resend Verification Code\r\n            </v-btn>\r\n          </v-col>\r\n        </v-row>\r\n      </v-form>\r\n    </v-card>\r\n    <v-snackbar\r\n      v-model=\"snackbar\"\r\n      >\r\n      {{snackbarText}}\r\n    </v-snackbar>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from \"vuex\";\r\n\r\nimport {\r\n  USER_VERIFY,\r\n  USER_RESEND_VERIFICATION_TOKEN,\r\n } from \"@/store/actions.type\";\r\n\r\nexport default {\r\n  name: \"VerifyReset\",\r\n  props: {\r\n  },\r\n  data() {\r\n    return {\r\n      token: this.$route.params.token,\r\n      user: this.$route.params.user,\r\n      wrongCred: true,\r\n      error: null,\r\n      snackbar: false,\r\n      snackbarText: '',\r\n    };\r\n  },\r\n  components: {\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"activeUser\", \"loggedIn\"]),\r\n  },\r\n  methods: {\r\n    onSubmit() {\r\n      if (this.$refs.form.validate()) {\r\n        this.error = null;\r\n        this.$store.dispatch(USER_VERIFY, {\r\n          'id': this.user,\r\n          'verify_token': this.token,\r\n        }).then(() => {\r\n          this.goLogin();\r\n        }).catch(() => {\r\n          this.error = 'Verification code is invalid';\r\n        })\r\n      }\r\n    },\r\n    resendCode() {\r\n      this.$store.dispatch(USER_RESEND_VERIFICATION_TOKEN, {\r\n        'id': this.user,\r\n      })\r\n      this.snackbar = true;\r\n      this.snackbarText = \"Verification code has been sent to your email.\"\r\n      let timer = setTimeout(() => {\r\n        clearTimeout(timer);\r\n        this.snackbar = false;\r\n        this.snackbarText = \"\"\r\n        //clear timer\r\n      }, 6000)\r\n    },\r\n    goLogin() {\r\n      this.snackbar = true;\r\n      this.snackbarText = \"Account successfully validated. Redirecting...\"\r\n      let timer = setTimeout(() => {\r\n        clearTimeout(timer);\r\n        this.$router.push({ name: 'login' })\r\n        //clear timer\r\n      }, 3000)\r\n    },\r\n    checkLoggedIn() {\r\n      if (this.loggedIn) {\r\n        this.$router.push({ name: 'home' })\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.checkLoggedIn();\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"css\" scoped>\r\n</style>\r\n"]}]}