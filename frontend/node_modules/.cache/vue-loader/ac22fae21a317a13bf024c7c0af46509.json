{"remainingRequest":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\views\\Platform.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\views\\Platform.vue","mtime":1599025369021},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgXyBmcm9tICdsb2Rhc2gnDQppbXBvcnQgeyBhcGlTZXJ2aWNlIH0gZnJvbSAiQC9jb21tb24vYXBpLnNlcnZpY2UuanMiOw0KaW1wb3J0IFBsYXRmb3JtRGV0YWlsIGZyb20gIkAvY29tcG9uZW50cy9QbGF0Zm9ybURldGFpbC52dWUiOw0KaW1wb3J0IEludmVzdG1lbnRTdW1tYXJ5IGZyb20gIkAvY29tcG9uZW50cy9JbnZlc3RtZW50U3VtbWFyeS52dWUiOw0KaW1wb3J0IFBsYXRmb3JtQUFDaGFydFN1bW1hcnkgZnJvbSAiQC9jb21wb25lbnRzL1BsYXRmb3JtQUFDaGFydFN1bW1hcnkudnVlIjsNCmltcG9ydCB7DQogIENMRUFSX0FDVElWRV9QTEFURk9STSwNCiAgQ0xFQVJfQUNUSVZFX1NDRU5BUklPLA0KfSBmcm9tICJAL3N0b3JlL211dGF0aW9ucy50eXBlIjsNCmltcG9ydCB7DQogIFNDRU5BUklPX0ZFVENILA0KICBQTEFURk9STV9GRVRDSA0KfSBmcm9tICJAL3N0b3JlL2FjdGlvbnMudHlwZSI7DQoNCg0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJQbGF0Zm9ybSIsDQogIHByb3ZpZGUoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHBsYXRmb3JtSWQ6IHRoaXMuaWQsDQogICAgICBzY2VuYXJpb0lkOiB0aGlzLnNjZW5hcmlvSWQNCiAgICB9Ow0KICB9LA0KICBwcm9wczogew0KICAgIHNjZW5hcmlvSWQ6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIHJlcXVpcmVkOiB0cnVlDQogICAgfSwNCiAgICBpZDogew0KICAgICAgdHlwZTogTnVtYmVyLA0KICAgICAgcmVxdWlyZWQ6IHRydWUNCiAgICB9DQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHBsYXRmb3JtOiB7fSwNCiAgICAgIHBsYXRmb3JtRmVlczogW10sDQogICAgICBlcnJvcjogbnVsbCwNCiAgICAgIGZlZUNvbG9yczogWw0KICAgICAgICAncmVkJywNCiAgICAgICAgJ3RlYWwnLA0KICAgICAgICAnZ3JlZW4nLA0KICAgICAgICAnb3JhbmdlJywNCiAgICAgICAgJ3llbGxvdycsDQogICAgICBdDQogICAgfTsNCiAgfSwNCiAgY29tcG9uZW50czogew0KICAgIEludmVzdG1lbnRTdW1tYXJ5LA0KICAgIFBsYXRmb3JtRGV0YWlsLA0KICAgIFBsYXRmb3JtQUFDaGFydFN1bW1hcnksDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBzZXRQYWdlVGl0bGUodGl0bGUpIHsNCiAgICAgIGRvY3VtZW50LnRpdGxlID0gdGl0bGU7DQogICAgfSwNCiAgICBnZXRCb3RoKCkgew0KICAgICAgdGhpcy5nZXRQbGF0Zm9ybURhdGEoKTsNCiAgICAgIHRoaXMuZ2V0UGxhdGZvcm1GZWVEYXRhKCk7DQogICAgfSwNCiAgICBnZXRQbGF0Zm9ybURhdGEoKSB7DQogICAgICBsZXQgZW5kcG9pbnQgPSBgL2FwaS9zY2VuYXJpb3MvJHt0aGlzLnNjZW5hcmlvSWR9L3BsYXRmb3Jtcy8ke3RoaXMuaWR9L2A7DQogICAgICBhcGlTZXJ2aWNlKGVuZHBvaW50KS50aGVuKGRhdGEgPT4gew0KICAgICAgICB0aGlzLnBsYXRmb3JtID0gZGF0YTsNCiAgICAgICAgaWYgKGRhdGEubmFtZSAhPSBudWxsKSB7DQogICAgICAgICAgdGhpcy5zZXRQYWdlVGl0bGUoZGF0YS5uYW1lLm5hbWUpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuc2V0UGFnZVRpdGxlKGRhdGEuY3VzdG9tX25hbWUpOw0KICAgICAgICB9DQogICAgICAgIHRoaXMuZ2V0UGxhdGZvcm1GZWVEYXRhKCk7DQogICAgICB9KTsNCiAgICB9LA0KICAgIGdldFBsYXRmb3JtRmVlRGF0YSgpIHsNCiAgICAgIGxldCBlbmRwb2ludCA9IGAvYXBpL3NjZW5hcmlvcy8ke3RoaXMuc2NlbmFyaW9JZH0vcGxhdGZvcm1zLyR7dGhpcy5pZH0vcGxhdGZvcm1mZWVzL2A7DQogICAgICBhcGlTZXJ2aWNlKGVuZHBvaW50KS50aGVuKGRhdGEgPT4gew0KICAgICAgICB0aGlzLnBsYXRmb3JtRmVlcyA9IGRhdGEucmVzdWx0czsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgc2V0QWN0aXZlU2NlbmFyaW8oKXsNCiAgICAgIGlmIChfLmlzRW1wdHkodGhpcy5hY3RpdmVTY2VuYXJpbykpIHsNCiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goU0NFTkFSSU9fRkVUQ0gsIHRoaXMuc2NlbmFyaW9JZCkNCiAgICAgIH0NCiAgICAgIGlmIChfLmlzRW1wdHkodGhpcy5hY3RpdmVQbGF0Zm9ybSkpIHsNCiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goUExBVEZPUk1fRkVUQ0gsIHsNCiAgICAgICAgICAnc2NlbmFyaW9JZCc6IHRoaXMuc2NlbmFyaW9JZCwNCiAgICAgICAgICAncGxhdGZvcm1JZCc6IHRoaXMuaWQNCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5nZXRQbGF0Zm9ybURhdGEoKTsNCiAgICB0aGlzLnNldEFjdGl2ZVNjZW5hcmlvKCk7DQogIH0sDQogIGJlZm9yZURlc3Ryb3koKSB7DQogICAgdGhpcy4kc3RvcmUuY29tbWl0KENMRUFSX0FDVElWRV9QTEFURk9STSk7DQogIH0sDQogIGJlZm9yZVJvdXRlTGVhdmUodG8sIGZyb20sIG5leHQpIHsNCiAgICBpZiAodG8ubmFtZSAhPSAic2NlbmFyaW8iKSB7DQogICAgICB0aGlzLiRzdG9yZS5jb21taXQoQ0xFQVJfQUNUSVZFX1NDRU5BUklPKTsNCiAgICB9DQogICAgbmV4dCgpDQogIH0NCn07DQo="},{"version":3,"sources":["Platform.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Platform.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <v-container class=\"pa-0\" v-if=\"platform\" >\r\n      <v-row>\r\n        <v-col>\r\n          <v-row>\r\n            <v-col>\r\n      <PlatformDetail\r\n        :platform=\"platform\"\r\n        :platformFees=\"platformFees\"\r\n        @modify-platform=\"getPlatformData\"\r\n        @add-portfolio=\"getPlatformData\"\r\n        @modify-fees=\"getBoth\"\r\n\r\n      />\r\n    </v-col>\r\n  </v-row>\r\n\r\n      </v-col>\r\n          <v-col>\r\n            <PlatformAAChartSummary\r\n              :platform=\"platform\"\r\n      />\r\n          </v-col>\r\n</v-row>\r\n<v-row>\r\n  <v-col v-if=\"platform.platform_total != null\">\r\n    <!-- <template\r\n      v-for=\"platformFee in platformFees\"\r\n      >\r\n\r\n      </template> -->\r\n      <InvestmentSummary\r\n        @add-investment=\"getPlatformData\"\r\n        @delete-object=\"getPlatformData\"\r\n        :platformTotal=\"platform.platform_total\"      />\r\n      </v-col>\r\n        </v-row>\r\n    </v-container>\r\n</template>\r\n\r\n<script>\r\nimport _ from 'lodash'\r\nimport { apiService } from \"@/common/api.service.js\";\r\nimport PlatformDetail from \"@/components/PlatformDetail.vue\";\r\nimport InvestmentSummary from \"@/components/InvestmentSummary.vue\";\r\nimport PlatformAAChartSummary from \"@/components/PlatformAAChartSummary.vue\";\r\nimport {\r\n  CLEAR_ACTIVE_PLATFORM,\r\n  CLEAR_ACTIVE_SCENARIO,\r\n} from \"@/store/mutations.type\";\r\nimport {\r\n  SCENARIO_FETCH,\r\n  PLATFORM_FETCH\r\n} from \"@/store/actions.type\";\r\n\r\n\r\n\r\nexport default {\r\n  name: \"Platform\",\r\n  provide() {\r\n    return {\r\n      platformId: this.id,\r\n      scenarioId: this.scenarioId\r\n    };\r\n  },\r\n  props: {\r\n    scenarioId: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    id: {\r\n      type: Number,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      platform: {},\r\n      platformFees: [],\r\n      error: null,\r\n      feeColors: [\r\n        'red',\r\n        'teal',\r\n        'green',\r\n        'orange',\r\n        'yellow',\r\n      ]\r\n    };\r\n  },\r\n  components: {\r\n    InvestmentSummary,\r\n    PlatformDetail,\r\n    PlatformAAChartSummary,\r\n  },\r\n  methods: {\r\n    setPageTitle(title) {\r\n      document.title = title;\r\n    },\r\n    getBoth() {\r\n      this.getPlatformData();\r\n      this.getPlatformFeeData();\r\n    },\r\n    getPlatformData() {\r\n      let endpoint = `/api/scenarios/${this.scenarioId}/platforms/${this.id}/`;\r\n      apiService(endpoint).then(data => {\r\n        this.platform = data;\r\n        if (data.name != null) {\r\n          this.setPageTitle(data.name.name);\r\n        } else {\r\n          this.setPageTitle(data.custom_name);\r\n        }\r\n        this.getPlatformFeeData();\r\n      });\r\n    },\r\n    getPlatformFeeData() {\r\n      let endpoint = `/api/scenarios/${this.scenarioId}/platforms/${this.id}/platformfees/`;\r\n      apiService(endpoint).then(data => {\r\n        this.platformFees = data.results;\r\n      });\r\n    },\r\n    setActiveScenario(){\r\n      if (_.isEmpty(this.activeScenario)) {\r\n        this.$store.dispatch(SCENARIO_FETCH, this.scenarioId)\r\n      }\r\n      if (_.isEmpty(this.activePlatform)) {\r\n        this.$store.dispatch(PLATFORM_FETCH, {\r\n          'scenarioId': this.scenarioId,\r\n          'platformId': this.id\r\n        })\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getPlatformData();\r\n    this.setActiveScenario();\r\n  },\r\n  beforeDestroy() {\r\n    this.$store.commit(CLEAR_ACTIVE_PLATFORM);\r\n  },\r\n  beforeRouteLeave(to, from, next) {\r\n    if (to.name != \"scenario\") {\r\n      this.$store.commit(CLEAR_ACTIVE_SCENARIO);\r\n    }\r\n    next()\r\n  }\r\n};\r\n</script>\r\n"]}]}