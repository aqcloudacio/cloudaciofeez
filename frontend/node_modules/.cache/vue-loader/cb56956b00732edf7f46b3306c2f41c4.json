{"remainingRequest":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\components\\InvestmentSummary.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\components\\InvestmentSummary.vue","mtime":1591676978409},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBhcGlTZXJ2aWNlIH0gZnJvbSAiQC9jb21tb24vYXBpLnNlcnZpY2UuanMiOw0KaW1wb3J0IEFkZEludmVzdG1lbnQgZnJvbSAiQC9jb21wb25lbnRzL0FkZEludmVzdG1lbnQudnVlIjsNCmltcG9ydCBJbnZlc3RtZW50RGV0YWlsIGZyb20gIkAvY29tcG9uZW50cy9JbnZlc3RtZW50RGV0YWlsLnZ1ZSI7DQppbXBvcnQgRGVsZXRlT2JqIGZyb20gIkAvY29tcG9uZW50cy9EZWxldGVPYmoudnVlIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiSW52ZXN0bWVudFN1bW1hcnkiLA0KICBpbmplY3Q6IFsicGxhdGZvcm1JZCIsICJzY2VuYXJpb0lkIl0sDQogIHByb3BzOiB7DQogICAgLy8gT25seSBwYXNzZWQgYXMgYSBwcm9wIHNvIGl0IGNhbiBiZSB3YXRjaGVkIGFuZCBuZXcgaW52ZXN0bWVudHMgY2FsbGVkDQogICAgLy8gd2hlbiB2YWx1ZXMgY2hhbmdlcyAoZHVlIHRvIHBvcnRmb2xpbyBhZGRpdGlvbikNCiAgICBwbGF0Zm9ybVRvdGFsOiB7DQogICAgICB0eXBlOiBOdW1iZXIsDQogICAgICByZXF1aXJlZDogdHJ1ZQ0KICAgIH0NCiAgfSwNCiAgY29tcG9uZW50czogew0KICAgIEFkZEludmVzdG1lbnQsDQogICAgRGVsZXRlT2JqLA0KICAgIEludmVzdG1lbnREZXRhaWwNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgZXJyb3I6IG51bGwsDQogICAgICBpbnZlc3RtZW50czogW10sDQogICAgICBwb3J0Zm9saW86IHt9LA0KICAgICAgUlBBQU5hbWVzOiBbXSwNCiAgICAgIGNoYW5nZUxpc3Q6IFtdLA0KICAgICAgaW52ZXN0bWVudENsYXNzTGlzdDogW10sDQogICAgICBlZGl0TmFtZTogW10sDQogICAgICBlZGl0QW1vdW50OiBbXSwNCiAgICAgIGR1cGxpY2F0ZTogW10sDQogICAgfTsNCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICBwbGF0Zm9ybVRvdGFsOiBmdW5jdGlvbiAoKSB7DQogICAgICB0aGlzLmdldEludmVzdG1lbnREYXRhKCk7DQogICAgfSwNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHN0cmluZ1RvQ29sb3VyKHN0cikgew0KICAgICAgbGV0IGhhc2ggPSAwOw0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgaGFzaCA9IHN0ci5jaGFyQ29kZUF0KGkpICsgKChoYXNoIDw8IDUpIC0gaGFzaCk7DQogICAgICB9DQogICAgICBsZXQgY29sb3VyID0gJyMnOw0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHsNCiAgICAgICAgbGV0IHZhbHVlID0gKGhhc2ggPj4gKGkgKiA4KSkgJiAweEZGOw0KICAgICAgICBjb2xvdXIgKz0gKCcwMCcgKyB2YWx1ZS50b1N0cmluZygxNikpLnN1YnN0cigtMik7DQogICAgICB9DQogICAgICByZXR1cm4gY29sb3VyOw0KICAgIH0sDQogICAgZG9OYW1lRWRpdChmaWVsZCwgaW5kZXgsIGV2ZW50LCBpZCl7DQogICAgICBsZXQgaXRlbSA9IHRoaXMuaW52ZXN0bWVudHNbaW5kZXhdLmN1c3RvbV9uYW1lOw0KICAgICAgbGV0IG9yaWdpbmFsID0gdGhpcy5kdXBsaWNhdGUuZmluZCh4ID0+IHguaWQgPT09IGlkKVtmaWVsZF07DQogICAgICBpZiAoKG9yaWdpbmFsID09ICIiKSAmJiAoZmllbGQgPT0gImN1c3RvbV9uYW1lIikpIHsNCiAgICAgICAgb3JpZ2luYWwgPSB0aGlzLmR1cGxpY2F0ZS5maW5kKHggPT4geC5pZCA9PT0gaWQpLm5hbWUubmFtZTsNCiAgICAgIH0NCg0KICAgICAgaXRlbSA9IGV2ZW50Ow0KICAgICAgdGhpcy5pbnZlc3RtZW50c1tpbmRleF0uY3VzdG9tX25hbWUgPSBldmVudDsNCg0KICAgICAgaWYgKHRoaXMuZWRpdE5hbWUuaW5jbHVkZXMoaWQpKSB7DQogICAgICAgIGlmIChpdGVtPT1vcmlnaW5hbCkgew0KICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLmVkaXROYW1lLmZpbmRJbmRleChpdGVtID0+IGl0ZW0uaWQgPT09IGlkKTsNCiAgICAgICAgICB0aGlzLmVkaXROYW1lLnNwbGljZShpLDEpDQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuZWRpdE5hbWUucHVzaChpZCk7DQogICAgICB9DQogICAgfSwNCiAgICBkb0Ftb3VudEVkaXQoZmllbGQsIGluZGV4LCBldmVudCwgaWQpew0KICAgICAgbGV0IGl0ZW0gPSB0aGlzLmludmVzdG1lbnRzW2luZGV4XVtmaWVsZF07DQogICAgICBsZXQgb3JpZ2luYWwgPSB0aGlzLmR1cGxpY2F0ZS5maW5kKHggPT4geC5pZCA9PT0gaWQpW2ZpZWxkXTsNCiAgICAgIGl0ZW0gPSBldmVudC50YXJnZXQudmFsdWU7DQogICAgICBpZiAodGhpcy5lZGl0QW1vdW50LmluY2x1ZGVzKGlkKSkgew0KICAgICAgICAvLyB2LWN1cnJlbmN5LWZpZWxkIGdpdmVzIHRoZSB0YXJnZXQudmFsdWUgYXMgYSBudW1iZXIgd2l0aCBjb21tYXMsDQogICAgICAgIC8vIHNvIGl0IG11c3QgYmUgY29udmVydGVkIHRvIGEgZmxvYXQgdG8gY29tcGFyZSB0byB0aGUgb3JpZ2luYWwuDQogICAgICAgICAgaWYgKHBhcnNlRmxvYXQoaXRlbS5yZXBsYWNlKC8sL2csICcnKSkgPT0gb3JpZ2luYWwpIHsNCiAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLmVkaXRBbW91bnQuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5pZCA9PT0gaWQpOw0KICAgICAgICAgICAgdGhpcy5lZGl0QW1vdW50LnNwbGljZShpLDEpDQogICAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5lZGl0QW1vdW50LnB1c2goaWQpOw0KICAgICAgfQ0KICAgIH0sDQogICAgcmVtb3ZlRnJvbUVkaXRlZChpbnZlc3RtZW50KSB7DQogICAgICAvL1JlbW92ZSBmcm9tIEVkaXRBbW91bnQgTGlzdA0KICAgICAgY29uc3QgaSA9IHRoaXMuZWRpdEFtb3VudC5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmlkID09PSBpbnZlc3RtZW50LmlkKTsNCiAgICAgIHRoaXMuZWRpdEFtb3VudC5zcGxpY2UoaSwxKQ0KICAgICAgY29uc3QgeCA9IHRoaXMuZWRpdE5hbWUuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5pZCA9PT0gaW52ZXN0bWVudC5pZCk7DQogICAgICB0aGlzLmVkaXROYW1lLnNwbGljZSh4LDEpDQogICAgfSwNCiAgICBnZXRJbnZlc3RtZW50RGF0YSgpIHsNCiAgICAgIGxldCBlbmRwb2ludCA9IGAvYXBpL3NjZW5hcmlvcy8ke3RoaXMuc2NlbmFyaW9JZH0vcGxhdGZvcm1zLyR7dGhpcy5wbGF0Zm9ybUlkfS9pbnZlc3RtZW50cy9gOw0KICAgICAgYXBpU2VydmljZShlbmRwb2ludCkudGhlbihkYXRhID0+IHsNCiAgICAgICAgdGhpcy5pbnZlc3RtZW50cyA9IGRhdGEucmVzdWx0czsNCiAgICAgICAgdGhpcy5kdXBsaWNhdGUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuaW52ZXN0bWVudHMpKTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgZ2V0SW52ZXN0bWVudENsYXNzTGlzdCgpIHsNCiAgICAgIGxldCBlbmRwb2ludCA9IGAvYXBpL2ludmVzdG1lbnRjbGFzcy9gOw0KICAgICAgYXBpU2VydmljZShlbmRwb2ludCwgIkdFVCIpLnRoZW4oZGF0YSA9PiB7DQogICAgICAgIHRoaXMuaW52ZXN0bWVudENsYXNzTGlzdCA9IGRhdGEucmVzdWx0czsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgZ2V0UlBOYW1lRGF0YSgpIHsNCiAgICAgIGxldCBlbmRwb2ludCA9IGAvYXBpL2FjdGl2ZXJpc2twcm9maWxlbmFtZXMvYDsNCiAgICAgIGFwaVNlcnZpY2UoZW5kcG9pbnQpLnRoZW4oZGF0YSA9PiB7DQogICAgICAgIHRoaXMuUlBBQU5hbWVzID0gZGF0YS5yZXN1bHRzOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBhZGRJbnZlc3RtZW50KGludmVzdG1lbnQpIHsNCiAgICAgIHRoaXMuaW52ZXN0bWVudHMudW5zaGlmdChpbnZlc3RtZW50KTsNCiAgICAgIHRoaXMuZHVwbGljYXRlLnVuc2hpZnQoLi4ue2ludmVzdG1lbnR9KTsNCiAgICB9LA0KICAgIGFkZFBvcnRmb2xpbyhwb3J0Zm9saW8pIHsNCiAgICAgIHRoaXMucG9ydGZvbGlvID0gcG9ydGZvbGlvOw0KICAgIH0sDQogICAgZGVsZXRlT2JqKG9iamVjdFRvRGVsZXRlKSB7DQogICAgICB0aGlzLiRkZWxldGUodGhpcy5pbnZlc3RtZW50cywgdGhpcy5pbnZlc3RtZW50cy5pbmRleE9mKG9iamVjdFRvRGVsZXRlKSk7DQogICAgfSwNCiAgICBhZGRUb0NoYW5nZWQoaW52ZXN0bWVudCkgew0KICAgICAgaWYgKCEodGhpcy5jaGFuZ2VMaXN0LmluY2x1ZGVzKGludmVzdG1lbnQpKSkgew0KICAgICAgICB0aGlzLmNoYW5nZUxpc3QucHVzaChpbnZlc3RtZW50KTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGNvbnN0IGkgPSB0aGlzLmNoYW5nZUxpc3QuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5pZCA9PT0gaW52ZXN0bWVudC5pZCk7DQogICAgICAgIHRoaXMuY2hhbmdlTGlzdC5zcGxpY2UoaSwgMSk7DQogICAgICAgIHRoaXMuY2hhbmdlTGlzdC5wdXNoKGludmVzdG1lbnQpOw0KICAgICAgfQ0KICAgIH0sDQogICAgdXBkYXRlSW52ZXN0bWVudChpbnZlc3RtZW50KSB7DQogICAgICBsZXQgZW5kcG9pbnQgPSBgL2FwaS9zY2VuYXJpb3MvJHt0aGlzLnNjZW5hcmlvSWR9L3BsYXRmb3Jtcy8ke3RoaXMucGxhdGZvcm1JZH0vaW52ZXN0bWVudHMvJHtpbnZlc3RtZW50LmlkfS9gOw0KICAgICAgYXBpU2VydmljZShlbmRwb2ludCwgIlBBVENIIiwgew0KICAgICAgICBjdXN0b21fbmFtZTogaW52ZXN0bWVudC5jdXN0b21fbmFtZSwNCiAgICAgICAgYW1vdW50OiBpbnZlc3RtZW50LmFtb3VudCwNCiAgICAgIH0pLnRoZW4oZGF0YSA9PiB7DQogICAgICAgIHRoaXMuJGVtaXQoImFkZC1pbnZlc3RtZW50IiwgZGF0YSk7DQogICAgICAgIHRoaXMucmVtb3ZlRnJvbUVkaXRlZChpbnZlc3RtZW50KTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgb25TdWJtaXQoKSB7DQogICAgICBpZiAodGhpcy5jaGFuZ2VMaXN0KSB7DQogICAgICAgIGZvciAobGV0IGk9MDsgaSA8IHRoaXMuY2hhbmdlTGlzdC5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIGxldCBlbmRwb2ludCA9IGAvYXBpL3NjZW5hcmlvcy8ke3RoaXMuc2NlbmFyaW9JZH0vcGxhdGZvcm1zLyR7dGhpcy5wbGF0Zm9ybUlkfS9pbnZlc3RtZW50cy8ke3RoaXMuY2hhbmdlTGlzdFtpXS5pZH0vYDsNCiAgICAgICAgICBhcGlTZXJ2aWNlKGVuZHBvaW50LCAiUEFUQ0giLCB7DQogICAgICAgICAgICBjdXN0b21fbmFtZTogdGhpcy5jaGFuZ2VMaXN0W2ldLmN1c3RvbV9uYW1lLA0KICAgICAgICAgICAgYW1vdW50OiB0aGlzLmNoYW5nZUxpc3RbaV0uYW1vdW50LA0KICAgICAgICAgIH0pLnRoZW4oZGF0YSA9PiB7DQogICAgICAgICAgICB0aGlzLmdldEludmVzdG1lbnREYXRhKCkNCiAgICAgICAgICAgIHRoaXMuJGVtaXQoImFkZC1pbnZlc3RtZW50IiwgZGF0YSk7DQogICAgICAgICAgfSk7DQogICAgICAgIH07DQogICAgICB9Ow0KICAgIH0sDQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5nZXRJbnZlc3RtZW50RGF0YSgpOw0KICAgIHRoaXMuZ2V0SW52ZXN0bWVudENsYXNzTGlzdCgpOw0KICAgIHRoaXMuZ2V0UlBOYW1lRGF0YSgpOw0KICB9DQp9Ow0K"},{"version":3,"sources":["InvestmentSummary.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"InvestmentSummary.vue","sourceRoot":"src/components","sourcesContent":["<template lang=\"html\">\r\n  <v-form @submit.prevent=\"onSubmit\">\r\n    <v-expansion-panels\r\n      focusable\r\n\r\n      multiple>\r\n      <AddInvestment @add-investment=\"getInvestmentData\" v-on=\"$listeners\" />\r\n\r\n        <v-expansion-panel v-for=\"(investment,index) in investments\"\r\n                :key=\"investment.id\"\r\n                dense>\r\n          <v-expansion-panel-header class=\"pa-3\">\r\n            <v-row class=\"ma-0\">\r\n            <v-col\r\n              @click.stop\r\n              :cols=\"7\"\r\n              class=\"py-0\">\r\n              <v-text-field\r\n                @click.stop\r\n                @change=\"addToChanged(investment)\"\r\n                :value=\"investment.custom_name ? investment.custom_name : investment.name.name\"\r\n                @input=\"doNameEdit('custom_name', index, $event, investment.id)\"\r\n                hide-details=\"auto\"\r\n                dense solo >\r\n                <template\r\n                  v-if=\"editName.includes(investment.id) || editAmount.includes(investment.id)\"\r\n                  v-slot:append-outer>\r\n                    <v-icon\r\n                      color=\"teal\"\r\n                      @click.stop\r\n                      @click=\"updateInvestment(investment)\"\r\n                    >mdi-check-circle-outline</v-icon>\r\n                </template>\r\n              </v-text-field>\r\n            </v-col>\r\n            <v-col\r\n              @click.stop\r\n              :cols=\"3\"  class=\"py-0\">\r\n              <v-currency-field\r\n                @click.stop\r\n                @change=\"addToChanged(investment)\"\r\n                v-model=\"investment.amount\"\r\n                @input.native=\"doAmountEdit('amount', index, $event, investment.id)\"\r\n                hide-details=\"auto\"\r\n                prefix=\"$\"\r\n                :decimal-length=\"0\"\r\n                dense solo />\r\n\r\n            </v-col>\r\n            <v-col :cols=\"2\" class=\"py-0\">\r\n              <DeleteObj\r\n                :objectType=\"'investment'\"\r\n                :objectToDelete=\"investment\"\r\n                :portfolioId=\"investment.portfolio\"\r\n                @delete-object=\"getInvestmentData\"\r\n                v-on=\"$listeners\"\r\n              />\r\n              <v-btn :color=\"stringToColour(investment.platform_fee_group_name)\">\r\n                {{investment.platform_fee_group_name[0]}}\r\n              </v-btn>\r\n            </v-col>\r\n          </v-row>\r\n\r\n        </v-expansion-panel-header>\r\n        <v-expansion-panel-content>\r\n           <InvestmentDetail\r\n             @add-investment=\"getInvestmentData\"\r\n             v-on=\"$listeners\"\r\n             :investment=\"investment\"\r\n             :RPAANames=\"RPAANames\"\r\n             :investmentClassList=\"investmentClassList\"\r\n           />\r\n         </v-expansion-panel-content>\r\n      </v-expansion-panel>\r\n    </v-expansion-panels>\r\n      <v-row v-if=\"investments.length\">\r\n        <v-col>\r\n          <v-btn type=\"submit\" color=\"primary\" dark dense>Update All</v-btn>\r\n        </v-col>\r\n      </v-row>\r\n\r\n\r\n  </v-form>\r\n</template>\r\n\r\n<script>\r\nimport { apiService } from \"@/common/api.service.js\";\r\nimport AddInvestment from \"@/components/AddInvestment.vue\";\r\nimport InvestmentDetail from \"@/components/InvestmentDetail.vue\";\r\nimport DeleteObj from \"@/components/DeleteObj.vue\";\r\n\r\nexport default {\r\n  name: \"InvestmentSummary\",\r\n  inject: [\"platformId\", \"scenarioId\"],\r\n  props: {\r\n    // Only passed as a prop so it can be watched and new investments called\r\n    // when values changes (due to portfolio addition)\r\n    platformTotal: {\r\n      type: Number,\r\n      required: true\r\n    }\r\n  },\r\n  components: {\r\n    AddInvestment,\r\n    DeleteObj,\r\n    InvestmentDetail\r\n  },\r\n  data() {\r\n    return {\r\n      error: null,\r\n      investments: [],\r\n      portfolio: {},\r\n      RPAANames: [],\r\n      changeList: [],\r\n      investmentClassList: [],\r\n      editName: [],\r\n      editAmount: [],\r\n      duplicate: [],\r\n    };\r\n  },\r\n  watch: {\r\n    platformTotal: function () {\r\n      this.getInvestmentData();\r\n    },\r\n  },\r\n  methods: {\r\n    stringToColour(str) {\r\n      let hash = 0;\r\n      for (let i = 0; i < str.length; i++) {\r\n        hash = str.charCodeAt(i) + ((hash << 5) - hash);\r\n      }\r\n      let colour = '#';\r\n      for (let i = 0; i < 3; i++) {\r\n        let value = (hash >> (i * 8)) & 0xFF;\r\n        colour += ('00' + value.toString(16)).substr(-2);\r\n      }\r\n      return colour;\r\n    },\r\n    doNameEdit(field, index, event, id){\r\n      let item = this.investments[index].custom_name;\r\n      let original = this.duplicate.find(x => x.id === id)[field];\r\n      if ((original == \"\") && (field == \"custom_name\")) {\r\n        original = this.duplicate.find(x => x.id === id).name.name;\r\n      }\r\n\r\n      item = event;\r\n      this.investments[index].custom_name = event;\r\n\r\n      if (this.editName.includes(id)) {\r\n        if (item==original) {\r\n          const i = this.editName.findIndex(item => item.id === id);\r\n          this.editName.splice(i,1)\r\n        }\r\n      } else {\r\n        this.editName.push(id);\r\n      }\r\n    },\r\n    doAmountEdit(field, index, event, id){\r\n      let item = this.investments[index][field];\r\n      let original = this.duplicate.find(x => x.id === id)[field];\r\n      item = event.target.value;\r\n      if (this.editAmount.includes(id)) {\r\n        // v-currency-field gives the target.value as a number with commas,\r\n        // so it must be converted to a float to compare to the original.\r\n          if (parseFloat(item.replace(/,/g, '')) == original) {\r\n            const i = this.editAmount.findIndex(item => item.id === id);\r\n            this.editAmount.splice(i,1)\r\n          }\r\n      } else {\r\n        this.editAmount.push(id);\r\n      }\r\n    },\r\n    removeFromEdited(investment) {\r\n      //Remove from EditAmount List\r\n      const i = this.editAmount.findIndex(item => item.id === investment.id);\r\n      this.editAmount.splice(i,1)\r\n      const x = this.editName.findIndex(item => item.id === investment.id);\r\n      this.editName.splice(x,1)\r\n    },\r\n    getInvestmentData() {\r\n      let endpoint = `/api/scenarios/${this.scenarioId}/platforms/${this.platformId}/investments/`;\r\n      apiService(endpoint).then(data => {\r\n        this.investments = data.results;\r\n        this.duplicate = JSON.parse(JSON.stringify(this.investments));\r\n      });\r\n    },\r\n    getInvestmentClassList() {\r\n      let endpoint = `/api/investmentclass/`;\r\n      apiService(endpoint, \"GET\").then(data => {\r\n        this.investmentClassList = data.results;\r\n      });\r\n    },\r\n    getRPNameData() {\r\n      let endpoint = `/api/activeriskprofilenames/`;\r\n      apiService(endpoint).then(data => {\r\n        this.RPAANames = data.results;\r\n      });\r\n    },\r\n    addInvestment(investment) {\r\n      this.investments.unshift(investment);\r\n      this.duplicate.unshift(...{investment});\r\n    },\r\n    addPortfolio(portfolio) {\r\n      this.portfolio = portfolio;\r\n    },\r\n    deleteObj(objectToDelete) {\r\n      this.$delete(this.investments, this.investments.indexOf(objectToDelete));\r\n    },\r\n    addToChanged(investment) {\r\n      if (!(this.changeList.includes(investment))) {\r\n        this.changeList.push(investment);\r\n      } else {\r\n        const i = this.changeList.findIndex(item => item.id === investment.id);\r\n        this.changeList.splice(i, 1);\r\n        this.changeList.push(investment);\r\n      }\r\n    },\r\n    updateInvestment(investment) {\r\n      let endpoint = `/api/scenarios/${this.scenarioId}/platforms/${this.platformId}/investments/${investment.id}/`;\r\n      apiService(endpoint, \"PATCH\", {\r\n        custom_name: investment.custom_name,\r\n        amount: investment.amount,\r\n      }).then(data => {\r\n        this.$emit(\"add-investment\", data);\r\n        this.removeFromEdited(investment);\r\n      });\r\n    },\r\n    onSubmit() {\r\n      if (this.changeList) {\r\n        for (let i=0; i < this.changeList.length; i++) {\r\n          let endpoint = `/api/scenarios/${this.scenarioId}/platforms/${this.platformId}/investments/${this.changeList[i].id}/`;\r\n          apiService(endpoint, \"PATCH\", {\r\n            custom_name: this.changeList[i].custom_name,\r\n            amount: this.changeList[i].amount,\r\n          }).then(data => {\r\n            this.getInvestmentData()\r\n            this.$emit(\"add-investment\", data);\r\n          });\r\n        };\r\n      };\r\n    },\r\n  },\r\n  mounted() {\r\n    this.getInvestmentData();\r\n    this.getInvestmentClassList();\r\n    this.getRPNameData();\r\n  }\r\n};\r\n</script>\r\n"]}]}