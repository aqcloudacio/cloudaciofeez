{"remainingRequest":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\components\\ModifyTierFees.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\components\\ModifyTierFees.vue","mtime":1588738095089},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBhcGlTZXJ2aWNlIH0gZnJvbSAiQC9jb21tb24vYXBpLnNlcnZpY2UuanMiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJNb2RpZnlUaWVyRmVlcyIsDQogIGluamVjdDogew0KICAgIHBsYXRmb3JtSWQ6IHsgZGVmYXVsdDogbnVsbCB9LA0KICAgIHNjZW5hcmlvSWQ6IHsgZGVmYXVsdDogbnVsbCB9LA0KICB9LA0KICBwcm9wczogew0KICAgIHBsYXRmb3JtRmVlOiB7DQogICAgICB0eXBlOiBPYmplY3QsDQogICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICB9LA0KICAgIHBsYXRmb3JtOiB7DQogICAgICB0eXBlOiBOdW1iZXIsDQogICAgICByZXF1aXJlZDogZmFsc2UsDQogICAgfQ0KICB9LA0KICBjb21wb25lbnRzOiB7DQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGVycm9yOiBudWxsLA0KICAgICAgdGllckRpYWxvZzogZmFsc2UsDQogICAgICB0aWVyVGhyZXNob2xkczogW10sDQogICAgICB0aWVyUGVyY3M6IFtdLA0KICAgICAgbmV3VGhyZXNob2xkOiB7DQogICAgICAgIGxvd2VyX3RocmVzaG9sZDogMCwNCiAgICAgICAgdGhyZXNob2xkOiAwLA0KICAgICAgICBwbGF0Zm9ybV9mZWVfZ3JvdXA6IG51bGwNCiAgICAgIH0sDQogICAgICBuZXdQZXJjZW50YWdlOiB7DQogICAgICAgIHBlcmNlbnRhZ2U6IDAsDQogICAgICAgIHBsYXRmb3JtX2ZlZV9ncm91cDogbnVsbA0KICAgICAgfSwNCiAgICB9Ow0KICB9LA0KICBjb21wdXRlZDogew0KICAgIHNlbGVjdFBsYXRmb3JtSUQ6IGZ1bmN0aW9uKCkgew0KICAgICAgaWYgKHRoaXMucGxhdGZvcm0gPT0gbnVsbCkgew0KICAgICAgICByZXR1cm4gdGhpcy5wbGF0Zm9ybUlkOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuIHRoaXMucGxhdGZvcm07DQogICAgICB9DQogICAgfSwNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGdldFRpZXJUaHJlc2hvbGRzKCkgew0KICAgICAgbGV0IGVuZHBvaW50ID0gbnVsbA0KICAgICAgaWYgKHRoaXMuc2NlbmFyaW9JZCA9PSBudWxsKSB7DQogICAgICAgIGVuZHBvaW50ID0gYC9hcGkvcGxhdGZvcm10ZW1wbGF0ZXMvJHt0aGlzLnBsYXRmb3JtfS9mZWVzLyR7dGhpcy5wbGF0Zm9ybUZlZS5pZH0vdGllci10aHJlc2hvbGRzL2A7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBlbmRwb2ludCA9IGAvYXBpL3NjZW5hcmlvcy8ke3RoaXMuc2NlbmFyaW9JZH0vcGxhdGZvcm1zLyR7dGhpcy5zZWxlY3RQbGF0Zm9ybUlEfS9wbGF0Zm9ybWZlZXMvJHt0aGlzLnBsYXRmb3JtRmVlLmlkfS90aWVyLXRocmVzaG9sZHMvYDsNCiAgICAgIH07DQogICAgICBhcGlTZXJ2aWNlKGVuZHBvaW50KS50aGVuKGRhdGEgPT4gew0KICAgICAgICB0aGlzLnRpZXJUaHJlc2hvbGRzID0gZGF0YS5yZXN1bHRzOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBnZXRUaWVyUGVyY3MoKSB7DQogICAgICBsZXQgZW5kcG9pbnQgPSBudWxsDQogICAgICBpZiAodGhpcy5zY2VuYXJpb0lkID09IG51bGwpIHsNCiAgICAgICAgZW5kcG9pbnQgPSBgL2FwaS9wbGF0Zm9ybXRlbXBsYXRlcy8ke3RoaXMucGxhdGZvcm19L2ZlZXMvJHt0aGlzLnBsYXRmb3JtRmVlLmlkfS90aWVyLXBlcmNzL2A7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBlbmRwb2ludCA9IGAvYXBpL3NjZW5hcmlvcy8ke3RoaXMuc2NlbmFyaW9JZH0vcGxhdGZvcm1zLyR7dGhpcy5zZWxlY3RQbGF0Zm9ybUlEfS9wbGF0Zm9ybWZlZXMvJHt0aGlzLnBsYXRmb3JtRmVlLmlkfS90aWVyLXBlcmNzL2A7DQogICAgICB9Ow0KICAgICAgYXBpU2VydmljZShlbmRwb2ludCkudGhlbihkYXRhID0+IHsNCiAgICAgICAgdGhpcy50aWVyUGVyY3MgPSBkYXRhLnJlc3VsdHM7DQogICAgICB9KTsNCiAgICB9LA0KICAgIHNldExvd2VyVGhyZXNob2xkKGV2ZW50LCBpbmRleCkgew0KICAgICAgdGhpcy50aWVyVGhyZXNob2xkc1tpbmRleF0ubG93ZXJfdGhyZXNob2xkID0gZXZlbnQ7DQogICAgICBpZiAoaW5kZXggPiAwKSB7DQogICAgICAgIHRoaXMudGllclRocmVzaG9sZHNbaW5kZXgtMV0udGhyZXNob2xkID0gZXZlbnQ7DQogICAgICB9DQogICAgfSwNCiAgICBzZXRUaHJlc2hvbGQoZXZlbnQsIGluZGV4KSB7DQogICAgICB0aGlzLnRpZXJUaHJlc2hvbGRzW2luZGV4XS50aHJlc2hvbGQgPSBldmVudDsNCiAgICAgIGlmIChpbmRleCA8IHRoaXMudGllclRocmVzaG9sZHMubGVuZ3RoIC0xKSB7DQogICAgICAgIHRoaXMudGllclRocmVzaG9sZHNbaW5kZXgrMV0ubG93ZXJfdGhyZXNob2xkID0gZXZlbnQ7DQogICAgICB9DQogICAgfSwNCiAgICBhZGROZXdUaWVyKCl7DQogICAgICB0aGlzLm5ld1RocmVzaG9sZC5wbGF0Zm9ybV9mZWVfZ3JvdXAgPSB0aGlzLnBsYXRmb3JtRmVlLmlkOw0KICAgICAgdGhpcy50aWVyVGhyZXNob2xkcy5wdXNoKHsuLi50aGlzLm5ld1RocmVzaG9sZH0pOw0KICAgICAgdGhpcy5uZXdUaHJlc2hvbGQubG93ZXJfdGhyZXNob2xkID0gMDsNCiAgICAgIHRoaXMubmV3VGhyZXNob2xkLnRocmVzaG9sZCA9IDA7DQogICAgICB0aGlzLm5ld1BlcmNlbnRhZ2UucGxhdGZvcm1fZmVlX2dyb3VwID0gdGhpcy5wbGF0Zm9ybUZlZS5pZDsNCiAgICAgIGxldCBwZXJjRGl2aWRlID0gdGhpcy5uZXdQZXJjZW50YWdlLnBlcmNlbnRhZ2UgLyAxMDA7DQogICAgICB0aGlzLm5ld1BlcmNlbnRhZ2UucGVyY2VudGFnZSA9IHBlcmNEaXZpZGU7DQogICAgICB0aGlzLnRpZXJQZXJjcy5wdXNoKHsuLi50aGlzLm5ld1BlcmNlbnRhZ2V9KTsNCiAgICAgIHRoaXMubmV3UGVyY2VudGFnZS5wZXJjZW50YWdlID0gMDsNCiAgICB9LA0KICAgIHNldFBlcmNlbnRhZ2UoZXZlbnQsIGluZGV4KSB7DQogICAgICB0aGlzLnRpZXJQZXJjc1tpbmRleF0ucGVyY2VudGFnZSA9IGV2ZW50IC8gMTAwOw0KICAgIH0sDQogICAgZ2V0UGVyY2VudGFnZShpbmRleCkgew0KICAgICAgcmV0dXJuIHRoaXMudGllclBlcmNzW2luZGV4XS5wZXJjZW50YWdlKjEwMA0KICAgIH0sDQogICAgc2VsZWN0TWV0aG9kKGl0ZW0pIHsNCiAgICAgIGlmIChpdGVtLmlkKSB7DQogICAgICAgIHJldHVybiAiUEFUQ0giDQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gIlBPU1QiDQogICAgICB9Ow0KICAgIH0sDQogICAgdGhyZXNob2xkT3JQZXJjKGl0ZW0pIHsNCiAgICAgIGlmIChpdGVtLnRocmVzaG9sZCkgew0KICAgICAgICByZXR1cm4gInRpZXItdGhyZXNob2xkcyINCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiAidGllci1wZXJjcyINCiAgICAgIH0NCiAgICB9LA0KICAgIGVuZHBvaW50U2VsZWN0b3IoaXRlbSl7DQogICAgICBsZXQgc3ViUm91dGUgPSB0aGlzLnRocmVzaG9sZE9yUGVyYyhpdGVtKTsNCiAgICAgIGlmICh0aGlzLnNjZW5hcmlvSWQgPT0gbnVsbCkgew0KICAgICAgICBpZiAoaXRlbS5pZCkgew0KICAgICAgICAgIHJldHVybiBgL2FwaS9wbGF0Zm9ybXRlbXBsYXRlcy8ke3RoaXMucGxhdGZvcm19L2ZlZXMvJHt0aGlzLnBsYXRmb3JtRmVlLmlkfS8ke3N1YlJvdXRlfS8ke2l0ZW0uaWR9L2A7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgcmV0dXJuIGAvYXBpL3BsYXRmb3JtdGVtcGxhdGVzLyR7dGhpcy5wbGF0Zm9ybX0vZmVlcy8ke3RoaXMucGxhdGZvcm1GZWUuaWR9LyR7c3ViUm91dGV9L2A7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGlmIChpdGVtLmlkKSB7DQogICAgICAgICAgcmV0dXJuIGAvYXBpL3NjZW5hcmlvcy8ke3RoaXMuc2NlbmFyaW9JZH0vcGxhdGZvcm1zLyR7dGhpcy5zZWxlY3RQbGF0Zm9ybUlEfS9wbGF0Zm9ybWZlZXMvJHt0aGlzLnBsYXRmb3JtRmVlLmlkfS8ke3N1YlJvdXRlfS8ke2l0ZW0uaWR9L2A7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgcmV0dXJuIGAvYXBpL3NjZW5hcmlvcy8ke3RoaXMuc2NlbmFyaW9JZH0vcGxhdGZvcm1zLyR7dGhpcy5zZWxlY3RQbGF0Zm9ybUlEfS9wbGF0Zm9ybWZlZXMvJHt0aGlzLnBsYXRmb3JtRmVlLmlkfS8ke3N1YlJvdXRlfS9gOw0KICAgICAgICB9DQogICAgICB9Ow0KICAgIH0sDQogICAgb25TdWJtaXQoKSB7DQogICAgICBmb3IgKGxldCBpPTA7IGkgPCB0aGlzLnRpZXJUaHJlc2hvbGRzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGxldCBlbmRwb2ludCA9IHRoaXMuZW5kcG9pbnRTZWxlY3Rvcih0aGlzLnRpZXJUaHJlc2hvbGRzW2ldKTsNCiAgICAgICAgYXBpU2VydmljZShlbmRwb2ludCwgdGhpcy5zZWxlY3RNZXRob2QodGhpcy50aWVyVGhyZXNob2xkc1tpXSksDQogICAgICAgICAgdGhpcy50aWVyVGhyZXNob2xkc1tpXQ0KICAgICAgICApLnRoZW4oZGF0YSA9PiB7DQogICAgICAgICAgdGhpcy50aWVyVGhyZXNob2xkc1tpXS5pZCA9IGRhdGEuaWQNCiAgICAgICAgfSkNCiAgICAgIH07DQogICAgICBmb3IgKGxldCBpPTA7IGkgPCB0aGlzLnRpZXJQZXJjcy5sZW5ndGg7IGkrKykgew0KICAgICAgICBsZXQgZW5kcG9pbnQgPSB0aGlzLmVuZHBvaW50U2VsZWN0b3IodGhpcy50aWVyUGVyY3NbaV0pOw0KICAgICAgICBhcGlTZXJ2aWNlKGVuZHBvaW50LCB0aGlzLnNlbGVjdE1ldGhvZCh0aGlzLnRpZXJQZXJjc1tpXSksDQogICAgICAgICAgdGhpcy50aWVyUGVyY3NbaV0NCiAgICAgICAgKS50aGVuKGRhdGEgPT4gew0KICAgICAgICAgIHRoaXMudGllclBlcmNzW2ldLmlkID0gZGF0YS5pZA0KICAgICAgICB9KQ0KICAgICAgfTsNCiAgICB9LA0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMuZ2V0VGllclBlcmNzKCk7DQogICAgdGhpcy5nZXRUaWVyVGhyZXNob2xkcygpOw0KICB9DQp9DQo="},{"version":3,"sources":["ModifyTierFees.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgHA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ModifyTierFees.vue","sourceRoot":"src/components","sourcesContent":["<template lang=\"html\">\r\n  <v-dialog v-model=\"tierDialog\">\r\n    <template v-slot:activator=\"{ on }\">\r\n      <v-btn color=\"primary\" v-on=\"on\">\r\n        <v-icon>\r\n          mdi-magnify\r\n        </v-icon>\r\n      </v-btn>\r\n    </template>\r\n    <v-form @submit.prevent=\"onSubmit\">\r\n      <v-container >\r\n        <v-row\r\n          dense>\r\n          <v-col>\r\n            <v-card>\r\n              <v-card-title>\r\n                Lower Threshold\r\n              </v-card-title>\r\n            </v-card>\r\n          </v-col>\r\n          <v-col>\r\n            <v-card>\r\n              <v-card-title>\r\n                Upper Threshold\r\n              </v-card-title>\r\n            </v-card>\r\n          </v-col>\r\n          <v-col>\r\n            <v-card>\r\n              <v-card-title>\r\n                Percentage Fee\r\n              </v-card-title>\r\n            </v-card>\r\n          </v-col>\r\n        </v-row>\r\n        <template\r\n          v-if=\"tierThresholds.length && tierPercs.length\">\r\n          <v-row\r\n            v-for=\"(threshold, i) in tierThresholds\"\r\n            :key=\"threshold.id\"\r\n\r\n            dense>\r\n            <v-col :cols=\"4\">\r\n              <v-currency-field\r\n                dense solo hide-details\r\n                :value = \"threshold.lower_threshold\"\r\n                @input = \"setLowerThreshold($event, i)\"\r\n                prefix=\"$\"\r\n                />\r\n            </v-col>\r\n            <v-col  :cols=\"4\">\r\n              <v-currency-field\r\n                dense solo hide-details\r\n                :value = \"threshold.threshold\"\r\n                @input = \"setThreshold($event, i)\"\r\n                prefix=\"$\"\r\n                />\r\n            </v-col>\r\n            <v-col  :cols=\"4\">\r\n              <v-text-field\r\n                dense solo hide-details\r\n                :value = \"getPercentage(i)\"\r\n                @input = \"setPercentage($event, i)\"\r\n                suffix=\"%\"\r\n                />\r\n            </v-col>\r\n          </v-row>\r\n        </template>\r\n        <v-row\r\n          dense>\r\n          <v-col :cols=\"4\">\r\n            <v-currency-field\r\n              dense solo hide-details\r\n              v-model = \"newThreshold.lower_threshold\"\r\n              prefix=\"$\"\r\n\r\n              />\r\n          </v-col>\r\n          <v-col  :cols=\"4\">\r\n            <v-currency-field\r\n              dense solo hide-details\r\n              v-model = \"newThreshold.threshold\"\r\n              prefix=\"$\"\r\n            />\r\n          </v-col>\r\n          <v-col\r\n            :cols=\"3\">\r\n            <v-text-field\r\n              dense solo hide-details\r\n              v-model = \"newPercentage.percentage\"\r\n              suffix=\"%\"\r\n            />\r\n          </v-col>\r\n          <v-col  :cols=\"1\">\r\n            <v-btn\r\n              color=\"primary\"\r\n              @click=\"addNewTier\">\r\n              <v-icon>\r\n                mdi-plus\r\n              </v-icon>\r\n            </v-btn>\r\n          </v-col>\r\n        </v-row>\r\n        <v-btn type=\"submit\" color=\"primary\">\r\n          Save\r\n        </v-btn>\r\n      </v-container>\r\n      </v-form>\r\n  </v-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { apiService } from \"@/common/api.service.js\";\r\n\r\nexport default {\r\n  name: \"ModifyTierFees\",\r\n  inject: {\r\n    platformId: { default: null },\r\n    scenarioId: { default: null },\r\n  },\r\n  props: {\r\n    platformFee: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n    platform: {\r\n      type: Number,\r\n      required: false,\r\n    }\r\n  },\r\n  components: {\r\n  },\r\n  data() {\r\n    return {\r\n      error: null,\r\n      tierDialog: false,\r\n      tierThresholds: [],\r\n      tierPercs: [],\r\n      newThreshold: {\r\n        lower_threshold: 0,\r\n        threshold: 0,\r\n        platform_fee_group: null\r\n      },\r\n      newPercentage: {\r\n        percentage: 0,\r\n        platform_fee_group: null\r\n      },\r\n    };\r\n  },\r\n  computed: {\r\n    selectPlatformID: function() {\r\n      if (this.platform == null) {\r\n        return this.platformId;\r\n      } else {\r\n        return this.platform;\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    getTierThresholds() {\r\n      let endpoint = null\r\n      if (this.scenarioId == null) {\r\n        endpoint = `/api/platformtemplates/${this.platform}/fees/${this.platformFee.id}/tier-thresholds/`;\r\n      } else {\r\n        endpoint = `/api/scenarios/${this.scenarioId}/platforms/${this.selectPlatformID}/platformfees/${this.platformFee.id}/tier-thresholds/`;\r\n      };\r\n      apiService(endpoint).then(data => {\r\n        this.tierThresholds = data.results;\r\n      });\r\n    },\r\n    getTierPercs() {\r\n      let endpoint = null\r\n      if (this.scenarioId == null) {\r\n        endpoint = `/api/platformtemplates/${this.platform}/fees/${this.platformFee.id}/tier-percs/`;\r\n      } else {\r\n        endpoint = `/api/scenarios/${this.scenarioId}/platforms/${this.selectPlatformID}/platformfees/${this.platformFee.id}/tier-percs/`;\r\n      };\r\n      apiService(endpoint).then(data => {\r\n        this.tierPercs = data.results;\r\n      });\r\n    },\r\n    setLowerThreshold(event, index) {\r\n      this.tierThresholds[index].lower_threshold = event;\r\n      if (index > 0) {\r\n        this.tierThresholds[index-1].threshold = event;\r\n      }\r\n    },\r\n    setThreshold(event, index) {\r\n      this.tierThresholds[index].threshold = event;\r\n      if (index < this.tierThresholds.length -1) {\r\n        this.tierThresholds[index+1].lower_threshold = event;\r\n      }\r\n    },\r\n    addNewTier(){\r\n      this.newThreshold.platform_fee_group = this.platformFee.id;\r\n      this.tierThresholds.push({...this.newThreshold});\r\n      this.newThreshold.lower_threshold = 0;\r\n      this.newThreshold.threshold = 0;\r\n      this.newPercentage.platform_fee_group = this.platformFee.id;\r\n      let percDivide = this.newPercentage.percentage / 100;\r\n      this.newPercentage.percentage = percDivide;\r\n      this.tierPercs.push({...this.newPercentage});\r\n      this.newPercentage.percentage = 0;\r\n    },\r\n    setPercentage(event, index) {\r\n      this.tierPercs[index].percentage = event / 100;\r\n    },\r\n    getPercentage(index) {\r\n      return this.tierPercs[index].percentage*100\r\n    },\r\n    selectMethod(item) {\r\n      if (item.id) {\r\n        return \"PATCH\"\r\n      } else {\r\n        return \"POST\"\r\n      };\r\n    },\r\n    thresholdOrPerc(item) {\r\n      if (item.threshold) {\r\n        return \"tier-thresholds\"\r\n      } else {\r\n        return \"tier-percs\"\r\n      }\r\n    },\r\n    endpointSelector(item){\r\n      let subRoute = this.thresholdOrPerc(item);\r\n      if (this.scenarioId == null) {\r\n        if (item.id) {\r\n          return `/api/platformtemplates/${this.platform}/fees/${this.platformFee.id}/${subRoute}/${item.id}/`;\r\n        } else {\r\n          return `/api/platformtemplates/${this.platform}/fees/${this.platformFee.id}/${subRoute}/`;\r\n        }\r\n      } else {\r\n        if (item.id) {\r\n          return `/api/scenarios/${this.scenarioId}/platforms/${this.selectPlatformID}/platformfees/${this.platformFee.id}/${subRoute}/${item.id}/`;\r\n        } else {\r\n          return `/api/scenarios/${this.scenarioId}/platforms/${this.selectPlatformID}/platformfees/${this.platformFee.id}/${subRoute}/`;\r\n        }\r\n      };\r\n    },\r\n    onSubmit() {\r\n      for (let i=0; i < this.tierThresholds.length; i++) {\r\n        let endpoint = this.endpointSelector(this.tierThresholds[i]);\r\n        apiService(endpoint, this.selectMethod(this.tierThresholds[i]),\r\n          this.tierThresholds[i]\r\n        ).then(data => {\r\n          this.tierThresholds[i].id = data.id\r\n        })\r\n      };\r\n      for (let i=0; i < this.tierPercs.length; i++) {\r\n        let endpoint = this.endpointSelector(this.tierPercs[i]);\r\n        apiService(endpoint, this.selectMethod(this.tierPercs[i]),\r\n          this.tierPercs[i]\r\n        ).then(data => {\r\n          this.tierPercs[i].id = data.id\r\n        })\r\n      };\r\n    },\r\n  },\r\n  mounted() {\r\n    this.getTierPercs();\r\n    this.getTierThresholds();\r\n  }\r\n}\r\n</script>\r\n"]}]}