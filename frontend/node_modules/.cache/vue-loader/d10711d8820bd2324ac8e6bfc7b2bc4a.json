{"remainingRequest":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\components\\AddInvestment.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\components\\AddInvestment.vue","mtime":1598929253076},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBhcGlTZXJ2aWNlIH0gZnJvbSAiQC9jb21tb24vYXBpLnNlcnZpY2UuanMiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiQWRkSW52ZXN0bWVudCIsDQogIGluamVjdDogWyJwbGF0Zm9ybUlkIiwgInNjZW5hcmlvSWQiXSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgc2VhcmNoOiBudWxsLA0KICAgICAgbmV3SW52ZXN0bWVudDogbnVsbCwNCiAgICAgIGludmVzdG1lbnRBbW91bnQ6IG51bGwsDQogICAgICBpbnZlc3RtZW50TGlzdDogW10sDQogICAgICBlcnJvcjogbnVsbCwNCiAgICAgIHNlbGVjdGVkOiBbXSwNCiAgICAgIGZpbHRlckl0ZW1zOiBbDQogICAgICAgIHtuYW1lOiAiU2hvdyBhbGwiLCBzZWxlY3RlZDogdHJ1ZSwgaWQ6IDF9LA0KICAgICAgICB7bmFtZTogIlNob3cgZnVuZC1zcGVjaWZpYyIsIHNlbGVjdGVkOiB0cnVlLCBpZDogMn0sDQogICAgICAgIHtuYW1lOiAiU2hvdyBtYW5hZ2VkIGZ1bmRzIiwgc2VsZWN0ZWQ6IHRydWUsIGlkOiAzfSwNCiAgICAgICAge25hbWU6ICJTaG93IG1hbmFnZWQgYWNjb3VudHMiLCBzZWxlY3RlZDogdHJ1ZSwgaWQ6IDR9LA0KICAgICAgICB7bmFtZTogIlNob3cgbGlzdGVkIGFzc2V0cyIsIHNlbGVjdGVkOiB0cnVlLCBpZDogNX0sDQogICAgICBdDQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIG5hbWVJZE9yTnVsbCgpIHsNCiAgICAgIGlmICh0aGlzLm5ld0ludmVzdG1lbnQuaWQgIT0gbnVsbCkgew0KICAgICAgICByZXR1cm4gdGhpcy5uZXdJbnZlc3RtZW50LmlkOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICB9DQogICAgfSwNCiAgICBjdXN0b21OYW1lKCkgew0KICAgICAgaWYgKHRoaXMubmV3SW52ZXN0bWVudC5pZCAhPSBudWxsKSB7DQogICAgICAgIHJldHVybiBudWxsDQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gdGhpcy5uZXdJbnZlc3RtZW50Ow0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGdldEludmVzdG1lbnRMaXN0KCkgew0KICAgICAgbGV0IGVuZHBvaW50ID0gYC9hcGkvaW52ZXN0bWVudG5hbWUvYDsNCiAgICAgIGFwaVNlcnZpY2UoZW5kcG9pbnQsICJHRVQiKS50aGVuKGRhdGEgPT4gew0KICAgICAgICB0aGlzLmludmVzdG1lbnRMaXN0ID0gZGF0YS5yZXN1bHRzOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBkZWxheVN1Ym1pdCgpIHsNCiAgICAgIC8vIFJlc29sdmVzIGEgd2VpcmQgY29tYm9ib3ggYnVnIHdoZXJlIGl0IGRvZXMgbm90IHVwZGF0ZSBwcm9wcyB1bnRpbCBibHVyDQogICAgICB0aGlzLiRyZWZzLmNvbWJvYm94LmJsdXIoKTsNCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgdGhpcy5vblN1Ym1pdCgpOw0KICAgICAgfSkNCiAgICB9LA0KICAgIG9uU3VibWl0KCkgew0KICAgICAgbGV0IGVuZHBvaW50ID0gYC9hcGkvc2NlbmFyaW9zLyR7dGhpcy5zY2VuYXJpb0lkfS9wbGF0Zm9ybXMvJHt0aGlzLnBsYXRmb3JtSWR9L2ludmVzdG1lbnRzL2A7DQogICAgICBpZiAodGhpcy5uZXdJbnZlc3RtZW50ICE9IG51bGwpIHsNCiAgICAgICAgYXBpU2VydmljZShlbmRwb2ludCwgIlBPU1QiLCB7DQogICAgICAgICAgbmFtZV9pZDogdGhpcy5uYW1lSWRPck51bGwsDQogICAgICAgICAgaW52ZXN0bWVudF9jbGFzc19pZDogbnVsbCwNCiAgICAgICAgICBwbGF0Zm9ybTogdGhpcy5wbGF0Zm9ybUlkLA0KICAgICAgICAgIGFtb3VudDogdGhpcy5pbnZlc3RtZW50QW1vdW50LA0KICAgICAgICAgIGN1c3RvbV9uYW1lOiB0aGlzLmN1c3RvbU5hbWUsDQogICAgICAgIH0pLnRoZW4oZGF0YSA9PiB7DQogICAgICAgICAgdGhpcy4kZW1pdCgiYWRkLWludmVzdG1lbnQiLCBkYXRhKTsNCiAgICAgICAgICB0aGlzLm5ld0ludmVzdG1lbnQgPSBudWxsOw0KICAgICAgICAgIHRoaXMuaW52ZXN0bWVudEFtb3VudCA9IG51bGw7DQogICAgICAgIH0pOw0KICAgICAgICBpZiAodGhpcy5lcnJvcikgew0KICAgICAgICAgIHRoaXMuZXJyb3IgPSBudWxsOw0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmVycm9yID0gIiINCiAgICAgIH0NCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5nZXRJbnZlc3RtZW50TGlzdCgpOw0KICB9DQp9Ow0K"},{"version":3,"sources":["AddInvestment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddInvestment.vue","sourceRoot":"src/components","sourcesContent":["<template lang=\"html\">\r\n  <v-expansion-panel outline   @click.stop >\r\n      <v-expansion-panel-header class=\"pa-3\"   @click.stop   >\r\n      <v-row class=\"ma-0\" @click.stop>\r\n      <v-col :cols=\"7\" class=\"py-0\" @click.stop>\r\n        <v-combobox\r\n          v-model=\"newInvestment\"\r\n          :items=\"investmentList\"\r\n          @keyup.enter=\"delaySubmit\"\r\n          ref=\"combobox\"\r\n          :search-input.sync=\"search\"\r\n          no-data-text=\"Create a custom investment\"\r\n          item-text=\"name\"\r\n          solo dense\r\n          @keyup.space.prevent\r\n          @click.stop\r\n          hide-details=\"auto\"\r\n          label=\"Add an investment by typing its name\">\r\n        <template v-slot:no-data>\r\n          <v-list-item>\r\n            <v-list-item-content>\r\n              <v-list-item-title>\r\n                No investments match \"<strong>{{ search }}</strong>\". Press <kbd>enter</kbd> to create a custom investment.\r\n              </v-list-item-title>\r\n            </v-list-item-content>\r\n          </v-list-item>\r\n        </template>\r\n      </v-combobox>\r\n      </v-col>\r\n      <v-col :cols=\"3\" class=\"py-0\">\r\n        <v-text-field\r\n          label=\"Amount\"\r\n          solo dense\r\n          hide-details=\"auto\"\r\n          type=\"number\"\r\n          @keyup.space.prevent\r\n          @click.stop\r\n          v-model=\"investmentAmount\" />\r\n      </v-col>\r\n      <v-col :cols=\"2\" class=\"py-0\">\r\n\r\n        <v-icon\r\n          color=\"teal\"\r\n          @click.stop\r\n          @click=\"delaySubmit\"\r\n          large\r\n        >mdi-check-circle-outline</v-icon>\r\n        <v-menu top offset-y>\r\n          <template v-slot:activator=\"{ on }\">\r\n            <v-icon\r\n              color=\"teal\"\r\n              @click.stop\r\n              large\r\n              v-on=\"on\">\r\n                mdi-filter\r\n            </v-icon>\r\n          </template>\r\n          <v-list dense>\r\n            <v-list-item\r\n            v-for=\"item in filterItems\"\r\n            :key=\"item.id\">\r\n\r\n              <v-checkbox\r\n               dense\r\n               class='mt-0'\r\n               hide-details\r\n                v-model=\"item.selected\"\r\n                />\r\n                <v-list-item-title class=\"mt-1\">{{ item.name }}</v-list-item-title>\r\n\r\n            </v-list-item>\r\n          </v-list>\r\n        </v-menu>\r\n      </v-col>\r\n    </v-row>\r\n  </v-expansion-panel-header>\r\n  </v-expansion-panel>\r\n</template>\r\n\r\n<script>\r\nimport { apiService } from \"@/common/api.service.js\";\r\nexport default {\r\n  name: \"AddInvestment\",\r\n  inject: [\"platformId\", \"scenarioId\"],\r\n  data() {\r\n    return {\r\n      search: null,\r\n      newInvestment: null,\r\n      investmentAmount: null,\r\n      investmentList: [],\r\n      error: null,\r\n      selected: [],\r\n      filterItems: [\r\n        {name: \"Show all\", selected: true, id: 1},\r\n        {name: \"Show fund-specific\", selected: true, id: 2},\r\n        {name: \"Show managed funds\", selected: true, id: 3},\r\n        {name: \"Show managed accounts\", selected: true, id: 4},\r\n        {name: \"Show listed assets\", selected: true, id: 5},\r\n      ]\r\n    }\r\n  },\r\n  computed: {\r\n    nameIdOrNull() {\r\n      if (this.newInvestment.id != null) {\r\n        return this.newInvestment.id;\r\n      } else {\r\n        return null;\r\n      }\r\n    },\r\n    customName() {\r\n      if (this.newInvestment.id != null) {\r\n        return null\r\n      } else {\r\n        return this.newInvestment;\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    getInvestmentList() {\r\n      let endpoint = `/api/investmentname/`;\r\n      apiService(endpoint, \"GET\").then(data => {\r\n        this.investmentList = data.results;\r\n      });\r\n    },\r\n    delaySubmit() {\r\n      // Resolves a weird combobox bug where it does not update props until blur\r\n      this.$refs.combobox.blur();\r\n      this.$nextTick(() => {\r\n        this.onSubmit();\r\n      })\r\n    },\r\n    onSubmit() {\r\n      let endpoint = `/api/scenarios/${this.scenarioId}/platforms/${this.platformId}/investments/`;\r\n      if (this.newInvestment != null) {\r\n        apiService(endpoint, \"POST\", {\r\n          name_id: this.nameIdOrNull,\r\n          investment_class_id: null,\r\n          platform: this.platformId,\r\n          amount: this.investmentAmount,\r\n          custom_name: this.customName,\r\n        }).then(data => {\r\n          this.$emit(\"add-investment\", data);\r\n          this.newInvestment = null;\r\n          this.investmentAmount = null;\r\n        });\r\n        if (this.error) {\r\n          this.error = null;\r\n        }\r\n      } else {\r\n        this.error = \"\"\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getInvestmentList();\r\n  }\r\n};\r\n</script>\r\n"]}]}