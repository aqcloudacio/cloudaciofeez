{"remainingRequest":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\common\\api.service.js","dependencies":[{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\common\\api.service.js","mtime":1604022959438},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxVc2Vyc1xcVXNlclxcRGVza3RvcFxcRmVlelxcZmVlelxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgeyBDU1JGX1RPS0VOIH0gZnJvbSAiLi9jc3JmX3Rva2VuLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHVzZXIgZnJvbSAiLi4vc3RvcmUvdXNlci5tb2R1bGUiOwppbXBvcnQgc3RvcmUgZnJvbSAiLi4vc3RvcmUvaW5kZXgiOwppbXBvcnQgeyBSRUZSRVNIX0FDQ0VTU19UT0tFTiB9IGZyb20gIi4uL3N0b3JlL2FjdGlvbnMudHlwZSI7IC8vIGltcG9ydCB7Ci8vICAgU0VUX1JFRlJFU0hJTkdfSU5fUFJPR1JFU1MsCi8vIH0gZnJvbSAiLi4vc3RvcmUvbXV0YXRpb25zLnR5cGUiOwovLwovLyBmdW5jdGlvbiBoYW5kbGVSZXNwb25zZShyZXNwb25zZSkgewovLyAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwNCkgewovLyAgICAgcmV0dXJuICIiOwovLyAgIH0gZWxzZSBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsKLy8gICAgIC8vIFByZXZlbnRzIG11dGxpcGxlIHNpbXVsdGFuZW91cyByZWZyZXNoZXMKLy8gICAgIGlmICghdXNlci5zdGF0ZS5yZWZyZXNoaW5nSW5Qcm9ncmVzcykgewovLyAgICAgICBjb25zb2xlLmxvZygncmVxdWVzdGluZyB0b2tlbiByZWZyZXNoJyk7Ci8vICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKLy8gICAgICAgc3RvcmUuc3RhdGUucmVmcmVzaGluZ0luUHJvZ3Jlc3MgPSBzdG9yZS5kaXNwYXRjaChSRUZSRVNIX0FDQ0VTU19UT0tFTik7Ci8vICAgICB9IGVsc2UgewovLyAgICAgICBjb25zb2xlLmxvZygnYmxvY2tlZC4gdG9rZW4gcmVxdWVzdCBpbiBwcm9ncmVzcycpCi8vICAgICB9Ci8vICAgfSBlbHNlIHsKLy8gICAgIHJldHVybiByZXNwb25zZS5qc29uKCkudGhlbihqc29uID0+IHsKLy8gICAgICAgcmV0dXJuIHJlc3BvbnNlLm9rID8ganNvbiA6IFByb21pc2UucmVqZWN0KGpzb24pOwovLyAgICAgfSkKLy8gICB9Ci8vIH0KCmZ1bmN0aW9uIGFwaVNlcnZpY2UoZW5kcG9pbnQsIG1ldGhvZCwgZGF0YSkgewogIHZhciBvcHRpb25zID0gewogICAgdXJsOiBlbmRwb2ludCwKICAgIG1ldGhvZDogbWV0aG9kIHx8ICJHRVQiLAogICAgZGF0YTogZGF0YSwKICAgIGhlYWRlcnM6IHsKICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgIlgtQ1NSRlRPS0VOIjogQ1NSRl9UT0tFTiwKICAgICAgIkF1dGhvcml6YXRpb24iOiAiQmVhcmVyICIuY29uY2F0KHVzZXIuc3RhdGUuYWNjZXNzVG9rZW4pCiAgICB9CiAgfTsKICByZXR1cm4gYXhpb3Mob3B0aW9ucykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgIGNvbnNvbGUubG9nKCdyZXNwb25zZSBmcm9tIGF4aW9zIHRoZW46Jyk7CiAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICByZXR1cm4gcmVzcG9uc2U7CiAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgY29uc29sZS5sb2coJ2xvZ2dpbmcgZXJyOicpOwogICAgcmV0dXJuIGNvbnNvbGUubG9nKGVycik7CiAgfSk7IC8vCiAgLy8gY29uc3QgY29uZmlnID0gewogIC8vICAgbWV0aG9kOiBtZXRob2QgfHwgIkdFVCIsCiAgLy8gICBib2R5OiBkYXRhICE9PSB1bmRlZmluZWQgPyBKU09OLnN0cmluZ2lmeShkYXRhKSA6IG51bGwsCiAgLy8gICBoZWFkZXJzOiB7CiAgLy8gICAgICJjb250ZW50LXR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsCiAgLy8gICAgICJYLUNTUkZUT0tFTiI6IENTUkZfVE9LRU4sCiAgLy8gICAgICJBdXRob3JpemF0aW9uIjogYEJlYXJlciAke3VzZXIuc3RhdGUuYWNjZXNzVG9rZW59YCwKICAvLyAgIH0KICAvLyB9OwogIC8vCiAgLy8KICAvLyAgIHJldHVybiBmZXRjaChlbmRwb2ludCwgY29uZmlnKQogIC8vICAgICAudGhlbihoYW5kbGVSZXNwb25zZSkKfQoKdmFyIHJlZnJlc2hUb2tlblByb21pc2UgPSBudWxsOyAvLyB0aGlzIGhvbGRzIGFueSBpbi1wcm9ncmVzcyB0b2tlbiByZWZyZXNoIHJlcXVlc3RzCgpheGlvcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIGNvbnNvbGUubG9nKCdSZXNwb25zZSB3YXMgc3VjY2VzZnVsbHkgcmVjZWl2ZWQnKTsKICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKfSwKLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShlcnJvcikgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBpZiAoIShlcnJvci5jb25maWcgJiYgZXJyb3IucmVzcG9uc2UgJiYgZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghcmVmcmVzaFRva2VuUHJvbWlzZSkgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdmZXRjaGluZyB0b2tlbicpOyAvLyBjaGVjayBmb3IgYW4gZXhpc3RpbmcgaW4tcHJvZ3Jlc3MgcmVxdWVzdAogICAgICAgICAgICAgIC8vIGlmIG5vdGhpbmcgaXMgaW4tcHJvZ3Jlc3MsIHN0YXJ0IGEgbmV3IHJlZnJlc2ggdG9rZW4gcmVxdWVzdAoKICAgICAgICAgICAgICByZWZyZXNoVG9rZW5Qcm9taXNlID0gc3RvcmUuZGlzcGF0Y2goUkVGUkVTSF9BQ0NFU1NfVE9LRU4pLnRoZW4oZnVuY3Rpb24gKHRva2VuKSB7CiAgICAgICAgICAgICAgICByZWZyZXNoVG9rZW5Qcm9taXNlID0gbnVsbDsgLy8gY2xlYXIgc3RhdGUKCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0b2tlbik7CiAgICAgICAgICAgICAgICByZXR1cm4gdG9rZW47IC8vIHJlc29sdmUgd2l0aCB0aGUgbmV3IHRva2VuCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJpJ20gd2FpdGluZy4uIik7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICByZXR1cm4gcmVmcmVzaFRva2VuUHJvbWlzZS50aGVuKGZ1bmN0aW9uICh0b2tlbikgewogICAgICAgICAgICAgIGVycm9yLmNvbmZpZy5oZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSAiQmVhcmVyICIuY29uY2F0KHRva2VuKTsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzZW5kaW5nIGRhdGEnKTsKICAgICAgICAgICAgICByZXR1cm4gYXhpb3MoZXJyb3IuY29uZmlnKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dC5zZW50KTsKCiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGVycm9yKQogICAgICAgICAgICAvLyBoYW5kbGUgdGhlIHJlc3BvbnNlIGVycm9yCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJpJ20gYmFkIik7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVqZWN0KGVycm9yKSk7CgogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCkpOwpleHBvcnQgeyBhcGlTZXJ2aWNlIH07CmV4cG9ydCB2YXIgU2NlbmFyaW9TZXJ2aWNlID0gewogIC8vIGxpc3QoKSB7CiAgLy8gICByZXR1cm4gYXBpU2VydmljZShgL2FwaS9zY2VuYXJpb3MvYCwgIkdFVCIpOwogIC8vIH0sCiAgZ2V0OiBmdW5jdGlvbiBnZXQoc2NlbmFyaW9JZCkgewogICAgcmV0dXJuIGFwaVNlcnZpY2UoIi9hcGkvc2NlbmFyaW9zLyIuY29uY2F0KHNjZW5hcmlvSWQsICIvIiksICJHRVQiKTsKICB9LAogIGNyZWF0ZTogZnVuY3Rpb24gY3JlYXRlKHNjZW5hcmlvKSB7CiAgICByZXR1cm4gYXBpU2VydmljZSgiL2FwaS9zY2VuYXJpb3MvIiwgIlBPU1QiLCBzY2VuYXJpbyk7CiAgfSwKICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShzY2VuYXJpbykgewogICAgcmV0dXJuIGFwaVNlcnZpY2UoIi9hcGkvc2NlbmFyaW9zLyIuY29uY2F0KHNjZW5hcmlvLmlkLCAiLyIpLCAiUEFUQ0giLCBzY2VuYXJpbyk7CiAgfSAvLyBkZXN0cm95KHNjZW5hcmlvSWQpIHsKICAvLyAgIHJldHVybiBhcGlTZXJ2aWNlKGAvYXBpL3NjZW5hcmlvcy8ke3NjZW5hcmlvSWR9L2AsICJERUxFVEUiKTsKICAvLyB9Cgp9OwpleHBvcnQgdmFyIEFkdmVydFNlcnZpY2UgPSB7CiAgbGlzdDogZnVuY3Rpb24gbGlzdCgpIHsKICAgIHJldHVybiBhcGlTZXJ2aWNlKCIvYXBpL2N1cnJlbnRhZHZlcnQvIiwgIkdFVCIpOwogIH0KfTsKZXhwb3J0IHZhciBJbnZlc3RtZW50TmFtZVNlcnZpY2UgPSB7CiAgbGlzdDogZnVuY3Rpb24gbGlzdCgpIHsKICAgIHJldHVybiBhcGlTZXJ2aWNlKCIvYXBpL3VubGlua2VkaW52ZXN0bWVudG5hbWUvIiwgIkdFVCIpOwogIH0KfTsKZXhwb3J0IHZhciBQbGF0Zm9ybVNlcnZpY2UgPSB7CiAgZ2V0OiBmdW5jdGlvbiBnZXQoX3JlZjIpIHsKICAgIHZhciBzY2VuYXJpb0lkID0gX3JlZjIuc2NlbmFyaW9JZCwKICAgICAgICBwbGF0Zm9ybUlkID0gX3JlZjIucGxhdGZvcm1JZDsKICAgIHJldHVybiBhcGlTZXJ2aWNlKCIvYXBpL3NjZW5hcmlvcy8iLmNvbmNhdChzY2VuYXJpb0lkLCAiL3BsYXRmb3Jtcy8iKS5jb25jYXQocGxhdGZvcm1JZCwgIi8iKSwgIkdFVCIpOwogIH0sCiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoc3RhdGUsIHJvb3RTdGF0ZSkgewogICAgcmV0dXJuIGFwaVNlcnZpY2UoIi9hcGkvc2NlbmFyaW9zLyIuY29uY2F0KHJvb3RTdGF0ZS5zY2VuYXJpby5hY3RpdmVTY2VuYXJpby5pZCwgIi9wbGF0Zm9ybXMvIikuY29uY2F0KHN0YXRlLmFjdGl2ZVBsYXRmb3JtLmlkLCAiLyIpLCAiUEFUQ0giLCBzdGF0ZS5hY3RpdmVQbGF0Zm9ybSk7CiAgfQp9OwpleHBvcnQgdmFyIFBsYXRmb3JtQUFTZXJ2aWNlID0gewogIGxpc3Q6IGZ1bmN0aW9uIGxpc3QoX3JlZjMpIHsKICAgIHZhciBzY2VuYXJpb0lkID0gX3JlZjMuc2NlbmFyaW9JZCwKICAgICAgICBwbGF0Zm9ybUlkID0gX3JlZjMucGxhdGZvcm1JZDsKICAgIHJldHVybiBhcGlTZXJ2aWNlKCIvYXBpL3NjZW5hcmlvcy8iLmNvbmNhdChzY2VuYXJpb0lkLCAiL3BsYXRmb3Jtcy8iKS5jb25jYXQocGxhdGZvcm1JZCwgIi9hYXN1bW1hcnkvIiksICJHRVQiKTsKICB9Cn07CmV4cG9ydCB2YXIgUGxhdGZvcm1OYW1lU2VydmljZSA9IHsKICBsaXN0OiBmdW5jdGlvbiBsaXN0KGVuZHBvaW50KSB7CiAgICBpZiAoZW5kcG9pbnQpIHsKICAgICAgcmV0dXJuIGFwaVNlcnZpY2UoZW5kcG9pbnQsICJHRVQiKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBhcGlTZXJ2aWNlKCIvYXBpL3BsYXRmb3JtbmFtZXMvIiwgIkdFVCIpOwogICAgfQogIH0KfTsKZXhwb3J0IHZhciBVc2VyU2VydmljZSA9IHsKICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgIHJldHVybiBhcGlTZXJ2aWNlKCIvYXBpL3VzZXIvIiwgIkdFVCIpOwogIH0sCiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodXNlcikgewogICAgcmV0dXJuIGFwaVNlcnZpY2UoIi9hcGkvdXNlci8iLmNvbmNhdCh1c2VyLmlkLCAiLyIpLCAiUEFUQ0giLCB1c2VyKTsKICB9LAogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihjcmVkZW50aWFscykgewogICAgcmV0dXJuIGFwaVNlcnZpY2UoIi9hcGkvdG9rZW4vIiwgIlBPU1QiLCBjcmVkZW50aWFscyk7CiAgfSwKICByZWZyZXNoVG9rZW46IGZ1bmN0aW9uIHJlZnJlc2hUb2tlbihfcmVmcmVzaFRva2VuKSB7CiAgICByZXR1cm4gYXBpU2VydmljZSgiL2FwaS90b2tlbi9yZWZyZXNoLyIsICJQT1NUIiwgX3JlZnJlc2hUb2tlbik7CiAgfQp9Ow=="},{"version":3,"sources":["C:/Users/User/Desktop/Feez/feez/frontend/src/common/api.service.js"],"names":["CSRF_TOKEN","axios","user","store","REFRESH_ACCESS_TOKEN","apiService","endpoint","method","data","options","url","headers","state","accessToken","then","response","console","log","catch","err","refreshTokenPromise","interceptors","use","error","config","status","dispatch","token","Promise","reject","ScenarioService","get","scenarioId","create","scenario","update","id","AdvertService","list","InvestmentNameService","PlatformService","platformId","rootState","activeScenario","activePlatform","PlatformAAService","PlatformNameService","UserService","login","credentials","refreshToken"],"mappings":"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","sourcesContent":["import { CSRF_TOKEN } from \"./csrf_token.js\";\r\nimport axios from 'axios';\r\n\r\nimport user from \"../store/user.module\";\r\nimport store from \"../store/index\";\r\nimport {\r\n  REFRESH_ACCESS_TOKEN,\r\n} from \"../store/actions.type\";\r\n// import {\r\n//   SET_REFRESHING_IN_PROGRESS,\r\n// } from \"../store/mutations.type\";\r\n\r\n\r\n//\r\n// function handleResponse(response) {\r\n//   if (response.status === 204) {\r\n//     return \"\";\r\n//   } else if (response.status === 401) {\r\n//     // Prevents mutliple simultaneous refreshes\r\n//     if (!user.state.refreshingInProgress) {\r\n//       console.log('requesting token refresh');\r\n//       console.log(response);\r\n//       store.state.refreshingInProgress = store.dispatch(REFRESH_ACCESS_TOKEN);\r\n//     } else {\r\n//       console.log('blocked. token request in progress')\r\n//     }\r\n//   } else {\r\n//     return response.json().then(json => {\r\n//       return response.ok ? json : Promise.reject(json);\r\n//     })\r\n//   }\r\n// }\r\n\r\n function apiService(endpoint, method, data) {\r\n\r\n  const options = {\r\n    url: endpoint,\r\n    method: method || \"GET\",\r\n    data: data,\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      \"content-type\": \"application/json\",\r\n      \"X-CSRFTOKEN\": CSRF_TOKEN,\r\n      \"Authorization\": `Bearer ${user.state.accessToken}`,\r\n    }\r\n  };\r\n\r\n  return axios(options)\r\n  .then(response => {\r\n    console.log('response from axios then:')\r\n    console.log(response);\r\n   return response;\r\n   }).catch(err => {\r\n     console.log('logging err:');\r\n     return console.log(err);\r\n   })\r\n\r\n  //\r\n  // const config = {\r\n  //   method: method || \"GET\",\r\n  //   body: data !== undefined ? JSON.stringify(data) : null,\r\n  //   headers: {\r\n  //     \"content-type\": \"application/json\",\r\n  //     \"X-CSRFTOKEN\": CSRF_TOKEN,\r\n  //     \"Authorization\": `Bearer ${user.state.accessToken}`,\r\n  //   }\r\n  // };\r\n  //\r\n  //\r\n  //   return fetch(endpoint, config)\r\n  //     .then(handleResponse)\r\n}\r\n\r\nvar refreshTokenPromise = null// this holds any in-progress token refresh requests\r\n\r\naxios.interceptors.response.use(\r\n  response => {\r\n  console.log('Response was succesfully received');\r\n  return response.data;\r\n},\r\nasync error => {\r\n  if (error.config && error.response && error.response.status === 401) {\r\n    if (!refreshTokenPromise) {\r\n      console.log('fetching token');\r\n      // check for an existing in-progress request\r\n      // if nothing is in-progress, start a new refresh token request\r\n      refreshTokenPromise = store.dispatch(REFRESH_ACCESS_TOKEN).then((token) => {\r\n        refreshTokenPromise = null; // clear state\r\n        console.log(token);\r\n        return token // resolve with the new token\r\n      })\r\n    }\r\n    console.log(\"i'm waiting..\");\r\n    return await refreshTokenPromise.then(token => {\r\n      error.config.headers['Authorization'] = `Bearer ${token}`\r\n      console.log('resending data')\r\n      return axios(error.config)\r\n    })\r\n  }\r\n  // console.log(error)\r\n  // handle the response error\r\n  console.log(\"i'm bad\")\r\n  return Promise.reject(error);\r\n});\r\n\r\n\r\n\r\n\r\n\r\nexport { apiService };\r\n\r\nexport const ScenarioService = {\r\n  // list() {\r\n  //   return apiService(`/api/scenarios/`, \"GET\");\r\n  // },\r\n  get(scenarioId) {\r\n    return apiService(`/api/scenarios/${scenarioId}/`, \"GET\");\r\n  },\r\n  create(scenario) {\r\n    return apiService(`/api/scenarios/`, \"POST\", scenario);\r\n  },\r\n  update(scenario) {\r\n    return apiService(`/api/scenarios/${scenario.id}/`, \"PATCH\", scenario);\r\n  },\r\n  // destroy(scenarioId) {\r\n  //   return apiService(`/api/scenarios/${scenarioId}/`, \"DELETE\");\r\n  // }\r\n};\r\n\r\nexport const AdvertService = {\r\n  list() {\r\n    return apiService(`/api/currentadvert/`, \"GET\");\r\n  },\r\n};\r\n\r\nexport const InvestmentNameService = {\r\n  list() {\r\n    return apiService(`/api/unlinkedinvestmentname/`, \"GET\");\r\n  },\r\n};\r\n\r\nexport const PlatformService = {\r\n  get({scenarioId, platformId}) {\r\n    return apiService(`/api/scenarios/${scenarioId}/platforms/${platformId}/`, \"GET\");\r\n  },\r\n  update(state, rootState) {\r\n    return apiService(`/api/scenarios/${rootState.scenario.activeScenario.id}/platforms/${state.activePlatform.id}/`, \"PATCH\", state.activePlatform);\r\n  },\r\n};\r\nexport const PlatformAAService = {\r\n  list({scenarioId, platformId}) {\r\n    return apiService(`/api/scenarios/${scenarioId}/platforms/${platformId}/aasummary/`, \"GET\");\r\n  },\r\n};\r\n\r\nexport const PlatformNameService = {\r\n  list(endpoint) {\r\n    if (endpoint) {\r\n      return apiService(endpoint, \"GET\");\r\n    } else {\r\n      return apiService(`/api/platformnames/`, \"GET\");\r\n    }\r\n  },\r\n};\r\n\r\nexport const UserService = {\r\n  get() {\r\n    return apiService(`/api/user/`, \"GET\");\r\n  },\r\n  update(user) {\r\n    return apiService(`/api/user/${user.id}/`, \"PATCH\", user);\r\n  },\r\n  login(credentials) {\r\n    return apiService(`/api/token/`, \"POST\", credentials);\r\n  },\r\n  refreshToken(refreshToken) {\r\n    return apiService(`/api/token/refresh/`, \"POST\", refreshToken);\r\n  },\r\n};\r\n"]}]}