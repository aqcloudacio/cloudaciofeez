{"remainingRequest":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\store\\user.module.js","dependencies":[{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\store\\user.module.js","mtime":1603963386003},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQzpcXFVzZXJzXFxVc2VyXFxEZXNrdG9wXFxGZWV6XFxmZWV6XFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJDOlxcVXNlcnNcXFVzZXJcXERlc2t0b3BcXEZlZXpcXGZlZXpcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKCnZhciBfYWN0aW9ucywgX211dGF0aW9uczsKCi8vIGltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IHsgVXNlclNlcnZpY2UgfSBmcm9tICJAL2NvbW1vbi9hcGkuc2VydmljZSI7CmltcG9ydCB7IFVTRVJfRkVUQ0gsIFVTRVJfVVBEQVRFLCBQUkFDVElDRV9JTlZJVEVfQUNDRVBULCBVU0VSX0xPR0lOIC8vIFVTRVJfUkVHSVNURVIsCiwgUkVGUkVTSF9BQ0NFU1NfVE9LRU4gfSBmcm9tICIuL2FjdGlvbnMudHlwZSI7CmltcG9ydCB7IFNFVF9BQ1RJVkVfVVNFUiwgUkVNT1ZFX0FDVElWRV9VU0VSX0ZST01fUFJBQ1RJQ0UsIEFERF9BQ1RJVkVfVVNFUl9UT19QUkFDVElDRSwgU0VUX0FDVElWRV9VU0VSX1BST1AsIFVQREFURV9BQ0NFU1NfVE9LRU4sIFVQREFURV9MT0NBTF9TVE9SQUdFLCBERVNUUk9ZX1RPS0VOUywgU0VUX1JFRlJFU0hJTkdfSU5fUFJPR1JFU1MgfSBmcm9tICIuL211dGF0aW9ucy50eXBlIjsKdmFyIGluaXRpYWxTdGF0ZSA9IHsKICBhY3RpdmVVc2VyOiB7fSwKICBhY2Nlc3NUb2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc190b2tlbicpIHx8IG51bGwsCiAgcmVmcmVzaFRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncmVmcmVzaF90b2tlbicpIHx8IG51bGwsCiAgcmVmcmVzaGluZ0luUHJvZ3Jlc3M6IG51bGwKfTsKZXhwb3J0IHZhciBzdGF0ZSA9IF9vYmplY3RTcHJlYWQoe30sIGluaXRpYWxTdGF0ZSk7CmV4cG9ydCB2YXIgYWN0aW9ucyA9IChfYWN0aW9ucyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2FjdGlvbnMsIFVTRVJfRkVUQ0gsIGZ1bmN0aW9uIChjb250ZXh0KSB7CiAgcmV0dXJuIFVzZXJTZXJ2aWNlLmdldCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgIGNvbnRleHQuY29tbWl0KFNFVF9BQ1RJVkVfVVNFUiwgZGF0YS5yZXN1bHRzWzBdKTsKICB9KTsKfSksIF9kZWZpbmVQcm9wZXJ0eShfYWN0aW9ucywgUFJBQ1RJQ0VfSU5WSVRFX0FDQ0VQVCwgZnVuY3Rpb24gKGNvbnRleHQsIG5vdGlmaWNhdGlvbikgewogIGNvbnRleHQuY29tbWl0KEFERF9BQ1RJVkVfVVNFUl9UT19QUkFDVElDRSwgewogICAgJ3R5cGUnOiAncHJhY3RpY2UnLAogICAgJ3ByYWN0aWNlJzogbm90aWZpY2F0aW9uLnByYWN0aWNlCiAgfSk7CiAgY29udGV4dC5jb21taXQoUkVNT1ZFX0FDVElWRV9VU0VSX0ZST01fUFJBQ1RJQ0UsIHsKICAgICd0eXBlJzogJ3BlbmRpbmcnLAogICAgJ3ByYWN0aWNlJzogbm90aWZpY2F0aW9uLnByYWN0aWNlCiAgfSk7CgogIGlmIChub3RpZmljYXRpb24uYWN0aXZlX3ByYWN0aWNlKSB7CiAgICBjb250ZXh0LmNvbW1pdChTRVRfQUNUSVZFX1VTRVJfUFJPUCwgewogICAgICAncHJvcCc6ICdhY3RpdmVfcHJhY3RpY2UnLAogICAgICAndmFsdWUnOiBub3RpZmljYXRpb24ucHJhY3RpY2UKICAgIH0pOwogIH0KCiAgOwogIGNvbnRleHQuZGlzcGF0Y2goVVNFUl9VUERBVEUpOwp9KSwgX2RlZmluZVByb3BlcnR5KF9hY3Rpb25zLCBVU0VSX1VQREFURSwgZnVuY3Rpb24gKGNvbnRleHQpIHsKICByZXR1cm4gVXNlclNlcnZpY2UudXBkYXRlKGNvbnRleHQuZ2V0dGVycy5hY3RpdmVVc2VyKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICBjb250ZXh0LmNvbW1pdChTRVRfQUNUSVZFX1VTRVIsIGRhdGEpOwogIH0pOwp9KSwgX2RlZmluZVByb3BlcnR5KF9hY3Rpb25zLCBVU0VSX0xPR0lOLCBmdW5jdGlvbiAoY29udGV4dCwgY3JlZGVudGlhbHMpIHsKICByZXR1cm4gVXNlclNlcnZpY2UubG9naW4oY3JlZGVudGlhbHMpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgIC8vIFN0b3JlcyB0aGUgYWNjZXNzIGFuZCByZWZyZXNoIHRva2VucyBpbiBsb2NhbHN0b3JhZ2UKICAgIGNvbnRleHQuY29tbWl0KFVQREFURV9MT0NBTF9TVE9SQUdFLCB7CiAgICAgIGFjY2VzczogZGF0YS5hY2Nlc3MsCiAgICAgIHJlZnJlc2g6IGRhdGEucmVmcmVzaAogICAgfSk7IC8vIGNhdGNoKGVyciA9PiB7CiAgICAvLyAgIC8vbm90IHN1cmUgYWJvdXQgdGhpcyByZWplY3QgYml0LCBoYXZlIHRvIGNoZWNrIGl0J3Mgb2sKICAgIC8vICAgcmVqZWN0KGVycikKICAgIC8vIH0pOwogIH0pOwp9KSwgX2RlZmluZVByb3BlcnR5KF9hY3Rpb25zLCBSRUZSRVNIX0FDQ0VTU19UT0tFTiwgZnVuY3Rpb24gKGNvbnRleHQpIHsKICAvLyBzZW5kIHRoZSBzdG9yZWQgcmVmcmVzaCB0b2tlbiB0byB0aGUgQVBJCiAgcmV0dXJuIFVzZXJTZXJ2aWNlLnJlZnJlc2hUb2tlbih7CiAgICAncmVmcmVzaCc6IGNvbnRleHQuZ2V0dGVycy5yZWZyZXNoVG9rZW4KICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAvLyBpZiBBUEkgc2VuZHMgYmFjayBuZXcgYWNjZXNzIHRva2VuLCB1cGRhdGUgdGhlIHN0b3JlCiAgICBjb25zb2xlLmxvZygnTmV3IGFjY2VzcyBzdWNjZXNzZnVsbHkgZ2VuZXJhdGVkJyk7CiAgICBjb250ZXh0LmNvbW1pdChVUERBVEVfQUNDRVNTX1RPS0VOLCBkYXRhLmFjY2Vzcyk7CiAgICByZXR1cm4gZGF0YS5hY2Nlc3M7CiAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgLy8gSE9XIFRPIEhBTkRMRSBSRUZSRVNIIFRPS0VOIEVYUElSWT8KICAgIGNvbnNvbGUubG9nKCIiLmNvbmNhdChlcnIsICIgZXJyb3IgaW4gcmVmcmVzaFRva2VuIFRhc2siKSk7CiAgfSk7Cn0pLCBfYWN0aW9ucyk7Ci8qIGVzbGludCBuby1wYXJhbS1yZWFzc2lnbjogWyJlcnJvciIsIHsgInByb3BzIjogZmFsc2UgfV0gKi8KCmV4cG9ydCB2YXIgbXV0YXRpb25zID0gKF9tdXRhdGlvbnMgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIFNFVF9BQ1RJVkVfVVNFUiwgZnVuY3Rpb24gKHN0YXRlLCB1c2VyKSB7CiAgc3RhdGUuYWN0aXZlVXNlciA9IHVzZXI7Cn0pLCBfZGVmaW5lUHJvcGVydHkoX211dGF0aW9ucywgUkVNT1ZFX0FDVElWRV9VU0VSX0ZST01fUFJBQ1RJQ0UsIGZ1bmN0aW9uIChzdGF0ZSwgX3JlZikgewogIHZhciB0eXBlID0gX3JlZi50eXBlLAogICAgICBwcmFjdGljZSA9IF9yZWYucHJhY3RpY2U7CgogIGlmICh0eXBlID09PSAncGVuZGluZycpIHsKICAgIHZhciByZXN1bHQgPSBzdGF0ZS5hY3RpdmVVc2VyLnBlbmRpbmdfcHJhY3RpY2VzLmZpbHRlcihmdW5jdGlvbiAoaSkgewogICAgICByZXR1cm4gaSAhPSBwcmFjdGljZTsKICAgIH0pOwogICAgc3RhdGUuYWN0aXZlVXNlci5wZW5kaW5nX3ByYWN0aWNlcyA9IHJlc3VsdDsKICB9Cn0pLCBfZGVmaW5lUHJvcGVydHkoX211dGF0aW9ucywgQUREX0FDVElWRV9VU0VSX1RPX1BSQUNUSUNFLCBmdW5jdGlvbiAoc3RhdGUsIF9yZWYyKSB7CiAgdmFyIHR5cGUgPSBfcmVmMi50eXBlLAogICAgICBwcmFjdGljZSA9IF9yZWYyLnByYWN0aWNlOwoKICBpZiAodHlwZSA9PT0gJ3ByYWN0aWNlJykgewogICAgc3RhdGUuYWN0aXZlVXNlci5wcmFjdGljZXMucHVzaChwcmFjdGljZSk7CiAgfQp9KSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIFNFVF9BQ1RJVkVfVVNFUl9QUk9QLCBmdW5jdGlvbiAoc3RhdGUsIF9yZWYzKSB7CiAgdmFyIHByb3AgPSBfcmVmMy5wcm9wLAogICAgICB2YWx1ZSA9IF9yZWYzLnZhbHVlOwoKICBpZiAocHJvcC5pbmNsdWRlcygnLicpKSB7CiAgICB2YXIgc3BsaXRwcm9wID0gcHJvcC5zcGxpdCgnLicpOwogICAgdmFyIG9iaiA9IHNwbGl0cHJvcFswXTsKICAgIHZhciBhdHRyID0gc3BsaXRwcm9wWzFdOwoKICAgIGlmICghc3RhdGUuYWN0aXZlVXNlcltvYmpdKSB7CiAgICAgIHN0YXRlLmFjdGl2ZVVzZXJbb2JqXSA9IG5ldyBPYmplY3QoKTsKICAgIH0KCiAgICBzdGF0ZS5hY3RpdmVVc2VyW29ial1bYXR0cl0gPSB2YWx1ZTsKICB9IGVsc2UgewogICAgc3RhdGUuYWN0aXZlVXNlcltwcm9wXSA9IHZhbHVlOwogIH0KfSksIF9kZWZpbmVQcm9wZXJ0eShfbXV0YXRpb25zLCBVUERBVEVfTE9DQUxfU1RPUkFHRSwgZnVuY3Rpb24gKHN0YXRlLCBfcmVmNCkgewogIHZhciBhY2Nlc3MgPSBfcmVmNC5hY2Nlc3MsCiAgICAgIHJlZnJlc2ggPSBfcmVmNC5yZWZyZXNoOwogIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhY2Nlc3NfdG9rZW4nLCBhY2Nlc3MpOwogIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdyZWZyZXNoX3Rva2VuJywgcmVmcmVzaCk7CiAgc3RhdGUuYWNjZXNzVG9rZW4gPSBhY2Nlc3M7CiAgc3RhdGUucmVmcmVzaFRva2VuID0gcmVmcmVzaDsKfSksIF9kZWZpbmVQcm9wZXJ0eShfbXV0YXRpb25zLCBVUERBVEVfQUNDRVNTX1RPS0VOLCBmdW5jdGlvbiAoc3RhdGUsIGFjY2VzcykgewogIHN0YXRlLmFjY2Vzc1Rva2VuID0gYWNjZXNzOwogIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhY2Nlc3NfdG9rZW4nLCBhY2Nlc3MpOwp9KSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIERFU1RST1lfVE9LRU5TLCBmdW5jdGlvbiAoc3RhdGUpIHsKICBzdGF0ZS5hY2Nlc3NUb2tlbiA9IG51bGw7CiAgc3RhdGUucmVmcmVzaFRva2VuID0gbnVsbDsKfSksIF9kZWZpbmVQcm9wZXJ0eShfbXV0YXRpb25zLCBTRVRfUkVGUkVTSElOR19JTl9QUk9HUkVTUywgZnVuY3Rpb24gKHN0YXRlLCB2YWwpIHsKICBzdGF0ZS5yZWZyZXNoaW5nQWNjZXNzVG9rZW4gPSB2YWw7Cn0pLCBfbXV0YXRpb25zKTsKdmFyIGdldHRlcnMgPSB7CiAgYWN0aXZlVXNlcjogZnVuY3Rpb24gYWN0aXZlVXNlcihzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLmFjdGl2ZVVzZXI7CiAgfSwKICBhY2Nlc3NUb2tlbjogZnVuY3Rpb24gYWNjZXNzVG9rZW4oc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5hY2Nlc3NUb2tlbjsKICB9LAogIHJlZnJlc2hUb2tlbjogZnVuY3Rpb24gcmVmcmVzaFRva2VuKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUucmVmcmVzaFRva2VuOwogIH0sCiAgbG9nZ2VkSW46IGZ1bmN0aW9uIGxvZ2dlZEluKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUuYWNjZXNzVG9rZW4gIT0gbnVsbDsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBzdGF0ZTogc3RhdGUsCiAgYWN0aW9uczogYWN0aW9ucywKICBtdXRhdGlvbnM6IG11dGF0aW9ucywKICBnZXR0ZXJzOiBnZXR0ZXJzCn07"},{"version":3,"sources":["C:/Users/User/Desktop/Feez/feez/frontend/src/store/user.module.js"],"names":["UserService","USER_FETCH","USER_UPDATE","PRACTICE_INVITE_ACCEPT","USER_LOGIN","REFRESH_ACCESS_TOKEN","SET_ACTIVE_USER","REMOVE_ACTIVE_USER_FROM_PRACTICE","ADD_ACTIVE_USER_TO_PRACTICE","SET_ACTIVE_USER_PROP","UPDATE_ACCESS_TOKEN","UPDATE_LOCAL_STORAGE","DESTROY_TOKENS","SET_REFRESHING_IN_PROGRESS","initialState","activeUser","accessToken","localStorage","getItem","refreshToken","refreshingInProgress","state","actions","context","get","then","data","commit","results","notification","practice","active_practice","dispatch","update","getters","credentials","login","access","refresh","console","log","catch","err","mutations","user","type","result","pending_practices","filter","i","practices","push","prop","value","includes","splitprop","split","obj","attr","Object","setItem","val","refreshingAccessToken","loggedIn"],"mappings":"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","sourcesContent":["// import Vue from \"vue\";\r\nimport {\r\n  UserService\r\n} from \"@/common/api.service\";\r\nimport {\r\n  USER_FETCH,\r\n  USER_UPDATE,\r\n  PRACTICE_INVITE_ACCEPT,\r\n  USER_LOGIN,\r\n  // USER_REGISTER,\r\n  REFRESH_ACCESS_TOKEN,\r\n} from \"./actions.type\";\r\nimport {\r\n  SET_ACTIVE_USER,\r\n  REMOVE_ACTIVE_USER_FROM_PRACTICE,\r\n  ADD_ACTIVE_USER_TO_PRACTICE,\r\n  SET_ACTIVE_USER_PROP,\r\n  UPDATE_ACCESS_TOKEN,\r\n  UPDATE_LOCAL_STORAGE,\r\n  DESTROY_TOKENS,\r\n  SET_REFRESHING_IN_PROGRESS,\r\n} from \"./mutations.type\";\r\n\r\nconst initialState = {\r\n  activeUser: {},\r\n  accessToken: localStorage.getItem('access_token') || null,\r\n  refreshToken: localStorage.getItem('refresh_token') || null,\r\n  refreshingInProgress: null,\r\n};\r\n\r\nexport const state = { ...initialState };\r\n\r\nexport const actions = {\r\n  [USER_FETCH](context) {\r\n      return UserService.get().then(data => {\r\n        context.commit(SET_ACTIVE_USER, data.results[0])\r\n      });\r\n  },\r\n  [PRACTICE_INVITE_ACCEPT](context, notification) {\r\n    context.commit(ADD_ACTIVE_USER_TO_PRACTICE, {\r\n      'type': 'practice',\r\n      'practice': notification.practice\r\n    });\r\n    context.commit(REMOVE_ACTIVE_USER_FROM_PRACTICE, {\r\n      'type': 'pending',\r\n      'practice': notification.practice\r\n    });\r\n    if (notification.active_practice) {\r\n      context.commit(SET_ACTIVE_USER_PROP, {\r\n        'prop': 'active_practice',\r\n        'value': notification.practice\r\n      });\r\n    };\r\n    context.dispatch(USER_UPDATE);\r\n  },\r\n  [USER_UPDATE](context) {\r\n    return UserService.update(context.getters.activeUser).then(data => {\r\n      context.commit(SET_ACTIVE_USER, data)\r\n    });\r\n  },\r\n  [USER_LOGIN](context, credentials){\r\n    return UserService.login(credentials).then(data => {\r\n      // Stores the access and refresh tokens in localstorage\r\n      context.commit(UPDATE_LOCAL_STORAGE, {\r\n        access: data.access,\r\n        refresh: data.refresh\r\n      })\r\n      // catch(err => {\r\n      //   //not sure about this reject bit, have to check it's ok\r\n      //   reject(err)\r\n      // });\r\n    })\r\n  },\r\n  [REFRESH_ACCESS_TOKEN](context){\r\n    // send the stored refresh token to the API\r\n    return UserService.refreshToken({\r\n      'refresh': context.getters.refreshToken\r\n    }).then(data => {\r\n      // if API sends back new access token, update the store\r\n      console.log('New access successfully generated');\r\n      context.commit(UPDATE_ACCESS_TOKEN, data.access);\r\n      return data.access\r\n    }).catch(err => {\r\n        // HOW TO HANDLE REFRESH TOKEN EXPIRY?\r\n      console.log(`${err} error in refreshToken Task`);\r\n    })\r\n  }\r\n};\r\n\r\n/* eslint no-param-reassign: [\"error\", { \"props\": false }] */\r\nexport const mutations = {\r\n  [SET_ACTIVE_USER](state, user) {\r\n    state.activeUser = user;\r\n  },\r\n  [REMOVE_ACTIVE_USER_FROM_PRACTICE](state, {type, practice}){\r\n    if (type === 'pending') {\r\n      const result = state.activeUser.pending_practices.filter(i => i != practice);\r\n      state.activeUser.pending_practices = result;\r\n    }\r\n  },\r\n  [ADD_ACTIVE_USER_TO_PRACTICE](state, {type, practice}){\r\n    if (type === 'practice') {\r\n      state.activeUser.practices.push(practice)\r\n    }\r\n  },\r\n  [SET_ACTIVE_USER_PROP](state, {prop, value}) {\r\n    if (prop.includes('.')) {\r\n        let splitprop = prop.split('.');\r\n        let obj = splitprop[0];\r\n        let attr = splitprop[1];\r\n        if (!state.activeUser[obj]) {\r\n            state.activeUser[obj] = new Object();\r\n        }\r\n        state.activeUser[obj][attr] = value;\r\n    } else {\r\n    state.activeUser[prop] = value;\r\n    }\r\n  },\r\n  [UPDATE_LOCAL_STORAGE](state, {access, refresh}) {\r\n    localStorage.setItem('access_token', access);\r\n    localStorage.setItem('refresh_token', refresh);\r\n    state.accessToken = access;\r\n    state.refreshToken = refresh;\r\n  },\r\n  [UPDATE_ACCESS_TOKEN] (state, access) {\r\n    state.accessToken = access;\r\n    localStorage.setItem('access_token', access);\r\n  },\r\n  [DESTROY_TOKENS] (state) {\r\n    state.accessToken = null;\r\n    state.refreshToken = null;\r\n  },\r\n  [SET_REFRESHING_IN_PROGRESS] (state, val) {\r\n    state.refreshingAccessToken = val;\r\n  },\r\n};\r\n\r\nconst getters = {\r\n  activeUser(state) {\r\n    return state.activeUser;\r\n  },\r\n  accessToken (state) {\r\n    return state.accessToken;\r\n  },\r\n  refreshToken (state) {\r\n    return state.refreshToken;\r\n  },\r\n  loggedIn (state) {\r\n    return state.accessToken != null\r\n  }\r\n};\r\n\r\nexport default {\r\n  state,\r\n  actions,\r\n  mutations,\r\n  getters\r\n};\r\n"]}]}