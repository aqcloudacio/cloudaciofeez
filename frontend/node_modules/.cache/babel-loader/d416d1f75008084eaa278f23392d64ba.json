{"remainingRequest":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js??ref--18-0!C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\components\\AddCustomPlatform.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\components\\AddCustomPlatform.vue","mtime":1586498794611},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgYXBpU2VydmljZSB9IGZyb20gIkAvY29tbW9uL2FwaS5zZXJ2aWNlLmpzIjsKaW1wb3J0IFBsYXRmb3JtRGV0YWlsIGZyb20gIkAvY29tcG9uZW50cy9QbGF0Zm9ybURldGFpbC52dWUiOwppbXBvcnQgUGxhdGZvcm1GZWVTdW1tYXJ5IGZyb20gIkAvY29tcG9uZW50cy9QbGF0Zm9ybUZlZVN1bW1hcnkudnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBZGRDdXN0b21QbGF0Zm9ybSIsCiAgaW5qZWN0OiBbInNjZW5hcmlvSWQiXSwKICBjb21wb25lbnRzOiB7CiAgICBQbGF0Zm9ybURldGFpbDogUGxhdGZvcm1EZXRhaWwsCiAgICBQbGF0Zm9ybUZlZVN1bW1hcnk6IFBsYXRmb3JtRmVlU3VtbWFyeQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBsYXRmb3JtTmFtZTogIiIsCiAgICAgIHBsYXRmb3JtRmVlOiB7fSwKICAgICAgZGlhbG9nOiBmYWxzZSwKICAgICAgcGxhdGZvcm06IG51bGwsCiAgICAgIHNob3dEZXRhaWw6IGZhbHNlLAogICAgICBwbGF0Zm9ybUtleTogMAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGZvcmNlUmVyZW5kZXI6IGZ1bmN0aW9uIGZvcmNlUmVyZW5kZXIoKSB7CiAgICAgIHRoaXMucGxhdGZvcm1LZXkgKz0gMTsKICAgIH0sCiAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5wbGF0Zm9ybU5hbWUpIHsKICAgICAgICB2YXIgZW5kcG9pbnQgPSAiL2FwaS9zY2VuYXJpb3MvIi5jb25jYXQodGhpcy5zY2VuYXJpb0lkLCAiL3BsYXRmb3Jtcy8iKTsKICAgICAgICBhcGlTZXJ2aWNlKGVuZHBvaW50LCAiUE9TVCIsIHsKICAgICAgICAgIG5hbWVfaWQ6IG51bGwsCiAgICAgICAgICBjdXN0b21fbmFtZTogdGhpcy5wbGF0Zm9ybU5hbWUsCiAgICAgICAgICBzY2VuYXJpbzogdGhpcy5zY2VuYXJpb0lkLAogICAgICAgICAgZWRpdGVkOiB0cnVlCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgX3RoaXMuJGVtaXQoImFkZC1wbGF0Zm9ybSIsIGRhdGEpOwoKICAgICAgICAgIF90aGlzLnBsYXRmb3JtID0gZGF0YTsKICAgICAgICAgIF90aGlzLnNob3dEZXRhaWwgPSB0cnVlOwoKICAgICAgICAgIF90aGlzLmZvcmNlUmVyZW5kZXIoKTsKCiAgICAgICAgICBfdGhpcy5nZXRQbGF0Zm9ybUZlZURhdGEoKTsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKHRoaXMuZXJyb3IpIHsKICAgICAgICAgIHRoaXMuZXJyb3IgPSBudWxsOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmVycm9yID0gIllvdSBtdXN0IGVudGVyIGEgcGxhdGZvcm0gbmFtZSI7CiAgICAgIH0KICAgIH0sCiAgICBnZXRQbGF0Zm9ybUZlZURhdGE6IGZ1bmN0aW9uIGdldFBsYXRmb3JtRmVlRGF0YSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgZW5kcG9pbnQgPSAiL2FwaS9zY2VuYXJpb3MvIi5jb25jYXQodGhpcy5zY2VuYXJpb0lkLCAiL3BsYXRmb3Jtcy8iKS5jb25jYXQodGhpcy5wbGF0Zm9ybS5pZCwgIi9wbGF0Zm9ybWZlZXMvIik7CiAgICAgIGFwaVNlcnZpY2UoZW5kcG9pbnQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBfdGhpczIucGxhdGZvcm1GZWUgPSBkYXRhLnJlc3VsdHNbMF07CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["AddCustomPlatform.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA,SAAA,UAAA,QAAA,yBAAA;AACA,OAAA,cAAA,MAAA,iCAAA;AACA,OAAA,kBAAA,MAAA,qCAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,mBADA;AAEA,EAAA,MAAA,EAAA,CAAA,YAAA,CAFA;AAGA,EAAA,UAAA,EAAA;AACA,IAAA,cAAA,EAAA,cADA;AAEA,IAAA,kBAAA,EAAA;AAFA,GAHA;AAOA,EAAA,IAPA,kBAOA;AACA,WAAA;AACA,MAAA,YAAA,EAAA,EADA;AAEA,MAAA,WAAA,EAAA,EAFA;AAGA,MAAA,MAAA,EAAA,KAHA;AAIA,MAAA,QAAA,EAAA,IAJA;AAKA,MAAA,UAAA,EAAA,KALA;AAMA,MAAA,WAAA,EAAA;AANA,KAAA;AAQA,GAhBA;AAiBA,EAAA,OAAA,EAAA;AACA,IAAA,aADA,2BACA;AACA,WAAA,WAAA,IAAA,CAAA;AACA,KAHA;AAIA,IAAA,QAJA,sBAIA;AAAA;;AACA,UAAA,KAAA,YAAA,EAAA;AACA,YAAA,QAAA,4BAAA,KAAA,UAAA,gBAAA;AACA,QAAA,UAAA,CAAA,QAAA,EAAA,MAAA,EAAA;AACA,UAAA,OAAA,EAAA,IADA;AAEA,UAAA,WAAA,EAAA,KAAA,YAFA;AAGA,UAAA,QAAA,EAAA,KAAA,UAHA;AAIA,UAAA,MAAA,EAAA;AAJA,SAAA,CAAA,CAKA,IALA,CAKA,UAAA,IAAA,EAAA;AACA,UAAA,KAAA,CAAA,KAAA,CAAA,cAAA,EAAA,IAAA;;AACA,UAAA,KAAA,CAAA,QAAA,GAAA,IAAA;AACA,UAAA,KAAA,CAAA,UAAA,GAAA,IAAA;;AACA,UAAA,KAAA,CAAA,aAAA;;AACA,UAAA,KAAA,CAAA,kBAAA;AACA,SAXA;;AAYA,YAAA,KAAA,KAAA,EAAA;AACA,eAAA,KAAA,GAAA,IAAA;AACA;AACA,OAjBA,MAiBA;AACA,aAAA,KAAA,GAAA,gCAAA;AACA;AACA,KAzBA;AA0BA,IAAA,kBA1BA,gCA0BA;AAAA;;AACA,UAAA,QAAA,4BAAA,KAAA,UAAA,wBAAA,KAAA,QAAA,CAAA,EAAA,mBAAA;AACA,MAAA,UAAA,CAAA,QAAA,CAAA,CAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,QAAA,MAAA,CAAA,WAAA,GAAA,IAAA,CAAA,OAAA,CAAA,CAAA,CAAA;AACA,OAFA;AAGA;AA/BA;AAjBA,CAAA","sourcesContent":["<template lang=\"html\">\r\n  <v-dialog v-model=\"dialog\">\r\n    <template v-slot:activator=\"{ on }\">\r\n        <v-btn color=\"secondary\"  v-on=\"on\">\r\n        Add Custom Platform\r\n      </v-btn>\r\n    </template>\r\n    <v-card>\r\n      <v-form @submit.prevent=\"onSubmit\"\r\n              class=\"pa-4\">\r\n        <v-row>\r\n          <v-col :cols=\"10\">\r\n            <v-text-field\r\n              dense solo hide-details\r\n              v-model=\"platformName\"\r\n            />\r\n          </v-col>\r\n          <v-col :cols=\"2\">\r\n            <v-btn type=\"submit\" color=\"primary\" dense>Save</v-btn>\r\n          </v-col>\r\n        </v-row>\r\n        <v-row>\r\n            <v-col>\r\n            <PlatformDetail\r\n              v-if=\"showDetail == true\"\r\n              :platform=\"platform\"\r\n              :key=\"platformKey\"\r\n            />\r\n          </v-col>\r\n        </v-row>\r\n        <v-row>\r\n          <v-col>\r\n            <PlatformFeeSummary\r\n              v-if=\"showDetail == true\"\r\n              :platformFee=\"platformFee\"\r\n              :platform=\"platform.id\"\r\n              :key=\"platformKey\"\r\n            />\r\n          </v-col>\r\n        </v-row>\r\n      </v-form>\r\n    </v-card>\r\n  </v-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { apiService } from \"@/common/api.service.js\";\r\nimport PlatformDetail from \"@/components/PlatformDetail.vue\";\r\nimport PlatformFeeSummary from \"@/components/PlatformFeeSummary.vue\";\r\n\r\nexport default {\r\n  name: \"AddCustomPlatform\",\r\n  inject: [\"scenarioId\"],\r\n  components: {\r\n    PlatformDetail,\r\n    PlatformFeeSummary\r\n  },\r\n  data() {\r\n    return {\r\n      platformName: \"\",\r\n      platformFee: {},\r\n      dialog: false,\r\n      platform: null,\r\n      showDetail: false,\r\n      platformKey: 0,\r\n    };\r\n  },\r\n  methods: {\r\n    forceRerender(){\r\n      this.platformKey += 1;\r\n    },\r\n    onSubmit() {\r\n      if (this.platformName) {\r\n        let endpoint = `/api/scenarios/${this.scenarioId}/platforms/`;\r\n        apiService(endpoint, \"POST\", {\r\n          name_id: null,\r\n          custom_name: this.platformName,\r\n          scenario: this.scenarioId,\r\n          edited: true,\r\n        }).then(data => {\r\n          this.$emit(\"add-platform\", data);\r\n          this.platform = data;\r\n          this.showDetail = true;\r\n          this.forceRerender();\r\n          this.getPlatformFeeData()\r\n        });\r\n        if (this.error) {\r\n          this.error = null;\r\n        }\r\n      } else {\r\n        this.error = \"You must enter a platform name\";\r\n      }\r\n    },\r\n    getPlatformFeeData() {\r\n      let endpoint = `/api/scenarios/${this.scenarioId}/platforms/${this.platform.id}/platformfees/`;\r\n      apiService(endpoint).then(data => {\r\n        this.platformFee = data.results[0];\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"css\" scoped>\r\n</style>\r\n"],"sourceRoot":"src/components"}]}