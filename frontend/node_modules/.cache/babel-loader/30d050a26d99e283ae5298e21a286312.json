{"remainingRequest":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js??ref--18-0!C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\components\\AddPlatform.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\components\\AddPlatform.vue","mtime":1587698014506},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgYXBpU2VydmljZSB9IGZyb20gIkAvY29tbW9uL2FwaS5zZXJ2aWNlLmpzIjsgLy8gaW1wb3J0IEFkZEN1c3RvbVBsYXRmb3JtIGZyb20gIkAvY29tcG9uZW50cy9BZGRDdXN0b21QbGF0Zm9ybS52dWUiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBZGRQbGF0Zm9ybSIsCiAgaW5qZWN0OiBbInNjZW5hcmlvSWQiXSwKICBwcm9wczogewogICAgc3RhdHVzOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7fSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VhcmNoOiBudWxsLAogICAgICBuZXdQbGF0Zm9ybTogbnVsbCwKICAgICAgcGxhdGZvcm1MaXN0OiBbXSwKICAgICAgZXJyb3I6IG51bGwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgcGxhdGZvcm1TdHJpbmdzOiBmdW5jdGlvbiBwbGF0Zm9ybVN0cmluZ3MoKSB7CiAgICAgIHZhciBuYW1lTGlzdCA9IFtdOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBsYXRmb3JtTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgIG5hbWVMaXN0LnB1c2godGhpcy5wbGF0Zm9ybUxpc3RbaV0ubmFtZSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBuYW1lTGlzdDsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFBsYXRmb3JtTGlzdDogZnVuY3Rpb24gZ2V0UGxhdGZvcm1MaXN0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGVuZHBvaW50ID0gIi9hcGkvcGxhdGZvcm1uYW1lcy8iOwogICAgICBhcGlTZXJ2aWNlKGVuZHBvaW50LCAiR0VUIikudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIF90aGlzLnBsYXRmb3JtTGlzdCA9IGRhdGEucmVzdWx0czsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0UGxhdGZvcm1JRDogZnVuY3Rpb24gZ2V0UGxhdGZvcm1JRChwbGF0Zm9ybSkgewogICAgICBpZiAocGxhdGZvcm0uaWQgIT0gbnVsbCkgewogICAgICAgIHJldHVybiBwbGF0Zm9ybS5pZDsKICAgICAgfSBlbHNlIGlmICh0aGlzLnBsYXRmb3JtU3RyaW5ncy5pbmNsdWRlcyhwbGF0Zm9ybSkpIHsKICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5wbGF0Zm9ybUxpc3QuZmlsdGVyKGZ1bmN0aW9uIChvYmopIHsKICAgICAgICAgIHJldHVybiBvYmoubmFtZSA9PT0gcGxhdGZvcm07CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHJlc3VsdFswXS5pZDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfSwKICAgIGRlbGF5U3VibWl0OiBmdW5jdGlvbiBkZWxheVN1Ym1pdCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLiRyZWZzLmNvbWJvYm94LmJsdXIoKTsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi5vblN1Ym1pdCgpOwogICAgICB9KTsKICAgIH0sCiAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgLy8gc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgaWYgKHRoaXMubmV3UGxhdGZvcm0gIT0gbnVsbCkgewogICAgICAgIHZhciBlbmRwb2ludCA9ICIvYXBpL3NjZW5hcmlvcy8iLmNvbmNhdCh0aGlzLnNjZW5hcmlvSWQsICIvcGxhdGZvcm1zLyIpOwoKICAgICAgICBpZiAodGhpcy5wbGF0Zm9ybUxpc3QuaW5jbHVkZXModGhpcy5uZXdQbGF0Zm9ybSkgfHwgdGhpcy5wbGF0Zm9ybVN0cmluZ3MuaW5jbHVkZXModGhpcy5uZXdQbGF0Zm9ybSkpIHsKICAgICAgICAgIHZhciBuYW1lX2lkID0gdGhpcy5nZXRQbGF0Zm9ybUlEKHRoaXMubmV3UGxhdGZvcm0pOwogICAgICAgICAgYXBpU2VydmljZShlbmRwb2ludCwgIlBPU1QiLCB7CiAgICAgICAgICAgIG5hbWVfaWQ6IG5hbWVfaWQsCiAgICAgICAgICAgIHNjZW5hcmlvOiB0aGlzLnNjZW5hcmlvSWQsCiAgICAgICAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMKICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgX3RoaXMzLiRlbWl0KCJhZGQtcGxhdGZvcm0iLCBkYXRhKTsKCiAgICAgICAgICAgIF90aGlzMy5uZXdQbGF0Zm9ybSA9ICIiOwogICAgICAgICAgfSk7CgogICAgICAgICAgaWYgKHRoaXMuZXJyb3IpIHsKICAgICAgICAgICAgdGhpcy5lcnJvciA9IG51bGw7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFwaVNlcnZpY2UoZW5kcG9pbnQsICJQT1NUIiwgewogICAgICAgICAgICBuYW1lX2lkOiBudWxsLAogICAgICAgICAgICBjdXN0b21fbmFtZTogdGhpcy5uZXdQbGF0Zm9ybSwKICAgICAgICAgICAgc2NlbmFyaW86IHRoaXMuc2NlbmFyaW9JZCwKICAgICAgICAgICAgZWRpdGVkOiB0cnVlLAogICAgICAgICAgICBzdGF0dXM6IHRoaXMuc3RhdHVzCiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICAgIF90aGlzMy4kZW1pdCgiYWRkLXBsYXRmb3JtIiwgZGF0YSk7CgogICAgICAgICAgICBfdGhpczMubmV3UGxhdGZvcm0gPSAiIjsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGlmICh0aGlzLmVycm9yKSB7CiAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBudWxsOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmVycm9yID0gIllvdSBtdXN0IHNlbGVjdCBhIHBsYXRmb3JtIjsKICAgICAgfSAvLyB9LCAzMDAwKTsKCiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRQbGF0Zm9ybUxpc3QoKTsKICB9Cn07"},{"version":3,"sources":["AddPlatform.vue"],"names":[],"mappings":"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","sourcesContent":["<template lang=\"html\">\r\n  <v-card fluid>\r\n    <v-form class=\"px-4 py-2\">\r\n      <v-combobox\r\n        v-model=\"newPlatform\"\r\n        :items=\"platformList\"\r\n        @keyup.enter=\"delaySubmit\"\r\n        label=\"Add a new platform\"\r\n        item-text=\"name\"\r\n        no-data-text=\"Create a custom platform\"\r\n        ref=\"combobox\"\r\n        :search-input.sync=\"search\"\r\n>\r\n        <template v-slot:append-outer>\r\n          <v-icon\r\n            :color=\"'success'\"\r\n            @click=\"delaySubmit\">\r\n            mdi-check-outline\r\n          </v-icon>\r\n        </template>\r\n\r\n                <template v-slot:no-data>\r\n                <v-list-item>\r\n                  <v-list-item-content>\r\n                    <v-list-item-title>\r\n                      No platforms match \"<strong>{{ search }}</strong>\". Press <kbd>enter</kbd> to create a custom platform.\r\n                    </v-list-item-title>\r\n                  </v-list-item-content>\r\n                </v-list-item>\r\n              </template>\r\n      </v-combobox>\r\n        </v-form>\r\n\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nimport { apiService } from \"@/common/api.service.js\";\r\n// import AddCustomPlatform from \"@/components/AddCustomPlatform.vue\";\r\n\r\nexport default {\r\n  name: \"AddPlatform\",\r\n  inject: [\"scenarioId\"],\r\n  props: {\r\n    status: {\r\n      type: String,\r\n      required: false,\r\n    }\r\n  },\r\n  components: {\r\n  },\r\n  data() {\r\n    return {\r\n      search: null,\r\n      newPlatform: null,\r\n      platformList: [],\r\n      error: null,\r\n    };\r\n  },\r\n  computed: {\r\n    platformStrings() {\r\n      let nameList = [];\r\n      for (let i=0; i < this.platformList.length; i++){\r\n        nameList.push(this.platformList[i].name)\r\n      }\r\n      return nameList\r\n    }\r\n  },\r\n  methods: {\r\n    getPlatformList() {\r\n      let endpoint = `/api/platformnames/`;\r\n      apiService(endpoint, \"GET\").then(data => {\r\n        this.platformList = data.results;\r\n      });\r\n    },\r\n    getPlatformID(platform) {\r\n      if (platform.id != null) {\r\n        return platform.id\r\n      } else if (this.platformStrings.includes(platform)){\r\n        let result = this.platformList.filter(obj => {\r\n          return obj.name === platform;\r\n        })\r\n        return result[0].id;\r\n      } else {\r\n        return null;\r\n      }\r\n    },\r\n    delaySubmit() {\r\n      this.$refs.combobox.blur();\r\n      this.$nextTick(() => {\r\n        this.onSubmit();\r\n      })\r\n\r\n\r\n    },\r\n    onSubmit() {\r\n\r\n\r\n      // setTimeout(function() {\r\n\r\n        if (this.newPlatform != null) {\r\n          let endpoint = `/api/scenarios/${this.scenarioId}/platforms/`;\r\n          if (this.platformList.includes(this.newPlatform)\r\n              || this.platformStrings.includes(this.newPlatform)) {\r\n                let name_id = this.getPlatformID(this.newPlatform);\r\n            apiService(endpoint, \"POST\", {\r\n              name_id: name_id,\r\n              scenario: this.scenarioId,\r\n              status: this.status,\r\n            }).then(data => {\r\n              this.$emit(\"add-platform\", data);\r\n              this.newPlatform = \"\";\r\n            });\r\n            if (this.error) {\r\n              this.error = null;\r\n            }\r\n          } else {\r\n            apiService(endpoint, \"POST\", {\r\n              name_id: null,\r\n              custom_name: this.newPlatform,\r\n              scenario: this.scenarioId,\r\n              edited: true,\r\n              status: this.status,\r\n            }).then(data => {\r\n              this.$emit(\"add-platform\", data);\r\n              this.newPlatform = \"\";\r\n\r\n            });\r\n            if (this.error) {\r\n              this.error = null;\r\n            }\r\n          }\r\n        } else {\r\n          this.error = \"You must select a platform\";      }\r\n      // }, 3000);\r\n    }\r\n  },\r\n  created() {\r\n    this.getPlatformList();\r\n  }\r\n};\r\n</script>\r\n"],"sourceRoot":"src/components"}]}