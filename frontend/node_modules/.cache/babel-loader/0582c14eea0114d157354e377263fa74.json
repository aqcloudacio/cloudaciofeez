{"remainingRequest":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js??ref--18-0!C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\components\\Notifications.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\src\\components\\Notifications.vue","mtime":1603340357630},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Feez\\feez\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJDOlxcVXNlcnNcXFVzZXJcXERlc2t0b3BcXEZlZXpcXGZlZXpcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgYXBpU2VydmljZSB9IGZyb20gIkAvY29tbW9uL2FwaS5zZXJ2aWNlLmpzIjsKaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gInZ1ZXgiOwppbXBvcnQgeyBQUkFDVElDRV9JTlZJVEVfQUNDRVBUIH0gZnJvbSAiQC9zdG9yZS9hY3Rpb25zLnR5cGUiOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHt9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBub3RpZmljYXRpb25zOiBudWxsLAogICAgICBhY3RpdmVfcHJhY3RpY2U6IHRydWUKICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7fSwgbWFwR2V0dGVycyhbImFjdGl2ZVVzZXIiXSksIHsKICAgIHZpc2libGVOb3RpZmljYXRpb25zOiBmdW5jdGlvbiB2aXNpYmxlTm90aWZpY2F0aW9ucygpIHsKICAgICAgaWYgKHRoaXMubm90aWZpY2F0aW9ucykgewogICAgICAgIHJldHVybiB0aGlzLm5vdGlmaWNhdGlvbnMuZmlsdGVyKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgICByZXR1cm4gaS52aXNpYmxlID09IHRydWU7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9LAogICAgbGFzdFRocmVlTm90aWZpY2F0aW9uczogZnVuY3Rpb24gbGFzdFRocmVlTm90aWZpY2F0aW9ucygpIHsKICAgICAgcmV0dXJuIHRoaXMudmlzaWJsZU5vdGlmaWNhdGlvbnMuc2xpY2UoMCwgMyk7CiAgICB9LAogICAgdW5yZWFkTm90aWZpY2F0aW9uczogZnVuY3Rpb24gdW5yZWFkTm90aWZpY2F0aW9ucygpIHsKICAgICAgcmV0dXJuIHRoaXMudmlzaWJsZU5vdGlmaWNhdGlvbnMuZmlsdGVyKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgcmV0dXJuIGkucmVhZCA9PSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgbnVtTm90aWZpY2F0aW9uczogZnVuY3Rpb24gbnVtTm90aWZpY2F0aW9ucygpIHsKICAgICAgaWYgKHRoaXMudW5yZWFkTm90aWZpY2F0aW9ucy5sZW5ndGggPiAwKSB7CiAgICAgICAgcmV0dXJuIHRoaXMudW5yZWFkTm90aWZpY2F0aW9ucy5sZW5ndGg7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0KICB9KSwKICBtZXRob2RzOiB7CiAgICBnZXROb3RpZmljYXRpb25zOiBmdW5jdGlvbiBnZXROb3RpZmljYXRpb25zKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGVuZHBvaW50ID0gIi9hcGkvbm90aWZpY2F0aW9ucy8iOwogICAgICBhcGlTZXJ2aWNlKGVuZHBvaW50KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgX3RoaXMubm90aWZpY2F0aW9ucyA9IGRhdGEucmVzdWx0czsKICAgICAgfSk7CiAgICB9LAogICAgZGVueU5vdGlmaWNhdGlvbjogZnVuY3Rpb24gZGVueU5vdGlmaWNhdGlvbihub3RpZmljYXRpb24pIHsKICAgICAgdGhpcy5zZXRJbnZpc2libGUobm90aWZpY2F0aW9uKTsKICAgIH0sCiAgICBhY2NlcHROb3RpZmljYXRpb246IGZ1bmN0aW9uIGFjY2VwdE5vdGlmaWNhdGlvbihub3RpZmljYXRpb24pIHsKICAgICAgdGhpcy5zZXRJbnZpc2libGUobm90aWZpY2F0aW9uKTsKCiAgICAgIGlmIChub3RpZmljYXRpb24udHlwZSA9PSAncHJhY3RpY2VfaW52aXRlJykgewogICAgICAgIHRoaXMuYWNjZXB0UHJhY3RpY2VJbnZpdGUobm90aWZpY2F0aW9uKTsKICAgICAgfQogICAgfSwKICAgIGFjY2VwdFByYWN0aWNlSW52aXRlOiBmdW5jdGlvbiBhY2NlcHRQcmFjdGljZUludml0ZShub3RpZmljYXRpb24pIHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goUFJBQ1RJQ0VfSU5WSVRFX0FDQ0VQVCwgbm90aWZpY2F0aW9uKTsKICAgIH0sCiAgICBzZXRBc1JlYWQ6IGZ1bmN0aW9uIHNldEFzUmVhZCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgaWRzID0gW107CiAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTsKICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7CiAgICAgIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gdGhpcy51bnJlYWROb3RpZmljYXRpb25zW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkgewogICAgICAgICAgdmFyIGl0ZW0gPSBfc3RlcC52YWx1ZTsKICAgICAgICAgIGlkcy5wdXNoKGl0ZW0uaWQpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSB0cnVlOwogICAgICAgIF9pdGVyYXRvckVycm9yID0gZXJyOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybiAhPSBudWxsKSB7CiAgICAgICAgICAgIF9pdGVyYXRvci5yZXR1cm4oKTsKICAgICAgICAgIH0KICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yKSB7CiAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoKSB7CiAgICAgICAgdmFyIGlkID0gX2lkc1tfaV07CgogICAgICAgIHZhciByZXN1bHQgPSBfdGhpczIubm90aWZpY2F0aW9ucy5maW5kKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgICByZXR1cm4gaS5pZCA9PT0gaWQ7CiAgICAgICAgfSk7CgogICAgICAgIHJlc3VsdC5yZWFkID0gdHJ1ZTsKICAgICAgICB2YXIgZW5kcG9pbnQgPSAiL2FwaS9ub3RpZmljYXRpb25zLyIuY29uY2F0KGlkLCAiLyIpOwogICAgICAgIGFwaVNlcnZpY2UoZW5kcG9pbnQsICJQQVRDSCIsIHsKICAgICAgICAgIHJlYWQ6IHRydWUKICAgICAgICB9KTsKICAgICAgfTsKCiAgICAgIGZvciAodmFyIF9pID0gMCwgX2lkcyA9IGlkczsgX2kgPCBfaWRzLmxlbmd0aDsgX2krKykgewogICAgICAgIF9sb29wKCk7CiAgICAgIH0KICAgIH0sCiAgICBzZXRJbnZpc2libGU6IGZ1bmN0aW9uIHNldEludmlzaWJsZShub3RpZmljYXRpb24pIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgZW5kcG9pbnQgPSAiL2FwaS9ub3RpZmljYXRpb25zLyIuY29uY2F0KG5vdGlmaWNhdGlvbi5pZCwgIi8iKTsKICAgICAgYXBpU2VydmljZShlbmRwb2ludCwgIlBBVENIIiwgewogICAgICAgIHZpc2libGU6IGZhbHNlCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBfdGhpczMuJHNldChub3RpZmljYXRpb24sICd2aXNpYmxlJywgZGF0YS52aXNpYmxlKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5nZXROb3RpZmljYXRpb25zKCk7CiAgfQp9Ow=="},{"version":3,"sources":["Notifications.vue"],"names":[],"mappings":"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","sourcesContent":["<template lang=\"html\">\r\n  <v-menu\r\n    :close-on-content-click=\"false\"\r\n    offset-y\r\n    max-width=\"400px\"\r\n    >\r\n    <template v-slot:activator=\"{ on }\">\r\n      <v-btn icon v-on=\"on\" @click=\"setAsRead\">\r\n        <v-badge\r\n          :value=\"numNotifications != null\"\r\n          :content=\"numNotifications\"\r\n          overlap >\r\n          <v-icon >mdi-bell-outline</v-icon>\r\n        </v-badge>\r\n      </v-btn>\r\n    </template>\r\n    <v-card>\r\n      <template\r\n        v-for=\"(notification,index) in lastThreeNotifications\">\r\n        <v-container :key=\"notification.id\" class=\"pa-0\">\r\n          <v-list three-line class=\"pb-0\">\r\n            <v-list-item>\r\n              <v-list-item-content >\r\n                <v-list-item-title>{{notification.title}}</v-list-item-title>\r\n                <v-list-item-subtitle>{{notification.content}}</v-list-item-subtitle>\r\n              </v-list-item-content>\r\n            </v-list-item>\r\n          </v-list>\r\n          <template v-if=\"notification.type==='practice_invite'\">\r\n            <v-list  class=\"pa-0\">\r\n              <v-list-item  >\r\n                <v-list-item-action>\r\n                  <v-switch v-model=\"notification.active_practice\" color=\"teal\"></v-switch>\r\n                </v-list-item-action>\r\n                <v-list-item-title>Set as active practice</v-list-item-title>\r\n              </v-list-item>\r\n            </v-list>\r\n            <v-card-actions>\r\n              <v-spacer />\r\n              <v-btn text @click=\"denyNotification(notification)\">Ignore</v-btn>\r\n              <v-btn color=\"primary\" text @click=\"acceptNotification(notification)\">Accept Invitation</v-btn>\r\n            </v-card-actions>\r\n          </template>\r\n          <template v-if=\"notification.type=='scenario_share'\">\r\n            <v-card-actions>\r\n              <v-spacer />\r\n              <v-btn text @click=\"denyNotification(notification)\">Got it</v-btn>\r\n            </v-card-actions>\r\n          </template>\r\n          <v-divider v-if=\"index < (notifications.length-1)\" />\r\n        </v-container>\r\n      </template>\r\n    </v-card>\r\n  </v-menu>\r\n</template>\r\n\r\n<script>\r\nimport { apiService } from \"@/common/api.service.js\";\r\nimport { mapGetters } from \"vuex\";\r\nimport {\r\n  PRACTICE_INVITE_ACCEPT\r\n} from \"@/store/actions.type\";\r\n\r\nexport default {\r\n  props: {\r\n  },\r\n  data() {\r\n    return {\r\n      notifications: null,\r\n      active_practice: true,\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"activeUser\"]),\r\n    visibleNotifications() {\r\n      if (this.notifications) {\r\n        return this.notifications.filter(i => i.visible == true)\r\n      } else {\r\n        return []\r\n      }\r\n    },\r\n    lastThreeNotifications() {\r\n      return this.visibleNotifications.slice(0,3)\r\n    },\r\n    unreadNotifications() {\r\n      return this.visibleNotifications.filter(i => i.read == false)\r\n    },\r\n    numNotifications() {\r\n      if (this.unreadNotifications.length > 0) {\r\n        return this.unreadNotifications.length\r\n      } else {\r\n        return null\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    getNotifications() {\r\n      let endpoint = \"/api/notifications/\";\r\n      apiService(endpoint).then(data => {\r\n        this.notifications = data.results;\r\n      });\r\n    },\r\n    denyNotification(notification){\r\n      this.setInvisible(notification)\r\n    },\r\n    acceptNotification(notification) {\r\n      this.setInvisible(notification);\r\n      if (notification.type == 'practice_invite'){\r\n        this.acceptPracticeInvite(notification);\r\n      }\r\n    },\r\n    acceptPracticeInvite(notification) {\r\n      this.$store.dispatch(PRACTICE_INVITE_ACCEPT, notification)\r\n    },\r\n    setAsRead() {\r\n      let ids = []\r\n      for (let item of this.unreadNotifications) {\r\n        ids.push(item.id);\r\n      }\r\n      for (let id of ids) {\r\n        let result = this.notifications.find(i => i.id === id)\r\n        result.read = true;\r\n        let endpoint = `/api/notifications/${id}/`;\r\n        apiService(endpoint, \"PATCH\", {\r\n          read: true,\r\n        });\r\n      }\r\n    },\r\n    setInvisible(notification) {\r\n      let endpoint = `/api/notifications/${notification.id}/`;\r\n      apiService(endpoint, \"PATCH\", {\r\n        visible: false,\r\n      }).then(data => {\r\n        this.$set(notification,'visible', data.visible);\r\n      });\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getNotifications();\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"css\" scoped>\r\n</style>\r\n"],"sourceRoot":"src/components"}]}